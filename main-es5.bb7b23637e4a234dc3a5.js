function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,s=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function asyncGeneratorStep(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){asyncGeneratorStep(s,r,i,o,a,"next",e)}function a(e){asyncGeneratorStep(s,r,i,o,a,"throw",e)}o(void 0)}))}}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}/*! For license information please see main-es2015.bb7b23637e4a234dc3a5.js.LICENSE.txt */(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},Nj2v:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){(function(e){var n={userAgent:!1},r={};if(void 0===i)var i={};i.lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var i=function(){};if(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){var s;for(s in r)e.prototype[s]=r[s];var o=function(){},a=["toString","valueOf"];try{/MSIE/.test(n.userAgent)&&(o=function(e,t){for(s=0;s<a.length;s+=1){var n=a[s],r=t[n];"function"==typeof r&&r!=Object.prototype[n]&&(e[n]=r)}})}catch(e){}o(e.prototype,r)}}};var s,o,a,u,c,l,h,f,d,p,g,v=v||(s=Math,a=(o={}).lib={},u=a.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=a.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++)t[r+s>>>2]|=(n[s>>>2]>>>24-s%4*8&255)<<24-(r+s)%4*8;else for(s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new c.init(t,e)}}),l=o.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},f=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,o=r/(4*i),a=(o=e?s.ceil(o):s.max((0|o)-this._minBufferSize,0))*i,u=s.min(4*a,r);if(a){for(var l=0;l<a;l+=i)this._doProcessBlock(n,l);var h=n.splice(0,a);t.sigBytes-=u}return new c.init(h,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),a.Hasher=p.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),g=o.algo={},o);!function(e){var t,n=(t=v).lib,r=n.Base,i=n.WordArray;(t=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var s=e[r];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),v.lib.Cipher||function(e){var t=(d=v).lib,n=t.Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,s=d.enc.Base64,o=d.algo.EvpKDF,a=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?p:f).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?p:f).decrypt(e,t,n,r)}}}});t.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=d.mode={},c=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},l=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;c.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),c.call(this,e,t,r),this._prevBlock=i}}),u=u.CBC=l,l=(d.pad={}).Pkcs7={pad:function(e,t){for(var n,i=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(i);n=r.create(s,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=a.extend({cfg:a.cfg.extend({mode:u,padding:l}),reset:function(){a.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(u=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),h.create({ciphertext:t,key:n,iv:(i=i.cfg).iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=r.random(8)),e=o.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:i})}},p=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:d}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=f.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,f.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=v,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],s=[],o=[],a=[],u=[],c=[],l=[],h=[],f=[],d=[],p=0;256>p;p++)d[p]=128>p?p<<1:p<<1^283;var g=0,y=0;for(p=0;256>p;p++){var m=(m=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&m^99;r[g]=m,i[m]=g;var w=d[g],b=d[w],S=d[b],E=257*d[m]^16843008*m;s[g]=E<<24|E>>>8,o[g]=E<<16|E>>>16,a[g]=E<<8|E>>>24,u[g]=E,c[m]=(E=16843009*S^65537*b^257*w^16843008*g)<<24|E>>>8,l[m]=E<<16|E>>>16,h[m]=E<<8|E>>>24,f[m]=E,g?(g=w^d[d[d[S^w]]],y^=d[d[y]]):g=y=1}var _=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],s=0;s<n;s++)if(s<t)i[s]=e[s];else{var o=i[s-1];s%t?6<t&&4==s%t&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=_[s/t|0]<<24),i[s]=i[s-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)s=n-t,o=t%4?i[s]:i[s-4],e[t]=4>t||4>=s?o:c[r[o>>>24]]^l[r[o>>>16&255]]^h[r[o>>>8&255]]^f[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,a,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,l,h,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],d=4,p=1;p<u;p++){var g=r[c>>>24]^i[l>>>16&255]^s[h>>>8&255]^o[255&f]^n[d++],v=r[l>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[255&c]^n[d++],y=r[h>>>24]^i[f>>>16&255]^s[c>>>8&255]^o[255&l]^n[d++];f=r[f>>>24]^i[c>>>16&255]^s[l>>>8&255]^o[255&h]^n[d++],c=g,l=v,h=y}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],v=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[d++],y=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[d++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d++],e[t]=g,e[t+1]=v,e[t+2]=y,e[t+3]=f},keySize:8}),e.AES=t._createHelper(n)}(),function(){function e(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function t(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var n=v,r=(i=n.lib).WordArray,i=i.BlockCipher,s=n.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;56>n;n++){var r=o[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(e=this._subKeys=[],r=0;16>r;r++){var i=e[r]=[],s=u[r];for(n=0;24>n;n++)i[n/6|0]|=t[(a[n]-1+s)%28]<<31-n%6,i[4+(n/6|0)]|=t[28+(a[n+24]-1+s)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(t=this._invSubKeys=[],n=0;16>n;n++)t[n]=e[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var s=0;16>s;s++){for(var o=i[s],a=this._lBlock,u=this._rBlock,h=0,f=0;8>f;f++)h|=c[f][((u^o[f])&l[f])>>>0];this._lBlock=u,this._rBlock=a^h}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=i._createHelper(h),s=s.TripleDES=i.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(r.create(e.slice(0,2))),this._des2=h.createEncryptor(r.create(e.slice(2,4))),this._des3=h.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=i._createHelper(s)}(),function(){var e=v.lib.WordArray;v.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(t){var n=t.length,r=this._map;(i=r.charAt(64))&&-1!=(i=t.indexOf(i))&&(n=i);for(var i=[],s=0,o=0;o<n;o++)if(o%4){var a=r.indexOf(t.charAt(o-1))<<o%4*2,u=r.indexOf(t.charAt(o))>>>6-o%4*2;i[s>>>2]|=(a|u)<<24-s%4*8,s++}return e.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,s,o){return((e=e+(t&n|~t&r)+i+o)<<s|e>>>32-s)+t}function n(e,t,n,r,i,s,o){return((e=e+(t&r|n&~r)+i+o)<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return((e=e+(t^n^r)+i+o)<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return((e=e+(n^(t|~r))+i+o)<<s|e>>>32-s)+t}for(var s=v,o=(u=s.lib).WordArray,a=u.Hasher,u=s.algo,c=[],l=0;64>l;l++)c[l]=4294967296*e.abs(e.sin(l+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var o=0;16>o;o++){var a=e[u=s+o];e[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var u=e[s+0],l=(a=e[s+1],e[s+2]),h=e[s+3],f=e[s+4],d=e[s+5],p=e[s+6],g=e[s+7],v=e[s+8],y=e[s+9],m=e[s+10],w=e[s+11],b=e[s+12],S=e[s+13],E=e[s+14],_=e[s+15],C=t(C=(o=this._hash.words)[0],F=o[1],A=o[2],x=o[3],u,7,c[0]),x=t(x,C,F,A,a,12,c[1]),A=t(A,x,C,F,l,17,c[2]),F=t(F,A,x,C,h,22,c[3]);C=t(C,F,A,x,f,7,c[4]),x=t(x,C,F,A,d,12,c[5]),A=t(A,x,C,F,p,17,c[6]),F=t(F,A,x,C,g,22,c[7]),C=t(C,F,A,x,v,7,c[8]),x=t(x,C,F,A,y,12,c[9]),A=t(A,x,C,F,m,17,c[10]),F=t(F,A,x,C,w,22,c[11]),C=t(C,F,A,x,b,7,c[12]),x=t(x,C,F,A,S,12,c[13]),A=t(A,x,C,F,E,17,c[14]),C=n(C,F=t(F,A,x,C,_,22,c[15]),A,x,a,5,c[16]),x=n(x,C,F,A,p,9,c[17]),A=n(A,x,C,F,w,14,c[18]),F=n(F,A,x,C,u,20,c[19]),C=n(C,F,A,x,d,5,c[20]),x=n(x,C,F,A,m,9,c[21]),A=n(A,x,C,F,_,14,c[22]),F=n(F,A,x,C,f,20,c[23]),C=n(C,F,A,x,y,5,c[24]),x=n(x,C,F,A,E,9,c[25]),A=n(A,x,C,F,h,14,c[26]),F=n(F,A,x,C,v,20,c[27]),C=n(C,F,A,x,S,5,c[28]),x=n(x,C,F,A,l,9,c[29]),A=n(A,x,C,F,g,14,c[30]),C=r(C,F=n(F,A,x,C,b,20,c[31]),A,x,d,4,c[32]),x=r(x,C,F,A,v,11,c[33]),A=r(A,x,C,F,w,16,c[34]),F=r(F,A,x,C,E,23,c[35]),C=r(C,F,A,x,a,4,c[36]),x=r(x,C,F,A,f,11,c[37]),A=r(A,x,C,F,g,16,c[38]),F=r(F,A,x,C,m,23,c[39]),C=r(C,F,A,x,S,4,c[40]),x=r(x,C,F,A,u,11,c[41]),A=r(A,x,C,F,h,16,c[42]),F=r(F,A,x,C,p,23,c[43]),C=r(C,F,A,x,y,4,c[44]),x=r(x,C,F,A,b,11,c[45]),A=r(A,x,C,F,_,16,c[46]),C=i(C,F=r(F,A,x,C,l,23,c[47]),A,x,u,6,c[48]),x=i(x,C,F,A,g,10,c[49]),A=i(A,x,C,F,E,15,c[50]),F=i(F,A,x,C,d,21,c[51]),C=i(C,F,A,x,b,6,c[52]),x=i(x,C,F,A,h,10,c[53]),A=i(A,x,C,F,m,15,c[54]),F=i(F,A,x,C,a,21,c[55]),C=i(C,F,A,x,v,6,c[56]),x=i(x,C,F,A,_,10,c[57]),A=i(A,x,C,F,p,15,c[58]),F=i(F,A,x,C,S,21,c[59]),C=i(C,F,A,x,f,6,c[60]),x=i(x,C,F,A,w,10,c[61]),A=i(A,x,C,F,l,15,c[62]),F=i(F,A,x,C,y,21,c[63]),o[0]=o[0]+C|0,o[1]=o[1]+F|0,o[2]=o[2]+A|0,o[3]=o[3]+x|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)n[r]=16711935&((i=n[r])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)}(Math),function(){var e=v,t=(i=e.lib).WordArray,n=i.Hasher,r=[],i=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],s=n[1],o=n[2],a=n[3],u=n[4],c=0;80>c;c++){if(16>c)r[c]=0|e[t+c];else{var l=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=l<<1|l>>>31}l=(i<<5|i>>>27)+u+r[c],l=20>c?l+(1518500249+(s&o|~s&a)):40>c?l+(1859775393+(s^o^a)):60>c?l+((s&o|s&a|o&a)-1894007588):l+((s^o^a)-899497514),u=a,a=o,o=s<<30|s>>>2,s=i,i=l}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=n._createHelper(i),e.HmacSHA1=n._createHmacHelper(i)}(),function(e){for(var t=v,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,s=[],o=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var l;e:{for(var h=e.sqrt(l=u),f=2;f<=h;f++)if(!(l%f)){l=!1;break e}l=!0}l&&(8>c&&(s[c]=a(e.pow(u,.5))),o[c]=a(e.pow(u,1/3)),c++),u++}var d=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|e[t+f];else{var p=d[f-15],g=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[f-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+o[f]+d[f],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),h=l,l=c,c=u,u=a+p|0,a=s,s=i,i=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),function(){var e=v,t=e.lib.WordArray,n=(r=e.algo).SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(r),e.HmacSHA224=n._createHmacHelper(r)}(),function(){function e(){return r.create.apply(r,arguments)}for(var t=v,n=t.lib.Hasher,r=(s=t.x64).Word,i=s.WordArray,s=t.algo,o=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=e();s=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=(h=this._hash.words)[0],r=h[1],i=h[2],s=h[3],u=h[4],c=h[5],l=h[6],h=h[7],f=n.high,d=n.low,p=r.high,g=r.low,v=i.high,y=i.low,m=s.high,w=s.low,b=u.high,S=u.low,E=c.high,_=c.low,C=l.high,x=l.low,A=h.high,F=h.low,k=f,I=d,T=p,D=g,N=v,P=y,R=m,H=w,O=b,B=S,j=E,V=_,L=C,M=x,K=A,U=F,q=0;80>q;q++){var z=a[q];if(16>q)var G=z.high=0|e[t+2*q],W=z.low=0|e[t+2*q+1];else{G=((W=(G=a[q-15]).high)>>>1|(Y=G.low)<<31)^(W>>>8|Y<<24)^W>>>7;var Y=(Y>>>1|W<<31)^(Y>>>8|W<<24)^(Y>>>7|W<<25),Z=((W=(Z=a[q-2]).high)>>>19|(J=Z.low)<<13)^(W<<3|J>>>29)^W>>>6,J=(J>>>19|W<<13)^(J<<3|W>>>29)^(J>>>6|W<<26),X=(W=a[q-7]).high,$=(Q=a[q-16]).high,Q=Q.low;G=(G=(G=G+X+((W=Y+W.low)>>>0<Y>>>0?1:0))+Z+((W+=J)>>>0<J>>>0?1:0))+$+((W+=Q)>>>0<Q>>>0?1:0),z.high=G,z.low=W}X=O&j^~O&L,Q=B&V^~B&M,z=k&T^k&N^T&N;var ee=I&D^I&P^D&P,te=(Y=(k>>>28|I<<4)^(k<<30|I>>>2)^(k<<25|I>>>7),Z=(I>>>28|k<<4)^(I<<30|k>>>2)^(I<<25|k>>>7),(J=o[q]).high),ne=J.low;$=K+((O>>>14|B<<18)^(O>>>18|B<<14)^(O<<23|B>>>9))+((J=U+((B>>>14|O<<18)^(B>>>18|O<<14)^(B<<23|O>>>9)))>>>0<U>>>0?1:0),K=L,U=M,L=j,M=V,j=O,V=B,O=R+($=($=($=$+X+((J+=Q)>>>0<Q>>>0?1:0))+te+((J+=ne)>>>0<ne>>>0?1:0))+G+((J+=W)>>>0<W>>>0?1:0))+((B=H+J|0)>>>0<H>>>0?1:0)|0,R=N,H=P,N=T,P=D,T=k,D=I,k=$+(z=Y+z+((W=Z+ee)>>>0<Z>>>0?1:0))+((I=J+W|0)>>>0<J>>>0?1:0)|0}d=n.low=d+I,n.high=f+k+(d>>>0<I>>>0?1:0),g=r.low=g+D,r.high=p+T+(g>>>0<D>>>0?1:0),y=i.low=y+P,i.high=v+N+(y>>>0<P>>>0?1:0),w=s.low=w+H,s.high=m+R+(w>>>0<H>>>0?1:0),S=u.low=S+B,u.high=b+O+(S>>>0<B>>>0?1:0),_=c.low=_+V,c.high=E+j+(_>>>0<V>>>0?1:0),x=l.low=x+M,l.high=C+L+(x>>>0<M>>>0?1:0),F=h.low=F+U,h.high=A+K+(F>>>0<U>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(s),t.HmacSHA512=n._createHmacHelper(s)}(),function(){var e=v,t=(i=e.x64).Word,n=i.WordArray,r=(i=e.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(i),e.HmacSHA384=r._createHmacHelper(i)}(),function(){var e=v,t=(r=e.lib).WordArray,n=r.Hasher,r=e.algo,i=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=t.create([0,1518500249,1859775393,2400959708,2840853838]),c=t.create([1352829926,1548603684,1836072691,2053994217,0]);r=r.RIPEMD160=n.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;16>n;n++){var r=e[S=t+n];e[S]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var l,h,f,d,p,g,v,y,m,w,b,S=this._hash.words,E=(r=u.words,c.words),_=i.words,C=s.words,x=o.words,A=a.words;for(g=l=S[0],v=h=S[1],y=f=S[2],m=d=S[3],w=p=S[4],n=0;80>n;n+=1)b=l+e[t+_[n]]|0,b=16>n?b+((h^f^d)+r[0]):32>n?b+((h&f|~h&d)+r[1]):48>n?b+(((h|~f)^d)+r[2]):64>n?b+((h&d|f&~d)+r[3]):b+((h^(f|~d))+r[4]),b=(b=(b|=0)<<x[n]|b>>>32-x[n])+p|0,l=p,p=d,d=f<<10|f>>>22,f=h,h=b,b=g+e[t+C[n]]|0,b=16>n?b+((v^(y|~m))+E[0]):32>n?b+((v&m|y&~m)+E[1]):48>n?b+(((v|~y)^m)+E[2]):64>n?b+((v&y|~v&m)+E[3]):b+((v^y^m)+E[4]),b=(b=(b|=0)<<A[n]|b>>>32-A[n])+w|0,g=w,w=m,m=y<<10|y>>>22,y=v,v=b;b=S[1]+f+m|0,S[1]=S[2]+d+w|0,S[2]=S[3]+p+g|0,S[3]=S[4]+l+v|0,S[4]=S[0]+h+y|0,S[0]=b},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;for(t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;5>n;n++)t[n]=16711935&((r=t[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.RIPEMD160=n._createHelper(r),e.HmacRIPEMD160=n._createHmacHelper(r)}(Math),function(){var e=v.enc.Utf8;v.algo.HMAC=v.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,u=o.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=v,n=(e=t.lib).Base,r=e.WordArray,i=(e=t.algo).HMAC,s=e.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,s=i.create(n.hasher,e),o=r.create(),a=r.create([1]),u=o.words,c=a.words,l=n.keySize;for(n=n.iterations;u.length<l;){var h=s.update(t).finalize(a);s.reset();for(var f=h.words,d=f.length,p=h,g=1;g<n;g++){p=s.finalize(p),s.reset();for(var v=p.words,y=0;y<d;y++)f[y]^=v[y]}o.concat(h),c[0]++}return o.sigBytes=4*l,o}});t.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)}}();var y,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function w(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=m.charAt(n>>6)+m.charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=m.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=m.charAt(n>>2)+m.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function b(e){var t,n,r,i="",s=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(r=m.indexOf(e.charAt(t)))<0||(0==s?(i+=F(r>>2),n=3&r,s=1):1==s?(i+=F(n<<2|r>>4),n=15&r,s=2):2==s?(i+=F(n),i+=F(r>>2),n=3&r,s=3):(i+=F(n<<2|r>>4),i+=F(15&r),s=0));return 1==s&&(i+=F(n<<2)),i}function S(e){var t,n=b(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function E(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):this.fromString(e,null==t&&"string"!=typeof e?256:t))}function _(){return new E(null)}"Microsoft Internet Explorer"==n.appName?(E.prototype.am=function(e,t,n,r,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*o;i=((u=o*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},y=30):"Netscape"!=n.appName?(E.prototype.am=function(e,t,n,r,i,s){for(;--s>=0;){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=67108863&o}return i},y=26):(E.prototype.am=function(e,t,n,r,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*o;i=((u=o*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},y=28),E.prototype.DB=y,E.prototype.DM=(1<<y)-1,E.prototype.DV=1<<y,E.prototype.FV=Math.pow(2,52),E.prototype.F1=52-y,E.prototype.F2=2*y-52;var C,x,A=new Array;for(C="0".charCodeAt(0),x=0;x<=9;++x)A[C++]=x;for(C="a".charCodeAt(0),x=10;x<36;++x)A[C++]=x;for(C="A".charCodeAt(0),x=10;x<36;++x)A[C++]=x;function F(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function k(e,t){var n=A[e.charCodeAt(t)];return null==n?-1:n}function I(e){var t=_();return t.fromInt(e),t}function T(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function D(e){this.m=e}function N(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function P(e,t){return e&t}function R(e,t){return e|t}function H(e,t){return e^t}function O(e,t){return e&~t}function B(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function j(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function V(){}function L(e){return e}function M(e){this.r2=_(),this.q3=_(),E.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}D.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},D.prototype.revert=function(e){return e},D.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},D.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},D.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},N.prototype.convert=function(e){var t=_();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(E.ZERO)>0&&this.m.subTo(t,t),t},N.prototype.revert=function(e){var t=_();return e.copyTo(t),this.reduce(t),t},N.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},N.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},N.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},E.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},E.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},E.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,s=0;--r>=0;){var o=8==n?255&e[r]:k(e,r);o<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&E.ZERO.subTo(this,this)},E.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},E.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},E.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},E.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|a,a=(this[n]&s)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},E.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}},E.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},E.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&E.ZERO.subTo(t,t)},E.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},E.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=_());var s=_(),o=this.s,a=e.s,u=this.DB-T(r[r.t-1]);u>0?(r.lShiftTo(u,s),i.lShiftTo(u,n)):(r.copyTo(s),i.copyTo(n));var c=s.t,l=s[c-1];if(0!=l){var h=l*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),f=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,g=n.t,v=g-c,y=null==t?_():t;for(s.dlShiftTo(v,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),E.ONE.dlShiftTo(c,y),y.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--v>=0;){var m=n[--g]==l?this.DM:Math.floor(n[g]*f+(n[g-1]+p)*d);if((n[g]+=s.am(0,m,n,v,0,c))<m)for(s.dlShiftTo(v,y),n.subTo(y,n);n[g]<--m;)n.subTo(y,n)}null!=t&&(n.drShiftTo(c,t),o!=a&&E.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),o<0&&E.ZERO.subTo(n,n)}}},E.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},E.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},E.prototype.exp=function(e,t){if(e>4294967295||e<1)return E.ONE;var n=_(),r=_(),i=t.convert(this),s=T(e)-1;for(i.copyTo(n);--s>=0;)if(t.sqrTo(n,r),(e&1<<s)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}return t.revert(n)},E.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this[o]>>a)>0&&(i=!0,s=F(n));o>=0;)a<t?(n=(this[o]&(1<<a)-1)<<t-a,n|=this[--o]>>(a+=this.DB-t)):(n=this[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=F(n));return i?s:"0"},E.prototype.negate=function(){var e=_();return E.ZERO.subTo(this,e),e},E.prototype.abs=function(){return this.s<0?this.negate():this},E.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},E.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)},E.prototype.mod=function(e){var t=_();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(E.ZERO)>0&&e.subTo(t,t),t},E.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new D(t):new N(t),this.exp(e,n)},E.ZERO=I(0),E.ONE=I(1),V.prototype.convert=L,V.prototype.revert=L,V.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},V.prototype.sqrTo=function(e,t){e.squareTo(t)},M.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=_();return e.copyTo(t),this.reduce(t),t},M.prototype.revert=function(e){return e},M.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},M.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},M.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var K,U,q,z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],G=(1<<26)/z[z.length-1];function W(){this.i=0,this.j=0,this.S=new Array}function Y(){!function(e){U[q++]^=255&e,U[q++]^=e>>8&255,U[q++]^=e>>16&255,U[q++]^=e>>24&255,q>=256&&(q-=256)}((new Date).getTime())}if(E.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},E.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=I(n),i=_(),s=_(),o="";for(this.divRemTo(r,i,s);i.signum()>0;)o=(n+s.intValue()).toString(e).substr(1)+o,i.divRemTo(r,i,s);return s.intValue().toString(e)+o},E.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,s=0,o=0,a=0;a<e.length;++a){var u=k(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(o=t*o+u,++s>=n&&(this.dMultiply(r),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&E.ZERO.subTo(this,this)},E.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(E.ONE.shiftLeft(e-1),R,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(E.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},E.prototype.bitwiseTo=function(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=s;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},E.prototype.changeBit=function(e,t){var n=E.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},E.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},E.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},E.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},E.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},E.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},E.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},E.prototype.millerRabin=function(e){var t=this.subtract(E.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>z.length&&(e=z.length);for(var i=_(),s=0;s<e;++s){i.fromInt(z[Math.floor(Math.random()*z.length)]);var o=i.modPow(r,this);if(0!=o.compareTo(E.ONE)&&0!=o.compareTo(t)){for(var a=1;a++<n&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(E.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},E.prototype.clone=function(){var e=_();return this.copyTo(e),e},E.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},E.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},E.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},E.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},E.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},E.prototype.equals=function(e){return 0==this.compareTo(e)},E.prototype.min=function(e){return this.compareTo(e)<0?this:e},E.prototype.max=function(e){return this.compareTo(e)>0?this:e},E.prototype.and=function(e){var t=_();return this.bitwiseTo(e,P,t),t},E.prototype.or=function(e){var t=_();return this.bitwiseTo(e,R,t),t},E.prototype.xor=function(e){var t=_();return this.bitwiseTo(e,H,t),t},E.prototype.andNot=function(e){var t=_();return this.bitwiseTo(e,O,t),t},E.prototype.not=function(){for(var e=_(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},E.prototype.shiftLeft=function(e){var t=_();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},E.prototype.shiftRight=function(e){var t=_();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},E.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+B(this[e]);return this.s<0?this.t*this.DB:-1},E.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=j(this[n]^t);return e},E.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},E.prototype.setBit=function(e){return this.changeBit(e,R)},E.prototype.clearBit=function(e){return this.changeBit(e,O)},E.prototype.flipBit=function(e){return this.changeBit(e,H)},E.prototype.add=function(e){var t=_();return this.addTo(e,t),t},E.prototype.subtract=function(e){var t=_();return this.subTo(e,t),t},E.prototype.multiply=function(e){var t=_();return this.multiplyTo(e,t),t},E.prototype.divide=function(e){var t=_();return this.divRemTo(e,t,null),t},E.prototype.remainder=function(e){var t=_();return this.divRemTo(e,null,t),t},E.prototype.divideAndRemainder=function(e){var t=_(),n=_();return this.divRemTo(e,t,n),new Array(t,n)},E.prototype.modPow=function(e,t){var n,r,i=e.bitLength(),s=I(1);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new D(t):t.isEven()?new M(t):new N(t);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=r.convert(this),n>1){var l=_();for(r.sqrTo(o[1],l);a<=c;)o[a]=_(),r.mulTo(l,o[a-2],o[a]),a+=2}var h,f,d=e.t-1,p=!0,g=_();for(i=T(e[d])-1;d>=0;){for(i>=u?h=e[d]>>i-u&c:(h=(e[d]&(1<<i+1)-1)<<u-i,d>0&&(h|=e[d-1]>>this.DB+i-u)),a=n;0==(1&h);)h>>=1,--a;if((i-=a)<0&&(i+=this.DB,--d),p)o[h].copyTo(s),p=!1;else{for(;a>1;)r.sqrTo(s,g),r.sqrTo(g,s),a-=2;a>0?r.sqrTo(s,g):(f=s,s=g,g=f),r.mulTo(g,o[h],s)}for(;d>=0&&0==(e[d]&1<<i);)r.sqrTo(s,g),f=s,s=g,g=f,--i<0&&(i=this.DB-1,--d)}return r.revert(s)},E.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return E.ZERO;for(var n=e.clone(),r=this.clone(),i=I(1),s=I(0),o=I(0),a=I(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(o,i),s.subTo(a,s)):(r.subTo(n,r),t&&o.subTo(i,o),a.subTo(s,a))}return 0!=r.compareTo(E.ONE)?E.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},E.prototype.pow=function(e){return this.exp(e,new V)},E.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n},E.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=z[z.length-1]){for(t=0;t<z.length;++t)if(n[0]==z[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<z.length;){for(var r=z[t],i=t+1;i<z.length&&r<G;)r*=z[i++];for(r=n.modInt(r);t<i;)if(r%z[t++]==0)return!1}return n.millerRabin(e)},E.prototype.square=function(){var e=_();return this.squareTo(e),e},W.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)r=this.S[t],this.S[t]=this.S[n=n+this.S[t]+e[t%e.length]&255],this.S[n]=r;this.i=0,this.j=0},W.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==U){var Z;if(U=new Array,q=0,void 0!==r&&(void 0!==r.crypto||void 0!==r.msCrypto)){var J=r.crypto||r.msCrypto;if(J.getRandomValues){var X=new Uint8Array(32);for(J.getRandomValues(X),Z=0;Z<32;++Z)U[q++]=X[Z]}else if("Netscape"==n.appName&&n.appVersion<"5"){var $=r.crypto.random(32);for(Z=0;Z<$.length;++Z)U[q++]=255&$.charCodeAt(Z)}}for(;q<256;)Z=Math.floor(65536*Math.random()),U[q++]=Z>>>8,U[q++]=255&Z;q=0,Y()}function Q(){if(null==K){for(Y(),(K=new W).init(U),q=0;q<U.length;++q)U[q]=0;q=0}return K.next()}function ee(){}function te(e,t){return new E(e,t)}function ne(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function re(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ie(e,t,n){for(var r="",i=0;r.length<t;)r+=n(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function se(e,t){this.x=t,this.q=e}function oe(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?E.ONE:r,this.zinv=null}function ae(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new oe(this,null,null)}ee.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=Q()},re.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},re.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=te(e,16),this.e=parseInt(t,16)}},re.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var s=new ee,o=new Array;t>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new E(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},re.prototype.encryptOAEP=function(e,t,n){var r=function(e,t,n,r){var i=ce.crypto.MessageDigest,s=ce.crypto.Util,o=null;if(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(e){return _e(s.hashHex(Ce(e),o))}),e.length+2*r+2>t)throw"Message too long for RSA";var a,u="";for(a=0;a<t-e.length-2*r-2;a+=1)u+="\0";var c=n("")+u+"\x01"+e,l=new Array(r);(new ee).nextBytes(l);var h=ne(l,c.length,n),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^h.charCodeAt(a);var d=ne(f,l.length,n),p=[0];for(a=0;a<l.length;a+=1)p[a+1]=l[a]^d.charCodeAt(a);return new E(p.concat(f))}(e,this.n.bitLength()+7>>3,t,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},re.prototype.type="RSA",re.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)},re.prototype.setPrivate=function(e,t,n){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=n;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=te(e,16),this.e=parseInt(t,16),this.d=te(n,16)}},re.prototype.setPrivateEx=function(e,t,n,r,i,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=te(e,16),this.e=parseInt(t,16),this.d=te(n,16),this.p=te(r,16),this.q=te(i,16),this.dmp1=te(s,16),this.dmq1=te(o,16),this.coeff=te(a,16)},re.prototype.generate=function(e,t){var n=new ee,r=e>>1;this.e=parseInt(t,16);for(var i=new E(t,16);;){for(;this.p=new E(e-r,1,n),0!=this.p.subtract(E.ONE).gcd(i).compareTo(E.ONE)||!this.p.isProbablePrime(10););for(;this.q=new E(r,1,n),0!=this.q.subtract(E.ONE).gcd(i).compareTo(E.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(E.ONE),a=this.q.subtract(E.ONE),u=o.multiply(a);if(0==u.gcd(i).compareTo(E.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(u),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},re.prototype.decrypt=function(e){var t=te(e,16),n=this.doPrivate(t);return null==n?null:function(e,t){for(var n=e.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=255&n[r];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&s)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}(n,this.n.bitLength()+7>>3)},re.prototype.decryptOAEP=function(e,t,n){var r=te(e,16),i=this.doPrivate(r);return null==i?null:function(e,t,n,r){var i=ce.crypto.MessageDigest,s=ce.crypto.Util,o=null;for(n||(n="sha1"),"string"==typeof n&&(o=i.getCanonicalAlgName(n),r=i.getHashLength(o),n=function(e){return _e(s.hashHex(Ce(e),o))}),e=e.toByteArray(),a=0;a<e.length;a+=1)e[a]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*r+2)throw"Cipher too short";var a,u=e.substr(1,r),c=e.substr(r+1),l=ie(c,r,n),h=[];for(a=0;a<u.length;a+=1)h[a]=u.charCodeAt(a)^l.charCodeAt(a);var f=ie(String.fromCharCode.apply(String,h),e.length-r,n),d=[];for(a=0;a<c.length;a+=1)d[a]=c.charCodeAt(a)^f.charCodeAt(a);if((d=String.fromCharCode.apply(String,d)).substr(0,r)!==n(""))throw"Hash mismatch";var p=(d=d.substr(r)).indexOf("\x01");if((-1!=p?d.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return d.substr(p+1)}(i,this.n.bitLength()+7>>3,t,n)},se.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},se.prototype.toBigInteger=function(){return this.x},se.prototype.negate=function(){return new se(this.q,this.x.negate().mod(this.q))},se.prototype.add=function(e){return new se(this.q,this.x.add(e.toBigInteger()).mod(this.q))},se.prototype.subtract=function(e){return new se(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},se.prototype.multiply=function(e){return new se(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},se.prototype.square=function(){return new se(this.q,this.x.square().mod(this.q))},se.prototype.divide=function(e){return new se(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},oe.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(E.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(E.ZERO))},oe.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(E.ZERO)&&!this.y.toBigInteger().equals(E.ZERO)},oe.prototype.negate=function(){return new oe(this.curve,this.x,this.y.negate(),this.z)},oe.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(E.ZERO.equals(n))return E.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new E("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),a=o.multiply(n),u=i.multiply(o),c=t.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(e.z).subtract(a).multiply(n).mod(this.curve.q),h=u.multiply(r).multiply(t).subtract(s.multiply(a)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(h),f)},oe.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new E("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=t.square().multiply(e);E.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},oe.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new E("3")),i=this.negate(),s=this;for(t=r.bitLength()-2;t>0;--t){s=s.twice();var o=r.testBit(t);o!=n.testBit(t)&&(s=s.add(o?this:i))}return s},oe.prototype.multiplyTwo=function(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(s):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i},ae.prototype.getQ=function(){return this.q},ae.prototype.getA=function(){return this.a},ae.prototype.getB=function(){return this.b},ae.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ae.prototype.getInfinity=function(){return this.infinity},ae.prototype.fromBigInteger=function(e){return new se(this.q,e)},ae.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new oe(this,this.fromBigInteger(new E(n,16)),this.fromBigInteger(new E(r,16)));default:return null}},se.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},oe.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i},oe.decodeFrom=function(e,t){var n=t.length-1,r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new E(r),o=new E(i);return new oe(e,e.fromBigInteger(s),e.fromBigInteger(o))},oe.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),s=new E(r,16),o=new E(i,16);return new oe(e,e.fromBigInteger(s),e.fromBigInteger(o))},oe.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),r=n.square().subtract(this.x).subtract(e.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new oe(this.curve,r,i)},oe.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(E.valueOf(2)),t=this.curve.fromBigInteger(E.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new oe(this.curve,r,i)},oe.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new E("3")),i=this.negate(),s=this;for(t=r.bitLength()-2;t>0;--t){s=s.twice();var o=r.testBit(t);o!=n.testBit(t)&&(s=s.add2D(o?this:i))}return s},oe.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=t.multiply(t).mod(i),o=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return s.equals(o)},oe.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},oe.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(E.ONE)<0||t.compareTo(e.subtract(E.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(E.ONE)<0||n.compareTo(e.subtract(E.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ue=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(e,t,r){return t?n[t]:String.fromCharCode(parseInt(r,16))}var i=new String(""),s=Object.hasOwnProperty;return function(n,o){var a,u,c=n.match(e),l=c[0],h=!1;"{"===l?a={}:"["===l?a=[]:(a=[],h=!0);for(var f=[a],d=1-h,p=c.length;d<p;++d){var g;switch((l=c[d]).charCodeAt(0)){default:(g=f[0])[u||g.length]=+l,u=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(t,r)),g=f[0],!u){if(!(g instanceof Array)){u=l||i;break}u=g.length}g[u]=l,u=void 0;break;case 91:f.unshift((g=f[0])[u||g.length]=[]),u=void 0;break;case 93:f.shift();break;case 102:(g=f[0])[u||g.length]=!1,u=void 0;break;case 110:(g=f[0])[u||g.length]=null,u=void 0;break;case 116:(g=f[0])[u||g.length]=!0,u=void 0;break;case 123:f.unshift((g=f[0])[u||g.length]={}),u=void 0;break;case 125:f.shift()}}if(h){if(1!==f.length)throw new Error;a=a[0]}else if(f.length)throw new Error;if(o){a=function e(t,n){var r=t[n];if(r&&"object"==typeof r){var i=null;for(var a in r)if(s.call(r,a)&&r!==t){var u=e(r,a);void 0!==u?r[a]=u:(i||(i=[]),i.push(a))}if(i)for(var c=i.length;--c>=0;)delete r[i[c]]}return o.call(t,n,r)}({"":a},"")}return a}}();void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),ce.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";t=new E(r,16).xor(e).add(E.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return ke(e,t)},this.newObject=function(e){var t=ce.asn1,n=t.DERBoolean,r=t.DERInteger,i=t.DERBitString,s=t.DEROctetString,o=t.DERNull,a=t.DERObjectIdentifier,u=t.DEREnumerated,c=t.DERUTF8String,l=t.DERNumericString,h=t.DERPrintableString,f=t.DERTeletexString,d=t.DERIA5String,p=t.DERUTCTime,g=t.DERGeneralizedTime,v=t.DERSequence,y=t.DERSet,m=t.DERTaggedObject,w=t.ASN1Util.newObject,b=Object.keys(e);if(1!=b.length)throw"key of param shall be only one.";var S=b[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+S+":"))throw"undefined key: "+S;if("bool"==S)return new n(e[S]);if("int"==S)return new r(e[S]);if("bitstr"==S)return new i(e[S]);if("octstr"==S)return new s(e[S]);if("null"==S)return new o(e[S]);if("oid"==S)return new a(e[S]);if("enum"==S)return new u(e[S]);if("utf8str"==S)return new c(e[S]);if("numstr"==S)return new l(e[S]);if("prnstr"==S)return new h(e[S]);if("telstr"==S)return new f(e[S]);if("ia5str"==S)return new d(e[S]);if("utctime"==S)return new p(e[S]);if("gentime"==S)return new g(e[S]);if("seq"==S){for(var E=e[S],_=[],C=0;C<E.length;C++){var x=w(E[C]);_.push(x)}return new v({array:_})}if("set"==S){for(E=e[S],_=[],C=0;C<E.length;C++)x=w(E[C]),_.push(x);return new y({array:_})}if("tag"==S){var A=e[S];if("[object Array]"===Object.prototype.toString.call(A)&&3==A.length){var F=w(A[2]);return new m({tag:A[0],explicit:A[1],obj:F})}var k={};if(void 0!==A.explicit&&(k.explicit=A.explicit),void 0!==A.tag&&(k.tag=A.tag),void 0===A.obj)throw"obj shall be specified for 'tag'.";return k.obj=w(A.obj),new m(k)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ce.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),i=2;i<e.length;i+=2){var s=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(t=t+"."+new E(r,2).toString(10),r="")}return t},ce.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new E(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=t(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);return r},ce.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},ce.asn1.DERAbstractString=function(e){ce.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=Se(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},i.lang.extend(ce.asn1.DERAbstractString,ce.asn1.ASN1Object),ce.asn1.DERAbstractTime=function(e){ce.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),s=String(i.getFullYear());"utc"==t&&(s=s.substr(2,2));var o=s+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var u=r(String(a),3);o=o+"."+(u=u.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ve(e)},this.setByDateValue=function(e,t,n,r,i,s){var o=new Date(Date.UTC(e,t-1,n,r,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},i.lang.extend(ce.asn1.DERAbstractTime,ce.asn1.ASN1Object),ce.asn1.DERAbstractStructured=function(e){ce.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},i.lang.extend(ce.asn1.DERAbstractStructured,ce.asn1.ASN1Object),ce.asn1.DERBoolean=function(){ce.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},i.lang.extend(ce.asn1.DERBoolean,ce.asn1.ASN1Object),ce.asn1.DERInteger=function(e){ce.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ce.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new E(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},i.lang.extend(ce.asn1.DERInteger,ce.asn1.ASN1Object),ce.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ce.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}ce.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var i=e.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)t+=1==e[n]?"1":"0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},i.lang.extend(ce.asn1.DERBitString,ce.asn1.ASN1Object),ce.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ce.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}ce.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},i.lang.extend(ce.asn1.DEROctetString,ce.asn1.DERAbstractString),ce.asn1.DERNull=function(){ce.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},i.lang.extend(ce.asn1.DERNull,ce.asn1.ASN1Object),ce.asn1.DERObjectIdentifier=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new E(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var a=r.substr(o,7);o!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};ce.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),s=40*parseInt(i[0])+parseInt(i[1]);r+=t(s),i.splice(0,2);for(var o=0;o<i.length;o++)r+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=ce.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},i.lang.extend(ce.asn1.DERObjectIdentifier,ce.asn1.ASN1Object),ce.asn1.DEREnumerated=function(e){ce.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ce.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new E(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},i.lang.extend(ce.asn1.DEREnumerated,ce.asn1.ASN1Object),ce.asn1.DERUTF8String=function(e){ce.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},i.lang.extend(ce.asn1.DERUTF8String,ce.asn1.DERAbstractString),ce.asn1.DERNumericString=function(e){ce.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},i.lang.extend(ce.asn1.DERNumericString,ce.asn1.DERAbstractString),ce.asn1.DERPrintableString=function(e){ce.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},i.lang.extend(ce.asn1.DERPrintableString,ce.asn1.DERAbstractString),ce.asn1.DERTeletexString=function(e){ce.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},i.lang.extend(ce.asn1.DERTeletexString,ce.asn1.DERAbstractString),ce.asn1.DERIA5String=function(e){ce.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},i.lang.extend(ce.asn1.DERIA5String,ce.asn1.DERAbstractString),ce.asn1.DERUTCTime=function(e){ce.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=ve(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=ve(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},i.lang.extend(ce.asn1.DERUTCTime,ce.asn1.DERAbstractTime),ce.asn1.DERGeneralizedTime=function(e){ce.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ve(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ve(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},i.lang.extend(ce.asn1.DERGeneralizedTime,ce.asn1.DERAbstractTime),ce.asn1.DERSequence=function(e){ce.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},i.lang.extend(ce.asn1.DERSequence,ce.asn1.DERAbstractStructured),ce.asn1.DERSet=function(e){ce.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++)e.push(this.asn1Array[t].getEncodedHex());return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},i.lang.extend(ce.asn1.DERSet,ce.asn1.DERAbstractStructured),ce.asn1.DERTaggedObject=function(e){ce.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},i.lang.extend(ce.asn1.DERTaggedObject,ce.asn1.ASN1Object);var ce,le,he,fe=new function(){};function de(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function pe(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function ge(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function ve(e){return ge(de(e))}function ye(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function me(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function we(e){return e.length%2==1&&(e="0"+e),ye(w(e))}function be(e){return b(me(e))}function Se(e){return Ne(Be(e))}function Ee(e){return decodeURIComponent(Pe(e))}function _e(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function Ce(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function xe(e){return w(e)}function Ae(e){return xe(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Fe(e){return b(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function ke(e,t){return"-----BEGIN "+t+"-----\r\n"+Ae(e)+"\r\n-----END "+t+"-----\r\n"}function Ie(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Fe(e=void 0!==t?(e=e.replace("-----BEGIN "+t+"-----","")).replace("-----END "+t+"-----",""):(e=e.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function Te(e){var t,n,r,i,s,o,a,u,c,l,h;if(h=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=h[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(h[2])-1,r=parseInt(h[3]),i=parseInt(h[4]),s=parseInt(h[5]),o=parseInt(h[6]),a=0,""!==(c=h[7])&&(l=(c.substr(1)+"00").substr(0,3),a=parseInt(l)),Date.UTC(t,n,r,i,s,o,a);throw"unsupported zulu format: "+e}function De(e){return~~(Te(e)/1e3)}function Ne(e){return e.replace(/%/g,"")}function Pe(e){return e.replace(/(..)/g,"%$1")}function Re(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2),i=(e=e.replace("::",r)).split(":");if(8!=i.length)throw t;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function He(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)t[n]=t[n].replace(/^0+/,""),""==t[n]&&(t[n]="0");var r=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===r)return e.slice(1,-1);var i="";for(n=0;n<r.length;n++)r[n].length>i.length&&(i=r[n]);return(e=e.replace(i,"::")).slice(1,-1)}function Oe(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?He(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function Be(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+ve(t[r]);return n}function je(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function Ve(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}}fe.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},fe.getL=function(e,t){var n=fe.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},fe.getVblen=function(e,t){var n;return""==(n=fe.getL(e,t))?-1:("8"===n.substr(0,1)?new E(n.substr(2),16):new E(n,16)).intValue()},fe.getVidx=function(e,t){var n=fe.getLblen(e,t);return n<0?n:t+2*(n+1)},fe.getV=function(e,t){var n=fe.getVidx(e,t),r=fe.getVblen(e,t);return e.substr(n,2*r)},fe.getTLV=function(e,t){return e.substr(t,2)+fe.getL(e,t)+fe.getV(e,t)},fe.getNextSiblingIdx=function(e,t){return fe.getVidx(e,t)+2*fe.getVblen(e,t)},fe.getChildIdx=function(e,t){var n=fe,r=new Array,i=n.getVidx(e,t);"03"==e.substr(t,2)?r.push(i+2):r.push(i);for(var s=n.getVblen(e,t),o=i,a=0;;){var u=n.getNextSiblingIdx(e,o);if(null==u||u-i>=2*s)break;if(a>=200)break;r.push(u),o=u,a++}return r},fe.getNthChildIdx=function(e,t,n){return fe.getChildIdx(e,t)[n]},fe.getIdxbyList=function(e,t,n,r){var i,s,o=fe;if(0==n.length){if(void 0!==r&&e.substr(t,2)!==r)throw"checking tag doesn't match: "+e.substr(t,2)+"!="+r;return t}return i=n.shift(),s=o.getChildIdx(e,t),o.getIdxbyList(e,s[i],n,r)},fe.getTLVbyList=function(e,t,n,r){var i=fe,s=i.getIdxbyList(e,t,n);if(void 0===s)throw"can't find nthList object";if(void 0!==r&&e.substr(s,2)!=r)throw"checking tag doesn't match: "+e.substr(s,2)+"!="+r;return i.getTLV(e,s)},fe.getVbyList=function(e,t,n,r,i){var s,o,a=fe;if(void 0===(s=a.getIdxbyList(e,t,n,r)))throw"can't find nthList object";return o=a.getV(e,s),!0===i&&(o=o.substr(2)),o},fe.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=e.substr(2),o=[],a=0;a<s.length/2;a++)o.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<o.length;a++)128&o[a]?c+=t((127&o[a]).toString(2),7):(c+=t((127&o[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=n.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},fe.dump=function(e,t,n,r){var i=fe,s=i.getV,o=i.dump,a=i.getChildIdx,u=e;e instanceof ce.asn1.ASN1Object&&(u=e.getEncodedHex());var c=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var l=t.ommit_long_octet;if("01"==u.substr(n,2))return"00"==(h=s(u,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==u.substr(n,2))return r+"INTEGER "+c(h=s(u,n),l)+"\n";if("03"==u.substr(n,2))return r+"BITSTRING "+c(h=s(u,n),l)+"\n";if("04"==u.substr(n,2)){var h=s(u,n);return i.isASN1HEX(h)?(E=r+"OCTETSTRING, encapsulates\n")+o(h,t,0,r+"  "):r+"OCTETSTRING "+c(h,l)+"\n"}if("05"==u.substr(n,2))return r+"NULL\n";if("06"==u.substr(n,2)){var f=s(u,n),d=ce.asn1.ASN1Util.oidHexToInt(f),p=ce.asn1.x509.OID.oid2name(d),g=d.replace(/\./g," ");return""!=p?r+"ObjectIdentifier "+p+" ("+g+")\n":r+"ObjectIdentifier ("+g+")\n"}if("0c"==u.substr(n,2))return r+"UTF8String '"+Ee(s(u,n))+"'\n";if("13"==u.substr(n,2))return r+"PrintableString '"+Ee(s(u,n))+"'\n";if("14"==u.substr(n,2))return r+"TeletexString '"+Ee(s(u,n))+"'\n";if("16"==u.substr(n,2))return r+"IA5String '"+Ee(s(u,n))+"'\n";if("17"==u.substr(n,2))return r+"UTCTime "+Ee(s(u,n))+"\n";if("18"==u.substr(n,2))return r+"GeneralizedTime "+Ee(s(u,n))+"\n";if("30"==u.substr(n,2)){if("3000"==u.substr(n,4))return r+"SEQUENCE {}\n";E=r+"SEQUENCE\n";var v=t;if((2==(w=a(u,n)).length||3==w.length)&&"06"==u.substr(w[0],2)&&"04"==u.substr(w[w.length-1],2)){p=i.oidname(s(u,w[0]));var y=JSON.parse(JSON.stringify(t));y.x509ExtName=p,v=y}for(var m=0;m<w.length;m++)E+=o(u,v,w[m],r+"  ");return E}if("31"==u.substr(n,2)){E=r+"SET\n";var w=a(u,n);for(m=0;m<w.length;m++)E+=o(u,t,w[m],r+"  ");return E}var b=parseInt(u.substr(n,2),16);if(0!=(128&b)){var S=31&b;if(0!=(32&b)){var E=r+"["+S+"]\n";for(w=a(u,n),m=0;m<w.length;m++)E+=o(u,t,w[m],r+"  ");return E}return"68747470"==(h=s(u,n)).substr(0,8)&&(h=Ee(h)),"subjectAltName"===t.x509ExtName&&2==S&&(h=Ee(h)),r+"["+S+"] "+h+"\n"}return r+"UNKNOWN("+u.substr(n,2)+") "+s(u,n)+"\n"},fe.isASN1HEX=function(e){var t=fe;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),i=t.getL(e,0);return e.length-r.length-i.length==2*n},fe.oidname=function(e){var t=ce.asn1;ce.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.x509&&ce.asn1.x509||(ce.asn1.x509={}),ce.asn1.x509.Certificate=function(e){ce.asn1.x509.Certificate.superclass.constructor.call(this);var t=ce.asn1,n=t.DERSequence,r=t.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var e=new ce.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});e.init(this.prvKey),e.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=e.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(e){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=e,this.asn1Sig=new r({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+Ae(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==e&&(void 0!==e.tbscertobj&&(this.asn1TBSCert=e.tbscertobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},i.lang.extend(ce.asn1.x509.Certificate,ce.asn1.ASN1Object),ce.asn1.x509.TBSCertificate=function(e){ce.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=ce.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERTaggedObject,s=t.x509,o=s.Time,a=s.X500Name,u=s.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new i({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(e){this.asn1SerialNumber=new r(e)},this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new s.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new a(e)},this.setNotBeforeByParam=function(e){this.asn1NotBefore=new o(e)},this.setNotAfterByParam=function(e){this.asn1NotAfter=new o(e)},this.setSubjectByParam=function(e){this.asn1Subject=new a(e)},this.setSubjectPublicKey=function(e){this.asn1SubjPKey=new u(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=Le.getKey(e);this.asn1SubjPKey=new u(t)},this.appendExtension=function(e){this.extensionsArray.push(e)},this.appendExtensionByName=function(e,t){ce.asn1.x509.Extension.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var e=new n({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(e),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new n({array:this.extensionsArray}),r=new i({explicit:!0,tag:"a3",obj:t});this.asn1Array.push(r)}var s=new n({array:this.asn1Array});return this.hTLV=s.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},i.lang.extend(ce.asn1.x509.TBSCertificate,ce.asn1.ASN1Object),ce.asn1.x509.Extension=function(e){ce.asn1.x509.Extension.superclass.constructor.call(this);var t=ce.asn1,n=t.DERObjectIdentifier,r=t.DEROctetString,i=t.DERBoolean,s=t.DERSequence;this.getEncodedHex=function(){var e=new n({oid:this.oid}),t=new r({hex:this.getExtnValueHex()}),o=new Array;return o.push(e),this.critical&&o.push(new i),o.push(t),new s({array:o}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},i.lang.extend(ce.asn1.x509.Extension,ce.asn1.ASN1Object),ce.asn1.x509.Extension.appendByNameToArray=function(e,t,n){var r=e.toLowerCase(),i=ce.asn1.x509;if("basicconstraints"==r){var s=new i.BasicConstraints(t);n.push(s)}else if("keyusage"==r)s=new i.KeyUsage(t),n.push(s);else if("crldistributionpoints"==r)s=new i.CRLDistributionPoints(t),n.push(s);else if("extkeyusage"==r)s=new i.ExtKeyUsage(t),n.push(s);else if("authoritykeyidentifier"==r)s=new i.AuthorityKeyIdentifier(t),n.push(s);else if("authorityinfoaccess"==r)s=new i.AuthorityInfoAccess(t),n.push(s);else if("subjectaltname"==r)s=new i.SubjectAltName(t),n.push(s);else{if("issueraltname"!=r)throw"unsupported extension name: "+e;s=new i.IssuerAltName(t),n.push(s)}},ce.asn1.x509.KeyUsage=function(e){ce.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=ze.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new ce.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var n=e.names,r="000000000",i=0;i<n.length;i++)for(var s=0;s<t.length;s++)n[i]===t[s]&&(r=r.substring(0,s)+"1"+r.substring(s+1,r.length));this.asn1ExtnValue=new ce.asn1.DERBitString({bin:r})}},i.lang.extend(ce.asn1.x509.KeyUsage,ce.asn1.x509.Extension),ce.asn1.x509.BasicConstraints=function(e){ce.asn1.x509.BasicConstraints.superclass.constructor.call(this,e),this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new ce.asn1.DERBoolean),this.pathLen>-1&&e.push(new ce.asn1.DERInteger({int:this.pathLen}));var t=new ce.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},i.lang.extend(ce.asn1.x509.BasicConstraints,ce.asn1.x509.Extension),ce.asn1.x509.CRLDistributionPoints=function(e){ce.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=ce.asn1,n=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){this.asn1ExtnValue=new t.DERSequence({array:e})},this.setByOneURI=function(e){var t=new n.GeneralNames([{uri:e}]),r=new n.DistributionPointName(t),i=new n.DistributionPoint({dpobj:r});this.setByDPArray([i])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},i.lang.extend(ce.asn1.x509.CRLDistributionPoints,ce.asn1.x509.Extension),ce.asn1.x509.ExtKeyUsage=function(e){ce.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=ce.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var n=0;n<e.length;n++){var r=new t.DERObjectIdentifier(e[n]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},i.lang.extend(ce.asn1.x509.ExtKeyUsage,ce.asn1.x509.Extension),ce.asn1.x509.AuthorityKeyIdentifier=function(e){ce.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=ce.asn1,n=t.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var r=new t.DERSequence({array:e});return this.asn1ExtnValue=r,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){this.asn1KID=new ce.asn1.DEROctetString(e)},this.setCertIssuerByParam=function(e){this.asn1CertIssuer=new ce.asn1.x509.X500Name(e)},this.setCertSNByParam=function(e){this.asn1CertSN=new ce.asn1.DERInteger(e)},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn))},i.lang.extend(ce.asn1.x509.AuthorityKeyIdentifier,ce.asn1.x509.Extension),ce.asn1.x509.AuthorityInfoAccess=function(e){ce.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,n=ce.asn1,r=n.DERSequence,i=0;i<e.length;i++){var s=new r({array:[new n.DERObjectIdentifier(e[i].accessMethod),new n.x509.GeneralName(e[i].accessLocation)]});t.push(s)}this.asn1ExtnValue=new r({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},i.lang.extend(ce.asn1.x509.AuthorityInfoAccess,ce.asn1.x509.Extension),ce.asn1.x509.SubjectAltName=function(e){ce.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new ce.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},i.lang.extend(ce.asn1.x509.SubjectAltName,ce.asn1.x509.Extension),ce.asn1.x509.IssuerAltName=function(e){ce.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new ce.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},i.lang.extend(ce.asn1.x509.IssuerAltName,ce.asn1.x509.Extension),ce.asn1.x509.CRL=function(e){ce.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new ce.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new ce.asn1.DERBitString({hex:"00"+this.hexSig});var e=new ce.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+Ae(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==e&&(void 0!==e.tbsobj&&(this.asn1TBSCertList=e.tbsobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},i.lang.extend(ce.asn1.x509.CRL,ce.asn1.ASN1Object),ce.asn1.x509.TBSCertList=function(e){ce.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=ce.asn1,n=t.DERSequence,r=t.x509,i=r.Time;this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new r.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new r.X500Name(e)},this.setThisUpdateByParam=function(e){this.asn1ThisUpdate=new i(e)},this.setNextUpdateByParam=function(e){this.asn1NextUpdate=new i(e)},this.addRevokedCert=function(e,t){var n={};null!=e&&null!=e&&(n.sn=e),null!=t&&null!=t&&(n.time=t);var i=new r.CRLEntry(n);this.aRevokedCert.push(i)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var e=new n({array:this.aRevokedCert});this.asn1Array.push(e)}var t=new n({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},i.lang.extend(ce.asn1.x509.TBSCertList,ce.asn1.ASN1Object),ce.asn1.x509.CRLEntry=function(e){ce.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=ce.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},i.lang.extend(ce.asn1.x509.CRLEntry,ce.asn1.ASN1Object),ce.asn1.x509.X500Name=function(e){ce.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var t,n=ce.asn1,r=n.x509,i=Ie;this.setByString=function(e){var t=e.split("/");t.shift();for(var n=[],i=0;i<t.length;i++)if(t[i].match(/^[^=]+=.+$/))n.push(t[i]);else{var s=n.length-1;n[s]=n[s]+"/"+t[i]}for(i=0;i<n.length;i++)this.asn1Array.push(new r.RDN({str:n[i]}))},this.setByLdapString=function(e){var t=r.X500Name.ldapToOneline(e);this.setByString(t)},this.setByObject=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=new ce.asn1.x509.RDN({str:t+"="+e[t]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new n.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):"object"==typeof e&&this.setByObject(e),void 0!==e.certissuer&&((t=new ze).hex=i(e.certissuer),this.hTLV=t.getIssuerHex()),void 0!==e.certsubject&&((t=new ze).hex=i(e.certsubject),this.hTLV=t.getSubjectHex()))},i.lang.extend(ce.asn1.x509.X500Name,ce.asn1.ASN1Object),ce.asn1.x509.X500Name.onelineToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map((function(e){return e.replace(/,/,"\\,")}))).join(",")},ce.asn1.x509.X500Name.ldapToOneline=function(e){for(var t=e.split(","),n=!1,r=[],i=0;t.length>0;i++){var s=t.shift();if(!0===n){var o=(r.pop()+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}return(r=r.map((function(e){return e.replace("/","\\/")}))).reverse(),"/"+r.join("/")},ce.asn1.x509.RDN=function(e){ce.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(e){this.asn1Array.push(new ce.asn1.x509.AttributeTypeAndValue({str:e}))},this.addByMultiValuedString=function(e){for(var t=ce.asn1.x509.RDN.parseString(e),n=0;n<t.length;n++)this.addByString(t[n])},this.getEncodedHex=function(){var e=new ce.asn1.DERSet({array:this.asn1Array});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.addByMultiValuedString(e.str)},i.lang.extend(ce.asn1.x509.RDN,ce.asn1.ASN1Object),ce.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),n=!1,r=[],i=0;t.length>0;i++){var s=t.shift();if(!0===n){var o=(r.pop()+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);"\\"===s.substr(-1,1)&&(n=!0)}var a=!1,u=[];for(i=0;r.length>0;i++){if(s=r.shift(),!0===a){var c=u.pop();s.match(/"$/)?(o=(c+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2"),u.push(o),a=!1):u.push(c+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},ce.asn1.x509.AttributeTypeAndValue=function(e){ce.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var t=ce.asn1;this.setByString=function(e){var t=e.match(/^([^=]+)=(.+)$/);if(!t)throw"malformed attrTypeAndValueStr: "+e;this.setByAttrTypeAndValueStr(t[1],t[2])},this.setByAttrTypeAndValueStr=function(e,t){this.typeObj=ce.asn1.x509.OID.atype2obj(e);var n="utf8";"C"==e&&(n="prn"),this.valueObj=this.getValueObj(n,t)},this.getValueObj=function(e,n){if("utf8"==e)return new t.DERUTF8String({str:n});if("prn"==e)return new t.DERPrintableString({str:n});if("tel"==e)return new t.DERTeletexString({str:n});if("ia5"==e)return new t.DERIA5String({str:n});throw"unsupported directory string type: type="+e+" value="+n},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.setByString(e.str)},i.lang.extend(ce.asn1.x509.AttributeTypeAndValue,ce.asn1.ASN1Object),ce.asn1.x509.SubjectPublicKeyInfo=function(e){ce.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=ce.asn1,n=t.DERInteger,r=t.DERBitString,i=t.DERObjectIdentifier,s=t.DERSequence,o=t.ASN1Util.newObject,a=t.x509.AlgorithmIdentifier;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new s({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this.setPubKey=function(e){try{if(e instanceof re){var t=o({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).getEncodedHex();this.asn1AlgId=new a({name:"rsaEncryption"}),this.asn1SubjPKey=new r({hex:"00"+t})}}catch(e){}try{if(e instanceof ce.crypto.ECDSA){var s=new i({name:e.curveName});this.asn1AlgId=new a({name:"ecPublicKey",asn1params:s}),this.asn1SubjPKey=new r({hex:"00"+e.pubKeyHex})}}catch(e){}try{if(e instanceof ce.crypto.DSA){s=new o({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}),this.asn1AlgId=new a({name:"dsa",asn1params:s});var u=new n({bigint:e.y});this.asn1SubjPKey=new r({hex:"00"+u.getEncodedHex()})}}catch(e){}},void 0!==e&&this.setPubKey(e)},i.lang.extend(ce.asn1.x509.SubjectPublicKeyInfo,ce.asn1.ASN1Object),ce.asn1.x509.Time=function(e){ce.asn1.x509.Time.superclass.constructor.call(this);var t=ce.asn1,n=t.DERUTCTime,r=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new n(this.timeParams):new r(this.timeParams):"utc"==this.type?new n:new r,this.TLV=e.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},i.lang.extend(ce.asn1.x509.Time,ce.asn1.ASN1Object),ce.asn1.x509.AlgorithmIdentifier=function(e){ce.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=ce.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var e=[this.asn1Alg];null!==this.asn1Params&&e.push(this.asn1Params);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},i.lang.extend(ce.asn1.x509.AlgorithmIdentifier,ce.asn1.ASN1Object),ce.asn1.x509.GeneralName=function(e){ce.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},n=ce.asn1,r=n.DEROctetString,i=n.DERIA5String,s=n.DERTaggedObject,o=n.ASN1Object,a=n.x509.X500Name,u=Ie;this.explicit=!1,this.setByParam=function(e){var n=null;if(void 0!==e){if(void 0!==e.rfc822&&(this.type="rfc822",n=new i({str:e[this.type]})),void 0!==e.dns&&(this.type="dns",n=new i({str:e[this.type]})),void 0!==e.uri&&(this.type="uri",n=new i({str:e[this.type]})),void 0!==e.dn&&(this.type="dn",this.explicit=!0,n=new a({str:e.dn})),void 0!==e.ldapdn&&(this.type="dn",this.explicit=!0,n=new a({ldapstr:e.ldapdn})),void 0!==e.certissuer){this.type="dn",this.explicit=!0;var c=null;if((h=e.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(c=u(h)),null==c)throw"certissuer param not cert";(f=new ze).hex=c;var l=f.getIssuerHex();(n=new o).hTLV=l}if(void 0!==e.certsubj){var h,f;if(this.type="dn",this.explicit=!0,c=null,(h=e.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=h.indexOf("-----BEGIN ")&&(c=u(h)),null==c)throw"certsubj param not cert";(f=new ze).hex=c,l=f.getSubjectHex(),(n=new o).hTLV=l}if(void 0!==e.ip){this.type="ip",this.explicit=!1;var d,p=e.ip,g="malformed IP address";if(p.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(d=Ve("["+p.split(".").join(",")+"]")).length)throw g}else if(p.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))d=Re(p);else{if(!p.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw g;d=p}n=new r({hex:d})}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new s({explicit:this.explicit,tag:t[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},i.lang.extend(ce.asn1.x509.GeneralName,ce.asn1.ASN1Object),ce.asn1.x509.GeneralNames=function(e){ce.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=ce.asn1;this.setByParamArray=function(e){for(var n=0;n<e.length;n++){var r=new t.x509.GeneralName(e[n]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new t.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},i.lang.extend(ce.asn1.x509.GeneralNames,ce.asn1.ASN1Object),ce.asn1.x509.DistributionPointName=function(e){ce.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=ce.asn1,n=t.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e){if(!t.x509.GeneralNames.prototype.isPrototypeOf(e))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=e}},i.lang.extend(ce.asn1.x509.DistributionPointName,ce.asn1.ASN1Object),ce.asn1.x509.DistributionPoint=function(e){ce.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=ce.asn1;this.getEncodedHex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var n=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(n)}return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.dpobj&&(this.asn1DP=e.dpobj)},i.lang.extend(ce.asn1.x509.DistributionPoint,ce.asn1.ASN1Object),ce.asn1.x509.OID=new function(e){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=new ce.asn1.DERObjectIdentifier({oid:this.name2oidList[e]});return this.objCache[e]=t,t},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.atype2oidList[e])throw"AttributeType name undefined: "+e;var t=new ce.asn1.DERObjectIdentifier({oid:this.atype2oidList[e]});return this.objCache[e]=t,t}},ce.asn1.x509.OID.oid2name=function(e){var t=ce.asn1.x509.OID.name2oidList;for(var n in t)if(t[n]==e)return n;return""},ce.asn1.x509.OID.oid2atype=function(e){var t=ce.asn1.x509.OID.atype2oidList;for(var n in t)if(t[n]==e)return n;return e},ce.asn1.x509.OID.name2oid=function(e){var t=ce.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},ce.asn1.x509.X509Util={},ce.asn1.x509.X509Util.newCertPEM=function(e){var t=ce.asn1.x509,n=t.Certificate,r=new(0,t.TBSCertificate);if(void 0===e.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(e.serial),"string"!=typeof e.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(e.sigalg),void 0===e.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(e.issuer),void 0===e.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(e.notbefore),void 0===e.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(e.notafter),void 0===e.subject)throw"subject name undefined.";if(r.setSubjectByParam(e.subject),void 0===e.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var i=0;i<e.ext.length;i++)for(key in e.ext[i])r.appendExtensionByName(key,e.ext[i][key]);if(void 0===e.cakey&&void 0===e.sighex)throw"param cakey and sighex undefined.";var s=null;return e.cakey&&(s=new n({tbscertobj:r,prvkeyobj:!0===e.cakey.isPrivate?e.cakey:Le.getKey.apply(null,e.cakey)})).sign(),e.sighex&&(s=new n({tbscertobj:r})).setSignatureHex(e.sighex),s.getPEMString()},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.cms&&ce.asn1.cms||(ce.asn1.cms={}),ce.asn1.cms.Attribute=function(e){var t=ce.asn1;t.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var e,n,r;e=new t.DERObjectIdentifier({oid:this.attrTypeOid}),n=new t.DERSet({array:this.valueList});try{n.getEncodedHex()}catch(e){throw"fail valueSet.getEncodedHex in Attribute(1)/"+e}r=new t.DERSequence({array:[e,n]});try{this.hTLV=r.getEncodedHex()}catch(e){throw"failed seq.getEncodedHex in Attribute(2)/"+e}return this.hTLV}},i.lang.extend(ce.asn1.cms.Attribute,ce.asn1.ASN1Object),ce.asn1.cms.ContentType=function(e){var t=ce.asn1;t.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var n=null;void 0!==e&&(n=new t.DERObjectIdentifier(e),this.valueList=[n])},i.lang.extend(ce.asn1.cms.ContentType,ce.asn1.cms.Attribute),ce.asn1.cms.MessageDigest=function(e){var t=ce,n=t.asn1,r=n.DEROctetString,i=n.cms;if(i.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==e)if(e.eciObj instanceof i.EncapsulatedContentInfo&&"string"==typeof e.hashAlg)(s=new r({hex:t.crypto.Util.hashHex(e.eciObj.eContentValueHex,e.hashAlg)})).getEncodedHex(),this.valueList=[s];else{var s;(s=new r(e)).getEncodedHex(),this.valueList=[s]}},i.lang.extend(ce.asn1.cms.MessageDigest,ce.asn1.cms.Attribute),ce.asn1.cms.SigningTime=function(e){var t=ce.asn1;if(t.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==e){var n=new t.x509.Time(e);try{n.getEncodedHex()}catch(e){throw"SigningTime.getEncodedHex() failed/"+e}this.valueList=[n]}},i.lang.extend(ce.asn1.cms.SigningTime,ce.asn1.cms.Attribute),ce.asn1.cms.SigningCertificate=function(e){var t=ce,n=t.asn1,r=n.DERSequence,i=n.cms;i.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(e){for(var s=[],o=0;o<e.length;o++){var a=Ie(e[o]),u=t.crypto.Util.hashHex(a,"sha1"),c=new n.DEROctetString({hex:u});c.getEncodedHex();var l=new i.IssuerAndSerialNumber({cert:e[o]});l.getEncodedHex();var h=new r({array:[c,l]});h.getEncodedHex(),s.push(h)}var f=new r({array:s});f.getEncodedHex(),this.valueList=[f]},void 0!==e&&"object"==typeof e.array&&this.setCerts(e.array)},i.lang.extend(ce.asn1.cms.SigningCertificate,ce.asn1.cms.Attribute),ce.asn1.cms.SigningCertificateV2=function(e){var t=ce.asn1,n=t.DERSequence,r=t.x509,i=t.cms,s=ce.crypto;if(i.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(e,o){for(var a=[],u=0;u<e.length;u++){var c=Ie(e[u]),l=[];"sha256"!==o&&l.push(new r.AlgorithmIdentifier({name:o}));var h=s.Util.hashHex(c,o),f=new t.DEROctetString({hex:h});f.getEncodedHex(),l.push(f);var d=new i.IssuerAndSerialNumber({cert:e[u]});d.getEncodedHex(),l.push(d);var p=new n({array:l});p.getEncodedHex(),a.push(p)}var g=new n({array:a});g.getEncodedHex(),this.valueList=[g]},void 0!==e&&"object"==typeof e.array){var o="sha256";"string"==typeof e.hashAlg&&(o=e.hashAlg),this.setCerts(e.array,o)}},i.lang.extend(ce.asn1.cms.SigningCertificateV2,ce.asn1.cms.Attribute),ce.asn1.cms.IssuerAndSerialNumber=function(e){var t=ce.asn1,n=t.DERInteger,r=t.x509.X500Name,i=ze;t.cms.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=Ie(e),s=new i;s.hex=t;var o=s.getIssuerHex();this.dIssuer=new r,this.dIssuer.hTLV=o;var a=s.getSerialNumberHex();this.dSerial=new n({hex:a})},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(this.dIssuer=e.issuer instanceof r?e.issuer:new r(e.issuer),this.dSerial=e.serial instanceof n?e.serial:new n(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},i.lang.extend(ce.asn1.cms.IssuerAndSerialNumber,ce.asn1.ASN1Object),ce.asn1.cms.AttributeList=function(e){var t=ce.asn1,n=t.cms;n.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(e){e instanceof n.Attribute&&this.list.push(e)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},i.lang.extend(ce.asn1.cms.AttributeList,ce.asn1.ASN1Object),ce.asn1.cms.SignerInfo=function(e){var t=ce.asn1,n=t.DERTaggedObject,r=t.cms,i=r.AttributeList,s=r.ContentType,o=r.EncapsulatedContentInfo,a=r.MessageDigest,u=r.SignedData,c=t.x509.AlgorithmIdentifier,l=ce.crypto,h=Le;r.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new t.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new i,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new i,this.setSignerIdentifier=function(e){"string"==typeof e&&-1!=e.indexOf("CERTIFICATE")&&-1!=e.indexOf("BEGIN")&&-1!=e.indexOf("END")&&(this.dSignerIdentifier=new r.IssuerAndSerialNumber({cert:e}))},this.setForContentAndHash=function(e){void 0!==e&&(e.eciObj instanceof o&&(this.dSignedAttrs.add(new s({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new a({eciObj:e.eciObj,hashAlg:e.hashAlg}))),void 0!==e.sdObj&&e.sdObj instanceof u&&-1==e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)&&e.sdObj.digestAlgNameList.push(e.hashAlg),"string"==typeof e.hashAlg&&(this.dDigestAlgorithm=new c({name:e.hashAlg})))},this.sign=function(e,n){this.dSigAlg=new c({name:n});var r=this.dSignedAttrs.getEncodedHex(),i=h.getKey(e),s=new l.Signature({alg:n});s.init(i),s.updateHex(r);var o=s.sign();this.dSig=new t.DEROctetString({hex:o})},this.addUnsigned=function(e){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(e)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof i&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var e=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),r=null;this.dUnsignedAttrs.length()>0&&(r=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var s=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];null!=r&&s.push(r);var o=new t.DERSequence({array:s});return this.hTLV=o.getEncodedHex(),this.hTLV}},i.lang.extend(ce.asn1.cms.SignerInfo,ce.asn1.ASN1Object),ce.asn1.cms.EncapsulatedContentInfo=function(e){var t=ce.asn1,n=t.DERTaggedObject,r=t.DERSequence,i=t.DERObjectIdentifier,s=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new i({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(e){this.dEContentType=e.match(/^[0-2][.][0-9.]+$/)?new i({oid:e}):new i({name:e})},this.setContentValue=function(e){void 0!==e&&("string"==typeof e.hex?this.eContentValueHex=e.hex:"string"==typeof e.str&&(this.eContentValueHex=Se(e.str)))},this.setContentValueHex=function(e){this.eContentValueHex=e},this.setContentValueStr=function(e){this.eContentValueHex=Se(e)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var e=new s({hex:this.eContentValueHex});this.dEContent=new n({obj:e,tag:"a0",explicit:!0});var t=[this.dEContentType];this.isDetached||t.push(this.dEContent);var i=new r({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV}},i.lang.extend(ce.asn1.cms.EncapsulatedContentInfo,ce.asn1.ASN1Object),ce.asn1.cms.ContentInfo=function(e){var t=ce.asn1,n=t.DERTaggedObject,r=t.DERSequence,i=t.x509;ce.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(e){"string"==typeof e&&(this.dContentType=i.OID.name2obj(e))},this.getEncodedHex=function(){var e=new n({obj:this.dContent,tag:"a0",explicit:!0}),t=new r({array:[this.dContentType,e]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(e.type&&this.setContentType(e.type),e.obj&&e.obj instanceof t.ASN1Object&&(this.dContent=e.obj))},i.lang.extend(ce.asn1.cms.ContentInfo,ce.asn1.ASN1Object),ce.asn1.cms.SignedData=function(e){var t=ce.asn1,n=t.ASN1Object,r=t.DERInteger,i=t.DERSet,s=t.DERSequence,o=t.DERTaggedObject,a=t.cms,u=a.EncapsulatedContentInfo,c=a.SignerInfo,l=a.ContentInfo,h=t.x509.AlgorithmIdentifier;ce.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new u,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new c],this.addCertificatesByPEM=function(e){var t=Ie(e),r=new n;r.hTLV=t,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var e=[],t=0;t<this.digestAlgNameList.length;t++){var n=new h({name:this.digestAlgNameList[t]});e.push(n)}this.dDigestAlgs=new i({array:e})}var r=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var a=new i({array:this.certificateList});this.dCerts=new o({obj:a,tag:"a0",explicit:!1})}null!=this.dCerts&&r.push(this.dCerts);var u=new i({array:this.signerInfoList});r.push(u);var c=new s({array:r});return this.hTLV=c.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new l({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return ke(this.getContentInfoEncodedHex(),"CMS")}},i.lang.extend(ce.asn1.cms.SignedData,ce.asn1.ASN1Object),ce.asn1.cms.CMSUtil=new function(){},ce.asn1.cms.CMSUtil.newSignedData=function(e){var t=ce.asn1,n=t.cms,r=n.SignerInfo,i=n.SigningTime,s=n.SigningCertificate,o=n.SigningCertificateV2,a=t.cades.SignaturePolicyIdentifier,u=new(0,n.SignedData);if(u.dEncapContentInfo.setContentValue(e.content),"object"==typeof e.certs)for(var c=0;c<e.certs.length;c++)u.addCertificatesByPEM(e.certs[c]);for(u.signerInfoList=[],c=0;c<e.signerInfos.length;c++){var l=e.signerInfos[c],h=new r;for(attrName in h.setSignerIdentifier(l.signerCert),h.setForContentAndHash({sdObj:u,eciObj:u.dEncapContentInfo,hashAlg:l.hashAlg}),l.sAttr){var f=l.sAttr[attrName];if("SigningTime"==attrName){var d=new i(f);h.dSignedAttrs.add(d)}"SigningCertificate"==attrName&&(d=new s(f),h.dSignedAttrs.add(d)),"SigningCertificateV2"==attrName&&(d=new o(f),h.dSignedAttrs.add(d)),"SignaturePolicyIdentifier"==attrName&&(d=new a(f),h.dSignedAttrs.add(d))}h.sign(l.signerPrvKey,l.sigAlg),u.signerInfoList.push(h)}return u},ce.asn1.cms.CMSUtil.verifySignedData=function(e){var t=fe.getVbyList,n=fe.getTLVbyList,r=fe.getIdxbyList,i=fe.getChildIdx,s=fe.getTLV,o=fe.oidname,a=ce.crypto.Util.hashHex;void 0===e.cms&&(0,ce.lang.String.isHex)(e.cms);var u=e.cms,c=function(e,s){var a=s.idx;s.signerid_issuer1=n(e,a,[1,0],"30"),s.signerid_serial1=t(e,a,[1,1],"02"),s.hashalg=o(t(e,a,[2,0],"06"));var u=r(e,a,[3],"a0");s.idxSignedAttrs=u,l(e,s,u);var c=i(e,a).length;if(c<6)throw"malformed SignerInfo";s.sigalg=o(t(e,a,[c-2,0],"06")),s.sigval=t(e,a,[c-1],"04")},l=function(e,n,r){var s=i(e,r);n.signedAttrIdxList=s;for(var o=0;o<s.length;o++){var a,u=s[o],c=t(e,u,[0],"06");"2a864886f70d010905"===c?(a=Ee(t(e,u,[1,0])),n.saSigningTime=a):"2a864886f70d010904"===c&&(a=t(e,u,[1,0],"04"),n.saMessageDigest=a)}},h=function(e,t,n,r){n.verifyDetail={};var o=n.verifyDetail,u=t.parse.econtent,c=n.hashalg,l=n.saMessageDigest;o.validMessageDigest=!1,a(u,c)===l&&(o.validMessageDigest=!0),function(e,t,n,r){var o,a=t.parse.certsIdx;if(void 0===t.certs){o=[],t.certkeys=[];for(var u=i(e,a),c=0;c<u.length;c++){var l=s(e,u[c]),h=new ze;h.readCertHex(l),o[c]=h,t.certkeys[c]=h.getPublicKey()}t.certs=o}else o=t.certs;for(t.cccc=o.length,t.cccci=u.length,c=0;c<o.length;c++){var f=h.getIssuerHex(),d=h.getSerialNumberHex();n.signerid_issuer1===f&&n.signerid_serial1===d&&(n.certkey_idx=c)}}(e,t,n),o.validSignatureValue=!1;var h=n.sigalg,f="31"+s(e,n.idxSignedAttrs).substr(2);n.signedattrshex=f;var d=t.certs[n.certkey_idx].getPublicKey(),p=new ce.crypto.Signature({alg:h});p.init(d),p.updateHex(f);var g=p.verify(n.sigval);o.validSignatureValue_isValid=g,!0===g&&(o.validSignatureValue=!0),n.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(n.isValid=!0)},f={isValid:!1,parse:{}};return function(e,n){if("2a864886f70d010702"!==t(e,0,[0],"06"))return n;n.cmsType="signedData",n.econtent=t(e,0,[1,0,2,1,0]),function(e,t){for(var n,i=3;i<6;i++)if(void 0!==(n=r(e,0,[1,0,i]))){var s=e.substr(n,2);"a0"===s&&(t.certsIdx=n),"a1"===s&&(t.revinfosIdx=n),"31"===s&&(t.signerinfosIdx=n)}}(e,n),n.signerInfos=[],function(e,t){var n=t.signerinfosIdx;if(void 0!==n){var r=i(e,n);t.signerInfoIdxList=r;for(var s=0;s<r.length;s++){var o={idx:r[s]};c(e,o),t.signerInfos.push(o)}}}(e,n)}(u,f.parse),function(e,t){for(var n=t.parse.signerInfos,r=n.length,i=!0,s=0;s<r;s++){var o=n[s];h(e,t,o),o.isValid||(i=!1)}t.isValid=i}(u,f),f},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.tsp&&ce.asn1.tsp||(ce.asn1.tsp={}),ce.asn1.tsp.Accuracy=function(e){var t=ce.asn1,n=t.DERInteger,r=t.DERSequence,i=t.DERTaggedObject;t.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var e=null,t=null,s=null,o=[];if(null!=this.seconds&&(e=new n({int:this.seconds}),o.push(e)),null!=this.millis){var a=new n({int:this.millis});t=new i({obj:a,tag:"80",explicit:!1}),o.push(t)}if(null!=this.micros){var u=new n({int:this.micros});s=new i({obj:u,tag:"81",explicit:!1}),o.push(s)}var c=new r({array:o});return this.hTLV=c.getEncodedHex(),this.hTLV},void 0!==e&&("number"==typeof e.seconds&&(this.seconds=e.seconds),"number"==typeof e.millis&&(this.millis=e.millis),"number"==typeof e.micros&&(this.micros=e.micros))},i.lang.extend(ce.asn1.tsp.Accuracy,ce.asn1.ASN1Object),ce.asn1.tsp.MessageImprint=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new n({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==e&&("string"==typeof e.hashAlg&&(this.dHashAlg=new i({name:e.hashAlg})),"string"==typeof e.hashValue&&(this.dHashValue=new r({hex:e.hashValue})))},i.lang.extend(ce.asn1.tsp.MessageImprint,ce.asn1.ASN1Object),ce.asn1.tsp.TimeStampReq=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERBoolean,s=t.DERObjectIdentifier,o=t.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(e){e instanceof a?this.dMessageImprint=e:"object"==typeof e&&(this.dMessageImprint=new a(e))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var e=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&e.push(this.dPolicy),null!=this.dNonce&&e.push(this.dNonce),this.certReq&&e.push(new i);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.mi&&this.setMessageImprint(e.mi),"object"==typeof e.policy&&(this.dPolicy=new s(e.policy)),"object"==typeof e.nonce&&(this.dNonce=new r(e.nonce)),"boolean"==typeof e.certreq&&(this.certReq=e.certreq))},i.lang.extend(ce.asn1.tsp.TimeStampReq,ce.asn1.ASN1Object),ce.asn1.tsp.TSTInfo=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DERInteger,i=t.DERBoolean,s=t.DERGeneralizedTime,o=t.DERObjectIdentifier,a=t.tsp,u=a.MessageImprint,c=a.Accuracy,l=t.x509.X500Name;if(a.TSTInfo.superclass.constructor.call(this),this.dVersion=new r({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(e.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(e.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(e.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new u(e.messageImprint)),void 0!==e.serialNumber&&(this.dSerialNumber=new r(e.serialNumber)),void 0!==e.genTime&&(this.dGenTime=new s(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new c(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new i),void 0!==e.nonce&&(this.dNonce=new r(e.nonce)),void 0!==e.tsa&&(this.dTsa=new l(e.tsa))}},i.lang.extend(ce.asn1.tsp.TSTInfo,ce.asn1.ASN1Object),ce.asn1.tsp.TimeStampResp=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ASN1Object,i=t.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dTST&&e.push(this.dTST);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new s(e.status)),void 0!==e.tst&&e.tst instanceof r&&(this.dTST=e.tst.getContentInfo()))},i.lang.extend(ce.asn1.tsp.TimeStampResp,ce.asn1.ASN1Object),ce.asn1.tsp.PKIStatusInfo=function(e){var t=ce.asn1,n=t.DERSequence,r=t.tsp,i=r.PKIStatus,s=r.PKIFreeText,o=r.PKIFailureInfo;r.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dStatusString&&e.push(this.dStatusString),null!=this.dFailureInfo&&e.push(this.dFailureInfo);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new i(e.status)),"object"==typeof e.statstr&&(this.dStatusString=new s({array:e.statstr})),"object"==typeof e.failinfo&&(this.dFailureInfo=new o(e.failinfo)))},i.lang.extend(ce.asn1.tsp.PKIStatusInfo,ce.asn1.ASN1Object),ce.asn1.tsp.PKIStatus=function(e){var t=ce.asn1,n=t.DERInteger,r=t.tsp,i=r.PKIStatus;if(r.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==e)if(void 0!==e.name){var s=i.valueList;if(void 0===s[e.name])throw"name undefined: "+e.name;this.dStatus=new n({int:s[e.name]})}else this.dStatus=new n(e)},i.lang.extend(ce.asn1.tsp.PKIStatus,ce.asn1.ASN1Object),ce.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},ce.asn1.tsp.PKIFreeText=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DERUTF8String;t.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var e=[],t=0;t<this.textList.length;t++)e.push(new r({str:this.textList[t]}));var i=new n({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==e&&"object"==typeof e.array&&(this.textList=e.array)},i.lang.extend(ce.asn1.tsp.PKIFreeText,ce.asn1.ASN1Object),ce.asn1.tsp.PKIFailureInfo=function(e){var t=ce.asn1,n=t.DERBitString,r=t.tsp.PKIFailureInfo;if(r.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var e=new Number(this.value).toString(2),t=new n;return t.setByBinaryString(e),this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e)if("string"==typeof e.name){var i=r.valueList;if(void 0===i[e.name])throw"name undefined: "+e.name;this.value=i[e.name]}else"number"==typeof e.int&&(this.value=e.int)},i.lang.extend(ce.asn1.tsp.PKIFailureInfo,ce.asn1.ASN1Object),ce.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},ce.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},ce.asn1.tsp.SimpleTSAAdapter=function(e){var t=ce.asn1.tsp,n=ce.crypto.Util.hashHex;t.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,r){var i=n(e,r);this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},this.params.tstInfo.serialNumber={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:s},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.tsp.SimpleTSAAdapter,ce.asn1.tsp.AbstractTSAAdapter),ce.asn1.tsp.FixedTSAAdapter=function(e){var t=ce.asn1.tsp,n=ce.crypto.Util.hashHex;t.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,r){var i=n(e,r);return this.params.tstInfo.messageImprint={hashAlg:r,hashValue:i},t.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},i.lang.extend(ce.asn1.tsp.FixedTSAAdapter,ce.asn1.tsp.AbstractTSAAdapter),ce.asn1.tsp.TSPUtil=new function(){},ce.asn1.tsp.TSPUtil.newTimeStampToken=function(e){var t=ce.asn1,n=t.cms,r=t.tsp.TSTInfo,i=new n.SignedData,s=new r(e.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:s}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof e.certs)for(var o=0;o<e.certs.length;o++)i.addCertificatesByPEM(e.certs[o]);var a=i.signerInfoList[0];a.setSignerIdentifier(e.signerCert),a.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:e.hashAlg});var u=new n.SigningCertificate({array:[e.signerCert]});return a.dSignedAttrs.add(u),a.sign(e.signerPrvKey,e.sigAlg),i},ce.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=fe,n=t.getV,r=t.getTLV,i={certreq:!1},s=(0,t.getChildIdx)(e,0);if(s.length<2)throw"TimeStampReq must have at least 2 items";var o=r(e,s[1]);i.mi=ce.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var a=2;a<s.length;a++){var u=s[a],c=e.substr(u,2);if("06"==c){var l=n(e,u);i.policy=t.hextooidstr(l)}"02"==c&&(i.nonce=n(e,u)),"01"==c&&(i.certreq=!0)}return i},ce.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=fe,n=t.getChildIdx,r=t.getV,i=t.getIdxbyList,s={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";n(e,0);var o=r(e,i(e,0,[0,0])),a=t.hextooidstr(o),u=ce.asn1.x509.OID.oid2name(a);if(""==u)throw"hashAlg name undefined: "+a;var c=u,l=i(e,0,[1]);return s.hashAlg=c,s.hashValue=r(e,l),s},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.cades&&ce.asn1.cades||(ce.asn1.cades={}),ce.asn1.cades.SignaturePolicyIdentifier=function(e){var t=ce.asn1,n=t.DERObjectIdentifier,r=t.DERSequence,i=t.cades,s=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==e&&"string"==typeof e.oid&&"object"==typeof e.hash){var o=new r({array:[new n({oid:e.oid}),new s(e.hash)]});this.valueList=[o]}},i.lang.extend(ce.asn1.cades.SignaturePolicyIdentifier,ce.asn1.cms.Attribute),ce.asn1.cades.OtherHashAlgAndValue=function(e){var t=ce.asn1,n=t.DERSequence,r=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var e=new n({array:[this.dAlg,this.dHash]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&"string"==typeof e.alg&&"string"==typeof e.hash&&(this.dAlg=new i({name:e.alg}),this.dHash=new r({hex:e.hash}))},i.lang.extend(ce.asn1.cades.OtherHashAlgAndValue,ce.asn1.ASN1Object),ce.asn1.cades.SignatureTimeStamp=function(e){var t=ce.asn1,n=t.ASN1Object;if(t.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==e){if(void 0!==e.res)if("string"==typeof e.res&&e.res.match(/^[0-9A-Fa-f]+$/));else if(!(e.res instanceof n))throw"res param shall be ASN1Object or hex string";if(void 0!==e.tst)if("string"==typeof e.tst&&e.tst.match(/^[0-9A-Fa-f]+$/)){var r=new n;this.tstHex=e.tst,r.hTLV=this.tstHex,r.getEncodedHex(),this.valueList=[r]}else if(!(e.tst instanceof n))throw"tst param shall be ASN1Object or hex string"}},i.lang.extend(ce.asn1.cades.SignatureTimeStamp,ce.asn1.cms.Attribute),ce.asn1.cades.CompleteCertificateRefs=function(e){var t=ce.asn1.cades;t.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(e){this.valueList=[];for(var n=0;n<e.length;n++){var r=new t.OtherCertID(e[n]);this.valueList.push(r)}},void 0!==e&&"object"==typeof e&&"number"==typeof e.length&&this.setByArray(e)},i.lang.extend(ce.asn1.cades.CompleteCertificateRefs,ce.asn1.cms.Attribute),ce.asn1.cades.OtherCertID=function(e){var t=ce.asn1,n=t.cms,r=t.cades;r.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(e){this.dOtherCertHash=new r.OtherHash(e),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(e))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var e=[this.dOtherCertHash];null!=this.dIssuerSerial&&e.push(this.dIssuerSerial);var n=new t.DERSequence({array:e});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),"object"==typeof e&&(!1===e.hasis&&(this.hasIssuerSerial=!1),"string"==typeof e.cert&&this.setByCertPEM(e.cert)))},i.lang.extend(ce.asn1.cades.OtherCertID,ce.asn1.ASN1Object),ce.asn1.cades.OtherHash=function(e){var t=ce.asn1,n=t.cades,r=n.OtherHashAlgAndValue,i=ce.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(e){if(-1==e.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var t=Ie(e),n=i(t,this.alg);this.dOtherHash=new r({alg:this.alg,hash:n})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==e)if("string"==typeof e)if(-1!=e.indexOf("-----BEGIN "))this.setByCertPEM(e);else{if(!e.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new t.DEROctetString({hex:e})}else"object"==typeof e&&("string"==typeof e.cert?("string"==typeof e.alg&&(this.alg=e.alg),this.setByCertPEM(e.cert)):this.dOtherHash=new r(e))},i.lang.extend(ce.asn1.cades.OtherHash,ce.asn1.ASN1Object),ce.asn1.cades.CAdESUtil=new function(){},ce.asn1.cades.CAdESUtil.addSigTS=function(e,t,n){},ce.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=fe.getChildIdx,n=fe.getTLV,r=fe.getIdxbyList,i=ce.asn1,s=i.ASN1Object,o=i.cms.SignedData,a=i.cades.CAdESUtil,u={};if("06092a864886f70d010702"!=(0,fe.getTLVbyList)(e,0,[0]))throw"hex is not CMS SignedData";var c=t(e,r(e,0,[1,0]));if(c.length<4)throw"num of SignedData elem shall be 4 at least";var l=c.shift();u.version=n(e,l);var h=c.shift();u.algs=n(e,h);var f=c.shift();u.encapcontent=n(e,f),u.certs=null,u.revs=null,u.si=[];var d=c.shift();"a0"==e.substr(d,2)&&(u.certs=n(e,d),d=c.shift()),"a1"==e.substr(d,2)&&(u.revs=n(e,d),d=c.shift());var p=d;if("31"!=e.substr(p,2))throw"Can't find signerInfos";for(var g=t(e,p),v=0;v<g.length;v++){var y=a.parseSignerInfoForAddingUnsigned(e,g[v],v);u.si[v]=y}var m=null;for(u.obj=new o,(m=new s).hTLV=u.version,u.obj.dCMSVersion=m,(m=new s).hTLV=u.algs,u.obj.dDigestAlgs=m,(m=new s).hTLV=u.encapcontent,u.obj.dEncapContentInfo=m,(m=new s).hTLV=u.certs,u.obj.dCerts=m,u.obj.signerInfoList=[],v=0;v<u.si.length;v++)u.obj.signerInfoList.push(u.si[v].obj);return u},ce.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,n){var r=fe.getTLV,i=fe.getV,s=ce.asn1,o=s.ASN1Object,a=s.cms,u=a.AttributeList,c=a.SignerInfo,l={},h=(0,fe.getChildIdx)(e,t);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var f=h.shift();l.version=r(e,f);var d=h.shift();l.si=r(e,d);var p=h.shift();l.digalg=r(e,p);var g=h.shift();l.sattrs=r(e,g);var v=h.shift();l.sigalg=r(e,v);var y=h.shift();l.sig=r(e,y),l.sigval=i(e,y);var m=null;return l.obj=new c,(m=new o).hTLV=l.version,l.obj.dCMSVersion=m,(m=new o).hTLV=l.si,l.obj.dSignerIdentifier=m,(m=new o).hTLV=l.digalg,l.obj.dDigestAlgorithm=m,(m=new o).hTLV=l.sattrs,l.obj.dSignedAttrs=m,(m=new o).hTLV=l.sigalg,l.obj.dSigAlg=m,(m=new o).hTLV=l.sig,l.obj.dSig=m,l.obj.dUnsignedAttrs=new u,l},void 0!==ce.asn1.csr&&ce.asn1.csr||(ce.asn1.csr={}),ce.asn1.csr.CertificationRequest=function(e){var t=ce,n=t.asn1,r=n.DERBitString,i=n.DERSequence,s=n.x509;n.csr.CertificationRequest.superclass.constructor.call(this),this.sign=function(e,n){null==this.prvKey&&(this.prvKey=n),this.asn1SignatureAlg=new s.AlgorithmIdentifier({name:e}),sig=new t.crypto.Signature({alg:e}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new r({hex:"00"+this.hexSig});var o=new i({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=o.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return ke(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==e&&void 0!==e.csrinfo&&(this.asn1CSRInfo=e.csrinfo)},i.lang.extend(ce.asn1.csr.CertificationRequest,ce.asn1.ASN1Object),ce.asn1.csr.CertificationRequestInfo=function(e){var t=ce.asn1,n=t.DERInteger,r=t.DERSequence,i=t.DERSet,s=t.DERNull,o=t.DERTaggedObject,a=t.DERObjectIdentifier,u=t.x509,c=u.X500Name,l=u.Extension,h=Le;t.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new n({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(e){this.asn1Subject=new c(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=h.getKey(e);this.asn1SubjPKey=new u.SubjectPublicKeyInfo(t)},this.appendExtensionByName=function(e,t){l.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new r({array:this.extensionsArray}),t=new i({array:[e]}),n=new r({array:[new a({oid:"1.2.840.113549.1.9.14"}),t]}),u=new o({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(u)}else u=new o({explicit:!1,tag:"a0",obj:new s}),this.asn1Array.push(u);var c=new r({array:this.asn1Array});return this.hTLV=c.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},i.lang.extend(ce.asn1.csr.CertificationRequestInfo,ce.asn1.ASN1Object),ce.asn1.csr.CSRUtil=new function(){},ce.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=Le,n=ce.asn1.csr;if(void 0===e.subject)throw"parameter subject undefined";if(void 0===e.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===e.sigalg)throw"parameter sigalg undefined";if(void 0===e.sbjprvkey)throw"parameter sbjpubkey undefined";var r=new n.CertificationRequestInfo;if(r.setSubjectByParam(e.subject),r.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var i=0;i<e.ext.length;i++)for(key in e.ext[i])r.appendExtensionByName(key,e.ext[i][key]);var s=new n.CertificationRequest({csrinfo:r}),o=t.getKey(e.sbjprvkey);return s.sign(e.sigalg,o),s.getPEMString()},ce.asn1.csr.CSRUtil.getInfo=function(e){var t=fe.getTLVbyList,n={subject:{},pubkey:{}};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var r=Ie(e,"CERTIFICATE REQUEST");return n.subject.hex=t(r,0,[0,1]),n.subject.name=ze.hex2dn(n.subject.hex),n.pubkey.hex=t(r,0,[0,2]),n.pubkey.obj=Le.getKey(n.pubkey.hex,null,"pkcs8pub"),n},void 0!==ce&&ce||(ce={}),void 0!==ce.asn1&&ce.asn1||(ce.asn1={}),void 0!==ce.asn1.ocsp&&ce.asn1.ocsp||(ce.asn1.ocsp={}),ce.asn1.ocsp.DEFAULT_HASH="sha1",ce.asn1.ocsp.CertID=function(e){var t=ce.asn1,n=t.DEROctetString,r=t.DERInteger,i=t.DERSequence,s=t.x509.AlgorithmIdentifier,o=t.ocsp,a=o.DEFAULT_HASH,u=ce.crypto.Util.hashHex,c=ze,l=fe;if(o.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(e,t,i,o){void 0===o&&(o=a),this.dHashAlg=new s({name:o}),this.dIssuerNameHash=new n({hex:e}),this.dIssuerKeyHash=new n({hex:t}),this.dSerialNumber=new r({hex:i})},this.setByCert=function(e,t,n){void 0===n&&(n=a);var r=new c;r.readCertPEM(t);var i=new c;i.readCertPEM(e);var s=i.getPublicKeyHex(),o=l.getTLVbyList(s,0,[1,0],"30"),h=r.getSerialNumberHex(),f=u(i.getSubjectHex(),n),d=u(o,n);this.setByValue(f,d,h,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var e=new i({array:[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e){var h=e;if(void 0!==h.issuerCert&&void 0!==h.subjectCert){var f=a;void 0===h.alg&&(f=void 0),this.setByCert(h.issuerCert,h.subjectCert,f)}else{if(void 0===h.namehash||void 0===h.keyhash||void 0===h.serial)throw"invalid constructor arguments";f=a,void 0===h.alg&&(f=void 0),this.setByValue(h.namehash,h.keyhash,h.serial,f)}}},i.lang.extend(ce.asn1.ocsp.CertID,ce.asn1.ASN1Object),ce.asn1.ocsp.Request=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){var i=new r.CertID(e);this.dReqCert=i}},i.lang.extend(ce.asn1.ocsp.Request,ce.asn1.ASN1Object),ce.asn1.ocsp.TBSRequest=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],n=0;n<e.length;n++){var i=new r.Request(e[0]);t.push(i)}this.dRequestList=t},this.getEncodedHex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new n({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:e});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},i.lang.extend(ce.asn1.ocsp.TBSRequest,ce.asn1.ASN1Object),ce.asn1.ocsp.OCSPRequest=function(e){var t=ce.asn1,n=t.DERSequence,r=t.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList){var i=new r.TBSRequest(e);this.dTbsRequest=i}},i.lang.extend(ce.asn1.ocsp.OCSPRequest,ce.asn1.ASN1Object),ce.asn1.ocsp.OCSPUtil={},ce.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,n){var r=ce.asn1.ocsp;return void 0===n&&(n=r.DEFAULT_HASH),new r.OCSPRequest({reqList:[{alg:n,issuerCert:e,subjectCert:t}]}).getEncodedHex()},ce.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=fe.getVbyList,n=fe.getIdxbyList,r=(t=fe.getVbyList,fe.getV),i={};try{var s=t(e,0,[0],"0a");i.responseStatus=parseInt(s,16)}catch(e){}if(0!==i.responseStatus)return i;try{var o=n(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(o,2)?i.certStatus="good":"a1"===e.substr(o,2)?(i.certStatus="revoked",i.revocationTime=Ee(t(e,o,[0]))):"82"===e.substr(o,2)&&(i.certStatus="unknown")}catch(e){}try{var a=n(e,0,[1,0,1,0,0,2,0,2]);i.thisUpdate=Ee(r(e,a))}catch(e){}try{var u=n(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(u,2)&&(i.nextUpdate=Ee(t(e,u,[0])))}catch(e){}return i},void 0!==ce&&ce||(ce={}),void 0!==ce.lang&&ce.lang||(ce.lang={}),ce.lang.String=function(){},"function"==typeof e?(le=function(t){return ye(new e(t,"utf8").toString("base64"))},he=function(t){return new e(me(t),"base64").toString("utf8")}):(le=function(e){return we(Ne(Be(e)))},he=function(e){return decodeURIComponent(Pe(be(e)))}),ce.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},ce.lang.String.isHex=function(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))},ce.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},ce.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=me(e),ce.lang.String.isBase64(e))},ce.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:v.algo.MD5,sha1:v.algo.SHA1,sha224:v.algo.SHA224,sha256:v.algo.SHA256,sha384:v.algo.SHA384,sha512:v.algo.SHA512,ripemd160:v.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var s="0001",o="00"+r,a="",u=i-s.length-o.length,c=0;c<u;c+=2)a+="ff";return s+a+o},this.hashString=function(e,t){return new ce.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new ce.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return new ce.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(e)},this.sha256=function(e){return new ce.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(e)},this.sha256Hex=function(e){return new ce.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(e)},this.sha512=function(e){return new ce.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(e)},this.sha512Hex=function(e){return new ce.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(e)}},ce.crypto.Util.md5=function(e){return new ce.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},ce.crypto.Util.ripemd160=function(e){return new ce.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},ce.crypto.Util.SECURERANDOMGEN=new ee,ce.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return ce.crypto.Util.SECURERANDOMGEN.nextBytes(t),ge(t)},ce.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new E(ce.crypto.Util.getRandomHexOfNbytes(e),16)},ce.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return ce.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],ge(n)},ce.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new E(ce.crypto.Util.getRandomHexOfNbits(e),16)},ce.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=ce.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},ce.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var r=t.subtract(e);return ce.crypto.Util.getRandomBigIntegerZeroToMax(r).add(e)},ce.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=ce.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=ce.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=ce.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=v.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(v.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ce.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ce.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},ce.crypto.MessageDigest.getHashLength=function(e){var t=ce.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},ce.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ce.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=ce.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{this.mac=v.algo.HMAC.create(ce.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n],this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=v.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(v.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Ce(e)),void(this.pass=v.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=Se(e.utf8)),void 0!==e.rstr&&(t=Ce(e.rstr)),void 0!==e.b64&&(t=b(e.b64)),void 0!==e.b64u&&(t=be(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=v.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ce.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ce.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase())},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw"provider not supported: "+t;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ce.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e}this.init=function(e,t){var n=null;try{n=void 0===t?Le.getKey(e):Le.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var e=new ce.crypto.ECDSA({curve:this.eccurvename});this.hSign=e.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof re&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof re&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ce.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ce.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new ce.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,e,this.ecpubhex);if(this.pubKey instanceof re&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof re&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ce.crypto.ECDSA&&this.pubKey instanceof ce.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ce.crypto.DSA&&this.pubKey instanceof ce.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,this.provName=void 0===e.prov?ce.crypto.Util.DEFAULTPROVIDER[this.algName]:e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=Le.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},ce.crypto.Cipher=function(e){},ce.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof re&&t.isPublic){var r=ce.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.encrypt(e);if("RSAOAEP"===r)return t.encryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ce.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof re&&t.isPrivate){var r=ce.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.decrypt(e);if("RSAOAEP"===r)return t.decryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ce.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof re){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},ce.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.ECDSA=function(e){var t=new ee;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new E(e.bitLength(),t).mod(e.subtract(E.ONE)).add(E.ONE)},this.setNamedCurve=function(e){this.ecparams=ce.crypto.ECParameterDB.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.getBigRandom(this.ecparams.n),t=this.ecparams.G.multiply(e),n=t.getX().toBigInteger(),r=t.getY().toBigInteger(),i=this.ecparams.keylen/4,s=("0000000000"+e.toString(16)).slice(-i),o="04"+("0000000000"+n.toString(16)).slice(-i)+("0000000000"+r.toString(16)).slice(-i);return this.setPrivateKeyHex(s),this.setPublicKeyHex(o),{ecprvhex:s,ecpubhex:o}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new E(t,16),r=this.ecparams.n,i=new E(e,16);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(E.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return ce.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(e,t){var n=t,r=this.ecparams.n,i=E.fromByteArrayUnsigned(e);do{var s=this.getBigRandom(r),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(r)}while(o.compareTo(E.ZERO)<=0);var a=s.modInverse(r).multiply(i.add(n.multiply(o))).mod(r);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,n){var r,i,s,o=ce.crypto.ECDSA.parseSigHex(t);r=o.r,i=o.s,s=oe.decodeFromHex(this.ecparams.curve,n);var a=new E(e,16);return this.verifyRaw(a,r,i,s)},this.verify=function(e,t,n){var r,i,s;if(Bitcoin.Util.isArray(t)){var o=this.parseSig(t);r=o.r,i=o.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";r=t.r,i=t.s}if(n instanceof oe)s=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=oe.decodeFrom(this.ecparams.curve,n)}var a=E.fromByteArrayUnsigned(e);return this.verifyRaw(a,r,i,s)},this.verifyRaw=function(e,t,n,r){var i=this.ecparams.n,s=this.ecparams.G;if(t.compareTo(E.ONE)<0||t.compareTo(i)>=0)return!1;if(n.compareTo(E.ONE)<0||n.compareTo(i)>=0)return!1;var o=n.modInverse(i),a=e.multiply(o).mod(i),u=t.multiply(o).mod(i);return s.multiply(a).add(r.multiply(u)).getX().toBigInteger().mod(i).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:E.fromByteArrayUnsigned(n),s:E.fromByteArrayUnsigned(r)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:E.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:E.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){var t,n,r,i=ce.crypto.ECDSA.getName,s=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[2,0],"06"),n=s(e,0,[1],"04");try{r=s(e,0,[3,0],"03").substr(2)}catch(e){}}catch(e){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=i(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){var t,n,r,i=ce.crypto.ECDSA.getName,s=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{s(e,0,[1,0],"06"),t=s(e,0,[1,1],"06"),n=s(e,0,[2,0,1],"04");try{r=s(e,0,[2,0,2,0],"03").substr(2)}catch(e){}}catch(e){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=i(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){var t,n,r=ce.crypto.ECDSA.getName,i=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{i(e,0,[0,0],"06"),t=i(e,0,[0,1],"06"),n=i(e,0,[1],"03").substr(2)}catch(e){throw"malformed PKCS#8 ECC public key"}if(this.curveName=r(t),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(e,t){5!==t&&(t=6);var n,r,i=ce.crypto.ECDSA.getName,s=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{n=s(e,0,[0,t,0,1],"06"),r=s(e,0,[0,t,1],"03").substr(2)}catch(e){throw"malformed X.509 certificate ECC public key"}if(this.curveName=i(n),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},ce.crypto.ECDSA.parseSigHex=function(e){var t=ce.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new E(t.r,16),s:new E(t.s,16)}},ce.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=fe.getChildIdx,n=fe.getV;if("30"!=e.substr(0,2))throw"signature is not a ASN.1 sequence";var r=t(e,0);if(2!=r.length)throw"number of signature ASN.1 sequence elements seem wrong";var i=r[0],s=r[1];if("02"!=e.substr(i,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=e.substr(s,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(e,i),s:n(e,s)}},ce.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=ce.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},ce.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return ce.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},ce.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new E(e,16),r=new E(t,16);return ce.crypto.ECDSA.biRSSigToASN1Sig(n,r)},ce.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=ce.asn1,r=new n.DERInteger({bigint:e}),i=new n.DERInteger({bigint:t});return new n.DERSequence({array:[r,i]}).getEncodedHex()},ce.crypto.ECDSA.getName=function(e){return"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new E(e,16)}this.getByName=function(n){var r=n;if(void 0!==t[r]&&(r=t[n]),void 0!==e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,s,o,a,u,c,l,h,f,d,p){e[r]={};var g=n(s),v=n(o),y=n(a),m=n(u),w=n(c),b=new ae(g,v,y),S=b.decodePointHex("04"+l+h);e[r].name=r,e[r].keylen=i,e[r].curve=b,e[r].G=S,e[r].n=m,e[r].h=w,e[r].oid=d,e[r].info=p;for(var E=0;E<f.length;E++)t[f[E]]=r}},ce.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ce.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ce.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ce.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ce.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ce.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ce.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ce.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ce.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ce.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==ce&&ce||(ce={}),void 0!==ce.crypto&&ce.crypto||(ce.crypto={}),ce.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,n,r,i){this.isPrivate=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=i},this.setPrivateHex=function(e,t,n,r,i){var s,o,a,u,c;s=new E(e,16),o=new E(t,16),a=new E(n,16),u="string"==typeof r&&r.length>1?new E(r,16):null,c=new E(i,16),this.setPrivate(s,o,a,u,c)},this.setPublic=function(e,t,n,r){this.isPublic=!0,this.p=e,this.q=t,this.g=n,this.y=r,this.x=null},this.setPublicHex=function(e,t,n,r){var i,s,o,a;i=new E(e,16),s=new E(t,16),o=new E(n,16),a=new E(r,16),this.setPublic(i,s,o,a)},this.signWithMessageHash=function(e){var t=this.p,n=this.q,r=this.g,i=this.x,s=ce.crypto.Util.getRandomBigIntegerMinToMax(E.ONE.add(E.ONE),n.subtract(E.ONE)),o=new E(e.substr(0,n.bitLength()/4),16),a=r.modPow(s,t).mod(n),u=s.modInverse(n).multiply(o.add(i.multiply(a))).mod(n);return ce.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(e,t){var n=this.p,r=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(t),a=o[0],u=o[1],c=new E(e.substr(0,r.bitLength()/4),16);if(E.ZERO.compareTo(a)>0||a.compareTo(r)>0)throw"invalid DSA signature";if(E.ZERO.compareTo(u)>=0||u.compareTo(r)>0)throw"invalid DSA signature";var l=u.modInverse(r),h=c.multiply(l).mod(r),f=a.multiply(l).mod(r);return 0==i.modPow(h,n).multiply(s.modPow(f,n)).mod(n).mod(r).compareTo(a)},this.parseASN1Signature=function(e){try{return[new E(fe.getVbyList(e,0,[0],"02"),16),new E(fe.getVbyList(e,0,[1],"02"),16)]}catch(e){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(e){var t,n,r,i,s,o=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=o(e,0,[1],"02"),n=o(e,0,[2],"02"),r=o(e,0,[3],"02"),i=o(e,0,[4],"02"),s=o(e,0,[5],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(t,n,r,i,s)},this.readPKCS8PrvKeyHex=function(e){var t,n,r,i,s=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[1,1,0],"02"),n=s(e,0,[1,1,1],"02"),r=s(e,0,[1,1,2],"02"),i=s(e,0,[2,0],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(t,n,r,null,i)},this.readPKCS8PubKeyHex=function(e){var t,n,r,i,s=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[0,1,0],"02"),n=s(e,0,[0,1,1],"02"),r=s(e,0,[0,1,2],"02"),i=s(e,0,[1,0],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed PKCS#8 DSA public key"}this.setPublicHex(t,n,r,i)},this.readCertPubKeyHex=function(e,t){var n,r,i,s;5!==t&&(t=6);var o=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{n=o(e,0,[0,t,0,1,0],"02"),r=o(e,0,[0,t,0,1,1],"02"),i=o(e,0,[0,t,0,1,2],"02"),s=o(e,0,[0,t,1,0],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed X.509 certificate DSA public key"}this.setPublicHex(n,r,i,s)}};var Le=function(){var e=function(e,n,r){return t(v.AES,e,n,r)},t=function(e,t,n,r){var i=v.enc.Hex.parse(t),s=v.enc.Hex.parse(n),o=v.enc.Hex.parse(r),a={};a.key=s,a.iv=o,a.ciphertext=i;var u=e.decrypt(a,s,{iv:o});return v.enc.Hex.stringify(u)},n=function(e,t,n){return r(v.AES,e,t,n)},r=function(e,t,n,r){var i=v.enc.Hex.parse(t),s=v.enc.Hex.parse(n),o=v.enc.Hex.parse(r),a=e.encrypt(i,s,{iv:o}),u=v.enc.Hex.parse(a.toString());return v.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,r){return t(v.TripleDES,e,n,r)},eproc:function(e,t,n){return r(v.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,r){return t(v.DES,e,n,r)},eproc:function(e,t,n){return r(v.DES,e,t,n)},keylen:8,ivlen:8}},s=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var r=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(t.type=r[1]);var i=-1,s=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),s=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),s=1);var o=e.indexOf("-----END");if(-1!=i&&-1!=o){var a=e.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),t.data=a}return t},o=function(e,t,n){for(var r=n.substring(0,16),s=v.enc.Hex.parse(r),o=v.enc.Utf8.parse(t),a=i[e].keylen+i[e].ivlen,u="",c=null;;){var l=v.algo.MD5.create();if(null!=c&&l.update(c),l.update(o),l.update(s),c=l.finalize(),(u+=v.enc.Hex.stringify(c)).length>=2*a)break}var h={};return h.keyhex=u.substr(0,2*i[e].keylen),h.ivhex=u.substr(2*i[e].keylen,2*i[e].ivlen),h},a=function(e,t,n,r){var s=v.enc.Base64.parse(e),o=v.enc.Hex.stringify(s);return(0,i[t].proc)(o,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(e){return s(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return o(e,t,n)},decryptKeyB64:function(e,t,n,r){return a(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=s(e),r=n.cipher,i=n.ivsalt,u=n.data,c=o(r,t,i).keyhex;return a(u,r,c,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,s){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw"KEYUTIL unsupported algorithm: "+r;return void 0!==s&&null!=s||(s=function(e){var t=v.lib.WordArray.random(e);return v.enc.Hex.stringify(t)}(i[r].ivlen).toUpperCase()),a="-----BEGIN "+e+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+s+"\r\n",a+="\r\n",(a+=function(e,t,n,r){return(0,i[t].eproc)(e,n,r)}(t,r,o(r,n,s).keyhex,s).replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=fe.getChildIdx,n=fe.getV,r={},i=t(e,0);if(2!=i.length)throw"malformed format: SEQUENCE(0).items != 2: "+i.length;r.ciphertext=n(e,i[1]);var s=t(e,i[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+s.length;if("2a864886f70d01050d"!=n(e,s[0]))throw"this only supports pkcs5PBES2";var o=t(e,s[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var a=t(e,o[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length;if("2a864886f70d0307"!=n(e,a[0]))throw"this only supports TripleDES";r.encryptionSchemeAlg="TripleDES",r.encryptionSchemeIV=n(e,a[1]);var u=t(e,o[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=n(e,u[0]))throw"this only supports pkcs5PBKDF2";var c=t(e,u[1]);if(c.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length;r.pbkdf2Salt=n(e,c[0]);var l=n(e,c[1]);try{r.pbkdf2Iter=parseInt(l,16)}catch(e){throw"malformed format pbkdf2Iter: "+l}return r},getPBKDF2KeyHexFromParam:function(e,t){var n=v.enc.Hex.parse(e.pbkdf2Salt),r=v.PBKDF2(t,n,{keySize:6,iterations:e.pbkdf2Iter});return v.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=Ie(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=Le.getPBKDF2KeyHexFromParam(r,t),s={};s.ciphertext=v.enc.Hex.parse(r.ciphertext);var o=v.enc.Hex.parse(i),a=v.enc.Hex.parse(r.encryptionSchemeIV),u=v.TripleDES.decrypt(s,o,{iv:a});return v.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=fe,n=t.getChildIdx,r=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var s=n(e,0);if(3!=s.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(s[1],2))throw"malformed PKCS8 private key(code:003)";var o=n(e,s[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=r(e,o[0]),"06"==e.substr(o[1],2)&&(i.algparam=r(e,o[1])),"04"!=e.substr(s[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=t.getVidx(e,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Ie(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new re;else if("2a8648ce380401"==n.algoid)t=new ce.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";t=new ce.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=fe.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new re;else if("2a8648ce380401"===n)t=new ce.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";t=new ce.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=fe.getChildIdx,n=fe.getV,r={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var i=t(e,0);if(2!=i.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(i[0],2))throw"malformed RSA key(code:003)";if(r.n=n(e,i[0]),"02"!=e.substr(i[1],2))throw"malformed RSA key(code:004)";return r.e=n(e,i[1]),r},parsePublicPKCS8Hex:function(e){var t=fe,n=t.getChildIdx,r=t.getV,i={algparam:null},s=n(e,0);if(2!=s.length)throw"outer DERSequence shall have 2 elements: "+s.length;var o=s[0];if("30"!=e.substr(o,2))throw"malformed PKCS8 public key(code:001)";var a=n(e,o);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=r(e,a[0]),"06"==e.substr(a[1],2)?i.algparam=r(e,a[1]):"30"==e.substr(a[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,a[1],[0],"02"),i.algparam.q=t.getVbyList(e,a[1],[1],"02"),i.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(s[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=r(e,s[1]).substr(2),i}}}();Le.getKey=function(e,t,n){var r,i=(y=fe).getChildIdx,s=y.getVbyList,o=ce.crypto,a=o.ECDSA,u=o.DSA,c=re,l=Ie,h=Le;if(void 0!==c&&e instanceof c)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(I=new c).setPublic(e.n,e.e),I;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(I=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),I;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(I=new c).setPrivate(e.n,e.e,e.d),I;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(I=new u).setPublic(e.p,e.q,e.g,e.y),I;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(I=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),I;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(I=new c).setPublic(be(e.n),be(e.e)),I;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(I=new c).setPrivateEx(be(e.n),be(e.e),be(e.d),be(e.p),be(e.q),be(e.dp),be(e.dq),be(e.qi)),I;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(I=new c).setPrivate(be(e.n),be(e.e),be(e.d)),I;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var f=(k=new a({curve:e.crv})).ecparams.keylen/4,d="04"+("0000000000"+be(e.x)).slice(-f)+("0000000000"+be(e.y)).slice(-f);return k.setPublicKeyHex(d),k}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){f=(k=new a({curve:e.crv})).ecparams.keylen/4,d="04"+("0000000000"+be(e.x)).slice(-f)+("0000000000"+be(e.y)).slice(-f);var p=("0000000000"+be(e.d)).slice(-f);return k.setPublicKeyHex(d),k.setPrivateKeyHex(p),k}if("pkcs5prv"===n){var g,v=e,y=fe;if(9===(g=i(v,0)).length)(I=new c).readPKCS5PrvKeyHex(v);else if(6===g.length)(I=new u).readPKCS5PrvKeyHex(v);else{if(!(g.length>2&&"04"===v.substr(g[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(I=new a).readPKCS5PrvKeyHex(v)}return I}if("pkcs8prv"===n)return h.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return h._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return ze.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return ze.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var m=Ie(e,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(m)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var w=l(e,"RSA PRIVATE KEY");return h.getKey(w,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var b=s(r=l(e,"DSA PRIVATE KEY"),0,[1],"02"),S=s(r,0,[2],"02"),_=s(r,0,[3],"02"),C=s(r,0,[4],"02"),x=s(r,0,[5],"02");return(I=new u).setPrivate(new E(b,16),new E(S,16),new E(_,16),new E(C,16),new E(x,16)),I}if(-1!=e.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var A=h.getDecryptedKeyHex(e,t),F=new re;return F.readPKCS5PrvKeyHex(A),F}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var k,I=s(r=h.getDecryptedKeyHex(e,t),0,[1],"04"),T=s(r,0,[2,0],"06"),D=s(r,0,[3,0],"03").substr(2);if(void 0===ce.crypto.OID.oidhex2name[T])throw"undefined OID(hex) in KJUR.crypto.OID: "+T;return(k=new a({curve:ce.crypto.OID.oidhex2name[T]})).setPublicKeyHex(D),k.setPrivateKeyHex(I),k.isPublic=!1,k}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return b=s(r=h.getDecryptedKeyHex(e,t),0,[1],"02"),S=s(r,0,[2],"02"),_=s(r,0,[3],"02"),C=s(r,0,[4],"02"),x=s(r,0,[5],"02"),(I=new u).setPrivate(new E(b,16),new E(S,16),new E(_,16),new E(C,16),new E(x,16)),I;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(e,t);throw"not supported argument"},Le.generateKeypair=function(e,t){if("RSA"==e){var n=t;(o=new re).generate(n,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new re,i=o.n.toString(16),s=o.e.toString(16);return r.setPublic(i,s),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}if("EC"==e){var o,a,u=t,c=new ce.crypto.ECDSA({curve:u}).generateKeyPairHex();return(o=new ce.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),o.setPrivateKeyHex(c.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new ce.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=r,a}throw"unknown algorithm: "+e},Le.getPEM=function(e,t,n,r,i,s){var o=ce.asn1,a=o.DERObjectIdentifier,u=o.DERInteger,c=o.ASN1Util.newObject,l=ce.crypto,h=l.DSA,f=l.ECDSA,d=re;function p(e){return c({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function g(e){return c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function y(e){return c({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==d&&e instanceof d||void 0!==h&&e instanceof h||void 0!==f&&e instanceof f)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return ke(S=new(0,o.x509.SubjectPublicKeyInfo)(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===n||null==n)&&1==e.isPrivate)return ke(S=p(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===n||null==n)&&1==e.isPrivate){var m=new a({name:e.curveName}).getEncodedHex(),w=g(e).getEncodedHex(),b="";return(b+=ke(m,"EC PARAMETERS"))+ke(w,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===n||null==n)&&1==e.isPrivate)return ke(S=y(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==n&&null!=n&&1==e.isPrivate){var S=p(e).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",S,n,r,s)}if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==n&&null!=n&&1==e.isPrivate)return S=g(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",S,n,r,s);if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==n&&null!=n&&1==e.isPrivate)return S=y(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",S,n,r,s);var E=function(e,t){var n=_(e,t);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},_=function(e,t){var n=v.lib.WordArray.random(8),r=v.lib.WordArray.random(8),i=v.PBKDF2(t,n,{keySize:6,iterations:100}),s=v.enc.Hex.parse(e),o=v.TripleDES.encrypt(s,i,{iv:r})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=v.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=v.enc.Hex.stringify(r),a};if("PKCS8PRV"==t&&null!=d&&e instanceof d&&1==e.isPrivate){var C=p(e).getEncodedHex();return S=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:C}}]}).getEncodedHex(),void 0===n||null==n?ke(S,"PRIVATE KEY"):ke(w=E(S,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return C=new c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),S=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:C}}]}).getEncodedHex(),void 0===n||null==n?ke(S,"PRIVATE KEY"):ke(w=E(S,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return C=new u({bigint:e.x}).getEncodedHex(),S=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:C}}]}).getEncodedHex(),void 0===n||null==n?ke(S,"PRIVATE KEY"):ke(w=E(S,n),"ENCRYPTED PRIVATE KEY");throw"unsupported object nor format"},Le.getKeyFromCSRPEM=function(e){var t=Ie(e,"CERTIFICATE REQUEST");return Le.getKeyFromCSRHex(t)},Le.getKeyFromCSRHex=function(e){var t=Le.parseCSRHex(e);return Le.getKey(t.p8pubkeyhex,null,"pkcs8pub")},Le.parseCSRHex=function(e){var t=fe.getChildIdx,n=fe.getTLV,r={},i=e;if("30"!=i.substr(0,2))throw"malformed CSR(code:001)";var s=t(i,0);if(s.length<1)throw"malformed CSR(code:002)";if("30"!=i.substr(s[0],2))throw"malformed CSR(code:003)";var o=t(i,s[0]);if(o.length<3)throw"malformed CSR(code:004)";return r.p8pubkeyhex=n(i,o[2]),r},Le.getJWKFromKey=function(e){var t={};if(e instanceof re&&e.isPrivate)return t.kty="RSA",t.n=we(e.n.toString(16)),t.e=we(e.e.toString(16)),t.d=we(e.d.toString(16)),t.p=we(e.p.toString(16)),t.q=we(e.q.toString(16)),t.dp=we(e.dmp1.toString(16)),t.dq=we(e.dmq1.toString(16)),t.qi=we(e.coeff.toString(16)),t;if(e instanceof re&&e.isPublic)return t.kty="RSA",t.n=we(e.n.toString(16)),t.e=we(e.e.toString(16)),t;if(e instanceof ce.crypto.ECDSA&&e.isPrivate){if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=e.getPublicKeyXYHex();return t.kty="EC",t.crv=r,t.x=we(n.x),t.y=we(n.y),t.d=we(e.prvKeyHex),t}if(e instanceof ce.crypto.ECDSA&&e.isPublic){var r;if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=e.getPublicKeyXYHex(),t.kty="EC",t.crv=r,t.x=we(n.x),t.y=we(n.y),t}throw"not supported key object"},re.getPosArrayOfChildrenFromHex=function(e){return fe.getChildIdx(e,0)},re.getHexValueArrayOfChildrenFromHex=function(e){var t,n=fe.getV,r=n(e,(t=re.getPosArrayOfChildrenFromHex(e))[0]),i=n(e,t[1]),s=n(e,t[2]),o=n(e,t[3]),a=n(e,t[4]),u=n(e,t[5]),c=n(e,t[6]),l=n(e,t[7]),h=n(e,t[8]);return(t=new Array).push(r,i,s,o,a,u,c,l,h),t},re.prototype.readPrivateKeyFromPEMString=function(e){var t=Ie(e),n=re.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},re.prototype.readPKCS5PrvKeyHex=function(e){var t=re.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},re.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,i,s,o,a,u,c=fe.getVbyList;if(!1===fe.isASN1HEX(e))throw"not ASN.1 hex string";try{t=c(e,0,[2,0,1],"02"),n=c(e,0,[2,0,2],"02"),r=c(e,0,[2,0,3],"02"),i=c(e,0,[2,0,4],"02"),s=c(e,0,[2,0,5],"02"),o=c(e,0,[2,0,6],"02"),a=c(e,0,[2,0,7],"02"),u=c(e,0,[2,0,8],"02")}catch(e){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(t,n,r,i,s,o,a,u)},re.prototype.readPKCS5PubKeyHex=function(e){var t=fe,n=t.getV;if(!1===t.isASN1HEX(e))throw"keyHex is not ASN.1 hex string";var r=t.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw"wrong hex for PKCS#5 public key";var i=n(e,r[0]),s=n(e,r[1]);this.setPublic(i,s)},re.prototype.readPKCS8PubKeyHex=function(e){var t=fe;if(!1===t.isASN1HEX(e))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==t.getTLVbyList(e,0,[0,0]))throw"not PKCS8 RSA public key";var n=t.getTLVbyList(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},re.prototype.readCertPubKeyHex=function(e,t){var n,r;(n=new ze).readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var Me=new RegExp("");function Ke(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e}function Ue(e,t,n){for(var r="",i=0;r.length<t;)r+=_e(n(Ce(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function qe(e){for(var t in ce.crypto.Util.DIGESTINFOHEAD){var n=ce.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n)return[t,e.substring(r)]}return[]}function ze(){var e=fe,t=e.getChildIdx,n=e.getV,r=e.getTLV,i=e.getVbyList,s=e.getTLVbyList,o=e.getIdxbyList,a=e.getVidx,u=e.oidname,c=ze,l=Ie;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return i(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return u(i(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return c.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return c.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=i(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=i(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return e.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return o(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return Le.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return u(i(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmName(),n=this.getSignatureValueHex(),r=s(this.hex,0,[0],"30"),i=new ce.crypto.Signature({alg:t});return i.init(e),i.updateHex(r),i.verify(n)},this.parseExt=function(){if(3!==this.version)return-1;var n=o(this.hex,0,[0,7,0],"30"),r=t(this.hex,n);this.aExtInfo=new Array;for(var s=0;s<r.length;s++){var u={critical:!1},c=0;3===t(this.hex,r[s]).length&&(u.critical=!0,c=1),u.oid=e.hextooidstr(i(this.hex,r[s],[0],"06"));var l=o(this.hex,r[s],[1+c]);u.vidx=a(this.hex,l),this.aExtInfo.push(u)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=ce.asn1.x509.OID.name2oid(e)),""!==n)for(var r=0;r<t.length;r++)if(t[r].oid===n)return t[r]},this.getExtBasicConstraints=function(){var e=this.getExtInfo("basicConstraints");if(void 0===e)return e;var t=n(this.hex,e.vidx);if(""===t)return{};if("0101ff"===t)return{cA:!0};if("0101ff02"===t.substr(0,8)){var r=n(t,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";var t=n(this.hex,e.vidx);if(t.length%2!=0||t.length<=2)throw"malformed key usage value";var r=parseInt(t.substr(0,2)),i=parseInt(t.substr(2),16).toString(2);return i.substr(0,i.length-r)},this.getExtKeyUsageString=function(){for(var e=this.getExtKeyUsageBin(),t=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&t.push(ze.KEYUSAGE_NAME[n]);return t.join(",")},this.getExtSubjectKeyIdentifier=function(){var e=this.getExtInfo("subjectKeyIdentifier");return void 0===e?e:n(this.hex,e.vidx)},this.getExtAuthorityKeyIdentifier=function(){var e=this.getExtInfo("authorityKeyIdentifier");if(void 0===e)return e;for(var i={},s=r(this.hex,e.vidx),o=t(s,0),a=0;a<o.length;a++)"80"===s.substr(o[a],2)&&(i.kid=n(s,o[a]));return i},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var i=new Array,s=r(this.hex,e.vidx);if(""===s)return i;for(var o=t(s,0),a=0;a<o.length;a++)i.push(u(n(s,o[a])));return i},this.getExtSubjectAltName=function(){for(var e=this.getExtSubjectAltName2(),t=new Array,n=0;n<e.length;n++)"DNS"===e[n][0]&&t.push(e[n][1]);return t},this.getExtSubjectAltName2=function(){var e,i,s,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var a=new Array,u=r(this.hex,o.vidx),c=t(u,0),l=0;l<c.length;l++)s=u.substr(c[l],2),e=n(u,c[l]),"81"===s&&(i=Ee(e),a.push(["MAIL",i])),"82"===s&&(i=Ee(e),a.push(["DNS",i])),"84"===s&&(i=ze.hex2dn(e,0),a.push(["DN",i])),"86"===s&&(i=Ee(e),a.push(["URI",i])),"87"===s&&(i=Oe(e),a.push(["IP",i]));return a},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var n=new Array,r=t(this.hex,e.vidx),s=0;s<r.length;s++)try{var o=Ee(i(this.hex,r[s],[0,0,0],"86"));n.push(o)}catch(e){}return n},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var n={ocsp:[],caissuer:[]},r=t(this.hex,e.vidx),s=0;s<r.length;s++){var o=i(this.hex,r[s],[0],"06"),a=i(this.hex,r[s],[1],"86");"2b06010505073001"===o&&n.ocsp.push(Ee(a)),"2b06010505073002"===o&&n.caissuer.push(Ee(a))}return n},this.getExtCertificatePolicies=function(){var e=this.getExtInfo("certificatePolicies");if(void 0===e)return e;for(var s=r(this.hex,e.vidx),o=[],a=t(s,0),c=0;c<a.length;c++){var l={},h=t(s,a[c]);if(l.id=u(n(s,h[0])),2===h.length)for(var f=t(s,h[1]),d=0;d<f.length;d++){var p=i(s,f[d],[0],"06");"2b06010505070201"===p?l.cps=Ee(i(s,f[d],[1])):"2b06010505070202"===p&&(l.unotice=Ee(i(s,f[d],[1,0])))}o.push(l)}return o},this.readCertPEM=function(e){this.readCertHex(l(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getInfo=function(){var e,t,n;if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+je(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+je(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var r=0;r<n.length;r++){var i=n[r],s=ce.asn1.x509.OID.oid2name(i.oid);""===s&&(s=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),e+="  "+s+" "+o+":\n","basicConstraints"===s){var a=this.getExtBasicConstraints();void 0===a.cA?e+="    {}\n":(e+="    cA=true",void 0!==a.pathLen&&(e+=", pathLen="+a.pathLen),e+="\n")}else if("keyUsage"===s)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===s)e+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===s){var u=this.getExtAuthorityKeyIdentifier();void 0!==u.kid&&(e+="    kid="+u.kid+"\n")}else if("extKeyUsage"===s)e+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===s)e+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===s)e+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===s){var c=this.getExtAIAInfo();void 0!==c.ocsp&&(e+="    ocsp: "+c.ocsp.join(",")+"\n"),void 0!==c.caissuer&&(e+="    caissuer: "+c.caissuer.join(",")+"\n")}else if("certificatePolicies"===s)for(var l=this.getExtCertificatePolicies(),h=0;h<l.length;h++)void 0!==l[h].id&&(e+="    policy oid: "+l[h].id+"\n"),void 0!==l[h].cps&&(e+="    cps: "+l[h].cps+"\n")}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Me.compile("[^0-9a-f]","gi"),re.prototype.sign=function(e,t){var n=function(e){return ce.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(n,t)},re.prototype.signWithMessageHash=function(e,t){var n=te(ce.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ke(this.doPrivate(n).toString(16),this.n.bitLength())},re.prototype.signPSS=function(e,t,n){var r,i=(r=Ce(e),ce.crypto.Util.hashHex(r,t));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,t,n)},re.prototype.signWithMessageHashPSS=function(e,t,n){var r,i=_e(e),s=i.length,o=this.n.bitLength()-1,a=Math.ceil(o/8),u=function(e){return ce.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=s;else if(-2===n)n=a-s-2;else if(n<-2)throw"invalid salt length";if(a<s+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new ee).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=_e(u(Ce("\0\0\0\0\0\0\0\0"+i+c))),h=[];for(r=0;r<a-n-s-2;r+=1)h[r]=0;var f=String.fromCharCode.apply(String,h)+"\x01"+c,d=Ue(l,f.length,u),p=[];for(r=0;r<f.length;r+=1)p[r]=f.charCodeAt(r)^d.charCodeAt(r);for(p[0]&=~(65280>>8*a-o&255),r=0;r<s;r++)p.push(l.charCodeAt(r));return p.push(188),Ke(this.doPrivate(new E(p)).toString(16),this.n.bitLength())},re.prototype.verify=function(e,t){var n=te(t=(t=t.replace(Me,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=qe(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var i=r[0];return r[1]==function(e){return ce.crypto.Util.hashString(e,i)}(e)},re.prototype.verifyWithMessageHash=function(e,t){var n=te(t=(t=t.replace(Me,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=qe(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&r[1]==e},re.prototype.verifyPSS=function(e,t,n,r){var i,s=(i=Ce(e),ce.crypto.Util.hashHex(i,n));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(s,t,n,r)},re.prototype.verifyWithMessageHashPSS=function(e,t,n,r){var i=new E(t,16);if(i.bitLength()>this.n.bitLength())return!1;var s,o=function(e){return ce.crypto.Util.hashHex(e,n)},a=_e(e),u=a.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===r||void 0===r)r=u;else if(-2===r)r=l-u-2;else if(r<-2)throw"invalid salt length";if(l<u+r+2)throw"data too long";var h=this.doPublic(i).toByteArray();for(s=0;s<h.length;s+=1)h[s]&=255;for(;h.length<l;)h.unshift(0);if(188!==h[l-1])throw"encoded message does not end in 0xbc";var f=(h=String.fromCharCode.apply(String,h)).substr(0,l-u-1),d=h.substr(f.length,u),p=65280>>8*l-c&255;if(0!=(f.charCodeAt(0)&p))throw"bits beyond keysize not zero";var g=Ue(d,f.length,o),v=[];for(s=0;s<f.length;s+=1)v[s]=f.charCodeAt(s)^g.charCodeAt(s);v[0]&=~p;var y=l-u-r-2;for(s=0;s<y;s+=1)if(0!==v[s])throw"leftmost octets not zero";if(1!==v[y])throw"0x01 marker not found";return d===_e(o(Ce("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,v.slice(-r)))))},re.SALT_LEN_HLEN=-1,re.SALT_LEN_MAX=-2,re.SALT_LEN_RECOVER=-2,ze.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed DN";for(var n=new Array,r=fe.getChildIdx(e,t),i=0;i<r.length;i++)n.push(ze.hex2rdn(e,r[i]));return"/"+(n=n.map((function(e){return e.replace("/","\\/")}))).join("/")},ze.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw"malformed RDN";for(var n=new Array,r=fe.getChildIdx(e,t),i=0;i<r.length;i++)n.push(ze.hex2attrTypeValue(e,r[i]));return(n=n.map((function(e){return e.replace("+","\\+")}))).join("+")},ze.hex2attrTypeValue=function(e,t){var n=fe,r=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed attribute type and value";var i=n.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var s=r(e,i[0]),o=ce.asn1.ASN1Util.oidHexToInt(s);return ce.asn1.x509.OID.oid2atype(o)+"="+_e(r(e,i[1]))},ze.getPublicKeyFromCertHex=function(e){var t=new ze;return t.readCertHex(e),t.getPublicKey()},ze.getPublicKeyFromCertPEM=function(e){var t=new ze;return t.readCertPEM(e),t.getPublicKey()},ze.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,r=fe.getVbyList,i={algparam:null};return(t=new ze).readCertPEM(e),n=t.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},ze.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ce&&ce||(ce={}),void 0!==ce.jws&&ce.jws||(ce.jws={}),ce.jws.JWS=function(){var e=ce.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],s=r[2],o=r[3],a=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!n){var u=be(o),c=te(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=he(i),h=he(s);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=h,!e(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},ce.jws.JWS.sign=function(e,t,n,r,i){var s,o,a,u=ce.jws.JWS,c=u.readSafeJSONString,l=u.isSafeJSONString,h=ce.crypto,f=h.Mac,d=h.Signature,p=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(s=p.stringify(o=t)),"string"==typeof t){if(!l(s=t))throw"JWS Head is not safe JSON string: "+s;o=c(s)}if(a=n,"object"==typeof n&&(a=p.stringify(n)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,s=p.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var g=null;if(void 0===u.jwsalg2sigalg[e])throw"unsupported alg name: "+e;g=u.jwsalg2sigalg[e];var v=le(s)+"."+le(a),y="";if("Hmac"==g.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var m=new f({alg:g,prov:"cryptojs",pass:r});m.updateString(v),y=m.doFinal()}else{var w;-1!=g.indexOf("withECDSA")?((w=new d({alg:g})).init(r,i),w.updateString(v),hASN1Sig=w.sign(),y=ce.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)):"none"!=g&&((w=new d({alg:g})).init(r,i),w.updateString(v),y=w.sign())}return v+"."+we(y)},ce.jws.JWS.verify=function(e,t,n){var r,i=ce.jws.JWS,s=i.readSafeJSONString,o=ce.crypto,a=o.ECDSA,u=o.Mac,c=o.Signature;r=re;var l=e.split(".");if(3!==l.length)return!1;var h,f=l[0]+"."+l[1],d=be(l[2]),p=s(he(l[0])),g=null;if(void 0===p.alg)throw"algorithm not specified in header";if(h=(g=p.alg).substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&-1==(":"+n.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=Le.getKey(t)),!("RS"!=h&&"PS"!=h||t instanceof r))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(t instanceof a))throw"key shall be a ECDSA obj for ES* algs";var v=null;if(void 0===i.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+g;if("none"==(v=i.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==v.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var y=new u({alg:v,pass:t});return y.updateString(f),d==y.doFinal()}if(-1!=v.indexOf("withECDSA")){var m,w=null;try{w=a.concatSigToASN1Sig(d)}catch(e){return!1}return(m=new c({alg:v})).init(t),m.updateString(f),m.verify(w)}return(m=new c({alg:v})).init(t),m.updateString(f),m.verify(d)},ce.jws.JWS.parse=function(e){var t,n,r=e.split("."),i={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=r[1],3==r.length&&(n=r[2]),i.headerObj=ce.jws.JWS.readSafeJSONString(he(r[0])),i.payloadObj=ce.jws.JWS.readSafeJSONString(he(t)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadPP=null==i.payloadObj?he(t):JSON.stringify(i.payloadObj,null,"  "),void 0!==n&&(i.sigHex=be(n)),i},ce.jws.JWS.verifyJWT=function(e,t,n){var r=ce.jws,i=r.JWS,s=i.readSafeJSONString,o=i.inArray,a=i.includedArray,u=e.split("."),c=u[0],l=u[1],h=(be(u[2]),s(he(c))),f=s(he(l));if(void 0===h.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!o(h.alg,n.alg))return!1;if(void 0!==f.iss&&"object"==typeof n.iss&&!o(f.iss,n.iss))return!1;if(void 0!==f.sub&&"object"==typeof n.sub&&!o(f.sub,n.sub))return!1;if(void 0!==f.aud&&"object"==typeof n.aud)if("string"==typeof f.aud){if(!o(f.aud,n.aud))return!1}else if("object"==typeof f.aud&&!a(f.aud,n.aud))return!1;var d=r.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(d=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+n.gracePeriod<d||void 0!==f.nbf&&"number"==typeof f.nbf&&d<f.nbf-n.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&d<f.iat-n.gracePeriod||void 0!==f.jti&&void 0!==n.jti&&f.jti!==n.jti||!i.verify(e,t,n.alg))},ce.jws.JWS.includedArray=function(e,t){var n=ce.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t))return!1;return!0},ce.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},ce.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ce.jws.JWS.isSafeJSONString=function(e,t,n){var r=null;try{return"object"!=typeof(r=ue(e))||r.constructor===Array?0:(t&&(t[n]=r),1)}catch(e){return 0}},ce.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=ue(e))||t.constructor===Array?null:t}catch(e){return null}},ce.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},ce.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=Ce(t);return we(ce.crypto.Util.hashHex(n,"sha256"))},ce.jws.IntDate={},ce.jws.IntDate.get=function(e){var t=ce.jws.IntDate,n=t.getNow,r=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},ce.jws.IntDate.getZulu=function(e){return De(e)},ce.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ce.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},ce.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==ce&&ce||(ce={}),void 0!==ce.jws&&ce.jws||(ce.jws={}),ce.jws.JWSJS=function(){var e=ce.jws.JWS,t=e.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,n,r){if(null==this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=ce.jws.JWS.sign(e,t,this.sPayload,n,r).split(".");this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(e){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+e}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(2!==n.length)return!1;if(!1===this.verifyNth(t,n[0],n[1]))return!1}return!0},this.verifyNth=function(t,n,r){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var i=this.aHeader[t]+"."+this.sPayload+"."+this.aSignature[t],s=!1;try{s=e.verify(i,n,r)}catch(e){return!1}return s},this.readJWSJS=function(e){if("string"==typeof e){var n=t(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.aSignatures=e.signatures}catch(e){throw"malformed JWS-JS JSON object: "+e}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},t.SecureRandom=ee,t.rng_seed_time=Y,t.BigInteger=E,t.RSAKey=re,t.ECDSA=ce.crypto.ECDSA,t.DSA=ce.crypto.DSA,t.Signature=ce.crypto.Signature,t.MessageDigest=ce.crypto.MessageDigest,t.Mac=ce.crypto.Mac,t.Cipher=ce.crypto.Cipher,t.KEYUTIL=Le,t.ASN1HEX=fe,t.X509=ze,t.CryptoJS=v,t.b64tohex=b,t.b64toBA=S,t.stoBA=de,t.BAtos=pe,t.BAtohex=ge,t.stohex=ve,t.stob64=function(e){return w(ve(e))},t.stob64u=function(e){return ye(w(ve(e)))},t.b64utos=function(e){return pe(S(me(e)))},t.b64tob64u=ye,t.b64utob64=me,t.hex2b64=w,t.hextob64u=we,t.b64utohex=be,t.utf8tob64u=le,t.b64utoutf8=he,t.utf8tob64=function(e){return w(Ne(Be(e)))},t.b64toutf8=function(e){return decodeURIComponent(Pe(b(e)))},t.utf8tohex=Se,t.hextoutf8=Ee,t.hextorstr=_e,t.rstrtohex=Ce,t.hextob64=xe,t.hextob64nl=Ae,t.b64nltohex=Fe,t.hextopem=ke,t.pemtohex=Ie,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t},t.zulutomsec=Te,t.zulutosec=De,t.zulutodate=function(e){return new Date(Te(e))},t.datetozulu=function(e,t,n){var r,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var s=e.getUTCMilliseconds();0!==s&&(r+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},t.uricmptohex=Ne,t.hextouricmp=Pe,t.ipv6tohex=Re,t.hextoipv6=He,t.hextoip=Oe,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Re(e);throw t}var n=e.split(".");if(4!==n.length)throw t;var r="";try{for(var i=0;i<4;i++)r+=("0"+parseInt(n[i]).toString(16)).slice(-2);return r}catch(e){throw t}},t.encodeURIComponentAll=Be,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=je,t.intarystrtohex=Ve,t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1},t.KJUR=ce,t.crypto=ce.crypto,t.asn1=ce.asn1,t.jws=ce.jws,t.lang=ce.lang}).call(this,n(7).Buffer)},function(e,t){e.exports={MALFORMED_TOKEN:"Invalid JWT token. Got only 2 parts.",INVALID_SIGNATURE:"Invalid signature",INVALID_VERSION:"Invalid version",INVALID_ALGORITHM:"Invalid algorithm",INVALID_ISSUER:"Invalid issuer",INVALID_AUDIENCE:"Invalid audience",INVALID_NONCE:"Invalid nonce",EXPIRED_TOKEN:"Expired token",INVALID_STATE:"Invalid state",INVALID_ORIGIN:"Invalid origin",INVALID_TOKEN:"Invalid token",MISSING_PUBLIC_KEY:"Cannot find public key",INVALID_ACCESS_TOKEN:"Access token must be a string",INVALID_ID_TOKEN:"Invalid id token",NOT_CD_USER:"Must be a Cloud Directory user",MISSING_CLIENT_ID:"Missing client ID",MISSING_ID_TOKEN:"Missing id token string",MISSING_ID_TOKEN_PAYLOAD:"Missing id token payload",MISSING_TOKENS:"Missing tokens",MISSING_ACCESS_TOKEN:"Missing access token string",INVALID_DISCOVERY_ENDPOINT:"Invalid discovery endpoint",FAIL_TO_INITIALIZE:"You must call and wait for init() before calling this function.",RESPONSE_TYPE:"code",RESPONSE_MODE:"web_message",PROMPT:"none",SCOPE:"openid",STATE_LENGTH:20,NONCE_LENGTH:20,CODE_VERIFIER_LENGTH:44,CHALLENGE_METHOD:"S256",TOKEN_ALG:"RS256",VERSION:4,CHANGE_PASSWORD:"/cloud_directory/change_password",GENERATE_CODE:"/cloud_directory/generate_code",CHANGE_DETAILS:"/cloud_directory/change_details",OAUTH:"/oauth/v4/",MALFORMED_ACCESS_TOKEN:"eyJpc3MiOiJtb2JpbGVjbGllbnRhY2Nlc3Muc3RhZ2UxLm5nLmJsdWVtaXgubmV0IiwiZXhwIjoxNDg3MDg0ODc4LCJhdWQiOiIyNmNiMDEyZWIzMjdjNjEyZDkwYTY4MTkxNjNiNmJjYmQ0ODQ5Y2JiIiwiaWF0IjoxNDg3MDgxMjc4LCJhdXRoX2J5IjoiZmFjZWJvb2siLCJ0ZW5hbnQiOiI0ZGJhOTQzMC01NGU2LTRjZjItYTUxNi02ZjczZmViNzAyYmIiLCJzY29wZSI6ImFwcGlkX2RlZmF1bHQgYXBwaWRfcmVhZHByb2ZpbGUgYXBwaWRfcmVhZHVzZXJhdHRyIGFwcGlkX3dyaXRldXNlcmF0dHIifQ.HHterec250JSDY1965cM2DadBznl2wTKmzKNSnfjpdTAqax9VZvV3EwuFbEnGp9-i6AC-OlsVj7xvbALkdjwG2lZvpQx0M_gRc_3E0NiYuOGVolcm0wEXtbtDUFFqZQAf9BYYOPZ8OintdBiwUGETbH1ZRVtUvt3nalIko1OPE1Q12LvuRlhz5MClNHmvxJcXc7kucxCx4s4UFFy_HJA1gow7HWFqc9-PZf4JMWA-siYqPrdw_zYeBTBzE5co92F6JBEtGLLCjhJVz9eYgLLECXbak3z6hOaY9352Weuj7AgMOWxzw56jKKsiixMtvzrCzLVIcRUG96UJszwPHtPlA",INVALID_SIGNATURE_TOKEN:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2p3dC1pZHAuZXhhbXBsZS5jb20iLCJzdWIiOiJtYWlsdG86bWlrZUBleGFtcGxlLmNvbSIsIm5iZiI6MTU2NjMxMDg5NSwiZXhwIjoxNTY2MzE0NDk1LCJpYXQiOjE1NjYzMTA4OTUsImp0aSI6ImlkMTIzNDU2IiwidHlwIjoiaHR0cHM6Ly9leGFtcGxlLmNvbS9yZWdpc3RlciIsImF1ZCI6WyJodHRwOi8vZm9vMS5jb20iLCJodHRwOi8vZm9vMi5jb20iXX0.NBDYg8VZxW770qcbIl40OFvaQntO-FVYUUJocE5ZgcyrvFTuomwF997OcEJghO8BE_Y2m67PbfPFsbN0VI6j"}},function(e,t){e.exports=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}()},function(e,t,n){var r=n(13),i=n(14);e.exports=function(){function e(){_classCallCheck(this,e)}var t;return _createClass(e,[{key:"request",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(t,n);case 3:return s=e.sent,e.next=6,s.text();case 6:o=e.sent,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new i("Failed to fetch ".concat(t,". ").concat(e.t0),null,e.t0);case 12:if(s.ok&&!(s.status>300)){e.next=14;break}throw o.includes("id token not generated with cloud directory idp")?new i(""+JSON.parse(o).error_description,s.status):new i("Failed to fetch ".concat(t,". Response=").concat(o),s.status);case 14:return e.prev=14,e.abrupt("return",JSON.parse(o));case 18:if(e.prev=18,e.t1=e.catch(14),""===o){e.next=22;break}return e.abrupt("return",o);case 22:throw new i("Invalid response while trying to fetch ".concat(t,". Response=").concat(o),s.status,e.t1);case 23:case"end":return e.stop()}}),e,null,[[0,9],[14,18]])}))),function(e,n){return t.apply(this,arguments)})}]),e}()},function(e,t,n){var r=n(1),i=n(15);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.jwt,i=void 0===r?n(0):r;_classCallCheck(this,e),this.jwt=i}return _createClass(e,[{key:"decodeAndValidate",value:function(e){var t=e.token,n=e.publicKeys,s=e.issuer,o=e.clientId,a=e.nonce,u=Math.floor(Date.now()/1e3),c=t.split(".");if(3!==c.length)throw new i("Invalid JWT token. Got only ".concat(c.length," parts."));var l=this.jwt.KJUR.jws.JWS.parse(t);if(!l.headerObj)throw new i(r.INVALID_TOKEN);var h=this.getPublicKey(n.keys,l.headerObj.kid),f=this.jwt.KEYUTIL.getKey(h);if(!this.jwt.KJUR.jws.JWS.verify(t,f,{alg:[r.TOKEN_ALG]}))throw new i(r.INVALID_SIGNATURE);if(l.payloadObj.exp<u)throw new i(r.EXPIRED_TOKEN);if(l.headerObj.ver!==r.VERSION)throw new i(r.INVALID_VERSION);if(l.headerObj.alg!==r.TOKEN_ALG)throw new i(r.INVALID_ALGORITHM);if(l.payloadObj.iss!==s)throw new i(r.INVALID_ISSUER);if(!l.payloadObj.aud.includes(o))throw new i(r.INVALID_AUDIENCE);if(a&&(!l.payloadObj.nonce||l.payloadObj.nonce!==a))throw new i(r.INVALID_NONCE);return l.payloadObj}},{key:"getPublicKey",value:function(e,t){for(var n,s=0;s<e.length;s++)e[s].kid===t&&(n=e[s]);if(!n)throw new i(r.MISSING_PUBLIC_KEY);return n}}]),e}()},function(e,t,n){var r=n(6),i=n(3),s=n(16),o=n(18),a=n(20),u=n(4),c=n(1),l=n(2),h=n(0);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.popup,c=void 0===n?new s:n,l=t.iframe,f=void 0===l?new o:l,d=t.openIdConfigResource,p=void 0===d?new a:d,g=t.utils,v=t.requestHandler,y=void 0===v?new i:v,m=t.tokenValidator,w=void 0===m?new u:m,b=t.w,S=void 0===b?window:b,E=t.url,_=void 0===E?URL:E;_classCallCheck(this,e),this.popup=c,this.iframe=f,this.openIdConfigResource=p,this.URL=_,this.utils=g,this.tokenValidator=w,g||(this.utils=new r({openIdConfigResource:this.openIdConfigResource,url:this.URL,popup:this.popup,jsrsasign:h})),this.request=y.request,this.window=S,this.initialized=!1}var t,n,f,d,p,g;return _createClass(e,[{key:"init",value:(g=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.clientId,r=t.discoveryEndpoint,i=t.popup,s=void 0===i?{height:.8*window.screen.height,width:400}:i,n){e.next=3;break}throw new l(c.MISSING_CLIENT_ID);case 3:e.prev=3,new this.URL(r),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(3),new l(c.INVALID_DISCOVERY_ENDPOINT);case 10:return e.next=12,this.openIdConfigResource.init({discoveryEndpoint:r,requestHandler:this.request});case 12:this.popup.init(s),this.clientId=n,this.initialized=!0;case 15:case"end":return e.stop()}}),e,this,[[3,7]])}))),function(e){return g.apply(this,arguments)})},{key:"signin",value:(p=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._validateInitalize(),t=this.openIdConfigResource.getAuthorizationEndpoint(),n=this.window.location.origin,e.abrupt("return",(n||(n=this.window.location.protocol+"//"+this.window.location.hostname+(this.window.location.port?":"+this.window.location.port:"")),this.utils.performOAuthFlowAndGetTokens({origin:n,endpoint:t,clientId:this.clientId})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"silentSignin",value:(d=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,i,s,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._validateInitalize(),t=this.openIdConfigResource.getAuthorizationEndpoint(),n=this.utils.getAuthParamsAndUrl({clientId:this.clientId,origin:this.window.origin,prompt:c.PROMPT,endpoint:t}),r=n.codeVerifier,i=n.nonce,s=n.state,o=n.url,this.iframe.open(o),e.prev=3,e.next=6,this.iframe.waitForMessage({messageType:"authorization_response"});case 6:a=e.sent;case 7:return e.prev=7,this.iframe.remove(),e.finish(7);case 10:return this.utils.verifyMessage({message:a,state:s}),u=a.data.code,e.next=14,this.utils.retrieveTokens({clientId:this.clientId,authCode:u,codeVerifier:r,nonce:i,openId:this.openIdConfigResource,windowOrigin:this.window.origin});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this,[[3,,7,10]])}))),function(){return d.apply(this,arguments)})},{key:"getUserInfo",value:(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._validateInitalize(),"string"==typeof t){e.next=2;break}throw new l(c.INVALID_ACCESS_TOKEN);case 2:return e.next=4,this.request(this.openIdConfigResource.getUserInfoEndpoint(),{headers:{Authorization:"Bearer "+t}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"changePassword",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._validateInitalize(),t&&"string"==typeof t){e.next=2;break}throw new l(c.MISSING_ID_TOKEN);case 2:return e.next=4,this.openIdConfigResource.getPublicKeys();case 4:if(r=e.sent,(i=this.tokenValidator.decodeAndValidate({token:t,publicKeys:r,issuer:this.openIdConfigResource.getIssuer(),clientId:this.clientId})).identities&&i.identities[0]&&i.identities[0].id){e.next=8;break}throw new l(c.INVALID_ID_TOKEN);case 8:if("cloud_directory"===i.identities[0].provider){e.next=10;break}throw new l(c.NOT_CD_USER);case 10:return n=i.identities[0].id,s=this.openIdConfigResource.getIssuer()+c.CHANGE_PASSWORD,e.next=14,this.utils.performOAuthFlowAndGetTokens({userId:n,origin:this.window.origin,clientId:this.clientId,endpoint:s});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"changeDetails",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.accessToken,r=t.idToken,this._validateInitalize(),n||"string"==typeof n){e.next=3;break}throw new l(c.MISSING_ACCESS_TOKEN);case 3:if(r||"string"==typeof r){e.next=5;break}throw new l(c.MISSING_ID_TOKEN);case 5:return i=this.openIdConfigResource.getIssuer()+c.GENERATE_CODE,e.next=8,this.request(i,{headers:{Authorization:"Bearer "+n+" "+r}});case 8:return s=e.sent,o=this.openIdConfigResource.getIssuer()+c.CHANGE_DETAILS,e.abrupt("return",this.utils.performOAuthFlowAndGetTokens({origin:this.window.origin,clientId:this.clientId,endpoint:o,changeDetailsCode:s}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_validateInitalize",value:function(){if(!this.initialized)throw new l(c.FAIL_TO_INITIALIZE)}}]),e}()},function(e,t,n){n(0);var r=n(2),i=n(12),s=n(3),o=n(4),a=n(1);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.requestHandler,r=void 0===n?new s:n,i=t.tokenValidator,a=void 0===i?new o:i,u=t.url,c=void 0===u?URL:u,l=t.openIdConfigResource,h=t.popup,f=t.jsrsasign,d=void 0===f?d:f;_classCallCheck(this,e),this.URL=c,this.request=r.request,this.tokenValidator=a,this.openIdConfigResource=l,this.popup=h,this.rs=d}var t,n;return _createClass(e,[{key:"buildParams",value:function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}},{key:"getRandomString",value:function(e){return this.rs.KJUR.crypto.Util.getRandomHexOfNbytes(e/2)}},{key:"sha256",value:function(e){return this.rs.KJUR.crypto.Util.sha256(e)}},{key:"getPKCEFields",value:function(){var e=this.getRandomString(a.CODE_VERIFIER_LENGTH);return{codeVerifier:e,codeChallenge:this.sha256(e),state:this.getRandomString(a.STATE_LENGTH),nonce:this.getRandomString(a.NONCE_LENGTH)}}},{key:"getAuthParamsAndUrl",value:function(e){var t=e.clientId,n=e.origin,r=e.prompt,i=e.endpoint,s=e.userId,o=e.changeDetailsCode,u=this.getPKCEFields(),c=u.codeVerifier,l=u.codeChallenge,h=u.state,f=u.nonce,d={client_id:t,response_type:a.RESPONSE_TYPE,state:this.rs.stob64(h),code_challenge:this.rs.stob64(l),code_challenge_method:a.CHALLENGE_METHOD,redirect_uri:n,response_mode:a.RESPONSE_MODE,nonce:f,scope:a.SCOPE};return r&&(d.prompt=r),s&&(d.user_id=s),o&&(d.code=o),{codeVerifier:c,nonce:f,state:h,url:i+"?"+this.buildParams(d)}}},{key:"performOAuthFlowAndGetTokens",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,s,o,a,u,c,l,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.origin,i=t.clientId,s=t.endpoint,o=t.changeDetailsCode,a=this.getAuthParamsAndUrl({userId:n,origin:r,clientId:i,endpoint:s,changeDetailsCode:o}),u=a.codeVerifier,c=a.state,l=a.nonce,h=a.url,this.popup.open(),this.popup.navigate(h),e.next=5,this.popup.waitForMessage({messageType:"authorization_response"});case 5:return f=e.sent,this.popup.close(),this.verifyMessage({message:f,state:c}),d=f.data.code,e.next=10,this.retrieveTokens({clientId:i,authCode:d,codeVerifier:u,nonce:l,windowOrigin:r});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"verifyMessage",value:function(e){var t=e.message,n=e.state;if(t.data.error||t.data.error_description)throw new i({description:t.data.error_description,error:t.data.error});if(this.rs.b64utos(t.data.state)!==n)throw new r(a.INVALID_STATE);if(t.origin!==new this.URL(this.openIdConfigResource.getAuthorizationEndpoint()).origin)throw new r(a.INVALID_ORIGIN)}},{key:"retrieveTokens",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,s,o,a,u,c,l,h,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clientId,r=t.authCode,i=t.nonce,s=t.codeVerifier,o=t.windowOrigin,a=this.openIdConfigResource.getIssuer(),u=this.buildParams({grant_type:"authorization_code",redirect_uri:o,code:r,code_verifier:s}),c=this.openIdConfigResource.getTokenEndpoint(),e.next=6,this.request(c,{method:"POST",headers:{Authorization:"Basic "+this.rs.stob64("".concat(n,":").concat(s)),"Content-Type":"application/x-www-form-urlencoded"},body:u});case 6:return l=e.sent,e.next=9,this.openIdConfigResource.getPublicKeys();case 9:return h=e.sent,f=this.tokenValidator.decodeAndValidate({token:l.access_token,publicKeys:h,issuer:a,clientId:n}),d=this.tokenValidator.decodeAndValidate({token:l.id_token,publicKeys:h,issuer:a,clientId:n,nonce:i}),e.abrupt("return",{accessToken:l.access_token,accessTokenPayload:f,idToken:l.id_token,idTokenPayload:d});case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},function(e,t,n){"use strict";(function(e){var r=n(9),i=n(10),s=n(11);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|d(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):f(e,t);if("Buffer"===t.type&&s(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|d(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return M(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var s,o=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(n+u>a&&(n=a-u),s=n;s>=0;s--){for(var h=!0,f=0;f<u;f++)if(c(e,s+f)!==c(t,f)){h=!1;break}if(h)return s}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[n+o]=a}return o}function b(e,t,n,r){return U(M(t,e.length-n),e,n,r)}function S(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return S(e,t,n,r)}function _(e,t,n,r){return U(K(t),e,n,r)}function C(e,t,n,r){return U(function(e,t){for(var n,r,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i.push(n%256),i.push(r);return i}(t,e.length-n),e,n,r)}function x(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,o,a,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[i+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:o=e[i+2],128==(192&(s=e[i+1]))&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+2],a=e[i+3],128==(192&(s=e[i+1]))&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=F)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=F));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(c[h]!==l[h]){s=c[h],o=l[h];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=L(e[s]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-n,2);i<s;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function H(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-n,4);i<s;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function O(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,s){return s||O(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,s){return s||O(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):H(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):H(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):H(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):H(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var o=u.isBuffer(e)?e:M(new u(e,r).toString()),a=o.length;for(s=0;s<n-t;++s)this[s+t]=o[s%a]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function K(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(8))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[1];return 3*(t[0]+n)/4-n},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],a=r[1],u=new s(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),l=0,h=a>0?o-4:o;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(l(e,o,o+16383>a?a:o+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,s=[],o=t;o<n;o+=3)s.push(r[(i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,s=d&(1<<-l)-1,d>>=-l,l+=a;l>0;s=256*s+e[t+h],h+=f,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+h],h+=f,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=c}return(d?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var o,a,u,c=8*s-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(t*u-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[n+d]=255&o,d+=p,o/=256,c-=8);e[n+d-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e){var r,i=e.error,s=e.description;return _classCallCheck(this,n),(r=t.call(this,s||i)).error=i,r.description=s,r}return n}()},function(e,t,n){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,t.default=r.fetch.bind(r),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},function(e,t){e.exports=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e)).status=r,s.originError=i,s}return n}()},function(e,t){e.exports=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}()},function(e,t,n){var r=n(17);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.w,r=void 0===n?window:n;_classCallCheck(this,e),this.window=r}var t;return _createClass(e,[{key:"init",value:function(e){this.popupConfig=e}},{key:"open",value:function(){var e=this.popupConfig.height,t=this.popupConfig.width,n=(window.screen.width-t)/2,i=(window.screen.height-e)/2;if(this.popup=this.window.open("","popup","left=".concat(n,",top=").concat(i,",width=").concat(t,",height=").concat(e,",resizable,scrollbars=yes,status=1")),!this.popup)throw new r("Unable to open popup")}},{key:"navigate",value:function(e){this.popup.location.href=e}},{key:"close",value:function(){this.popup.close()}},{key:"waitForMessage",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.messageType,e.abrupt("return",new Promise((function(e,t){var s=setInterval((function(){i.popup.closed&&(clearInterval(s),t(new r("Popup closed")))}),1e3);window.addEventListener("message",(function(t){t.data&&t.data.type===n&&e(t)}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}()},function(e,t){e.exports=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}()},function(e,t,n){var r=n(19);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.w,r=void 0===n?window:n;_classCallCheck(this,e),this.window=r}var t;return _createClass(e,[{key:"open",value:function(e){this.iFrame=this.window.document.createElement("iframe"),this.iFrame.src=e,this.iFrame.width=0,this.iFrame.height=0,this.window.document.body.appendChild(this.iFrame)}},{key:"remove",value:function(){window.document.body.removeChild(this.iFrame)}},{key:"waitForMessage",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.messageType,e.abrupt("return",new Promise((function(e,t){var i=setInterval((function(){t(new r("Silent sign-in timed out"))}),5e3);window.addEventListener("message",(function(t){t.data&&t.data.type===n&&(clearInterval(i),e(t))}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}()},function(e,t){e.exports=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return n}()},function(e,t,n){var r=n(21);e.exports=function(){function e(){_classCallCheck(this,e)}var t,n;return _createClass(e,[{key:"init",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.discoveryEndpoint,i=t.requestHandler,e.next=3,i(n);case 3:this.openIdConfig=e.sent,s={"x-filter-type":"spa:v"+r.version},this.publicKeys=i(this.getJwksEndpoint(),{headers:s});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getAuthorizationEndpoint",value:function(){return this.openIdConfig.authorization_endpoint}},{key:"getUserInfoEndpoint",value:function(){return this.openIdConfig.userinfo_endpoint}},{key:"getJwksEndpoint",value:function(){return this.openIdConfig.jwks_uri}},{key:"getTokenEndpoint",value:function(){return this.openIdConfig.token_endpoint}},{key:"getIssuer",value:function(){return this.openIdConfig.issuer}},{key:"getPublicKeys",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.publicKeys;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},function(e){e.exports=JSON.parse('{"name":"ibmcloud-appid-js","version":"0.3.2","description":"IBM Cloud App ID SDK for Single Page Applications","keywords":["SPA","SDK","angular","react","javascript","js","ibmcloud","appid","App ID","authentication","authorization","access control","ACL","openid","jwt","PKCE","oauth","single page application"],"scripts":{"build":"webpack","test":"mocha","coverage":"nyc --reporter=lcov mocha","docs":"jsdoc src/index.js src/errors -t node_modules/docdash --readme README.md --destination docs -c jsdoc.json"},"repository":{"type":"git","url":"git+https://github.com/ibm-cloud-security/appid-clientsdk-js.git"},"main":"dist/appid.umd.min.js","license":"Apache-2.0","nyc":{"all":true,"include":["src/*.js"],"exclude":["**/PopupController.js","**/IFrameController.js","**/OpenIDConfigurationResource.js","**/constants.js"]},"dependencies":{"jsrsasign":"^8.0.12"},"devDependencies":{"@babel/cli":"^7.0.0","@babel/core":"^7.5.5","@babel/plugin-transform-runtime":"^7.5.5","@babel/preset-env":"^7.5.5","babel-cli":"^7.0.0-beta.3","chai":"^4.2.0","coveralls":"^3.0.6","docdash":"^1.1.1","gulp-babel":"^8.0.0","jsdoc":"^3.6.3","mocha":"^6.2.0","node-fetch":"^2.6.0","nyc":"^15.0.0","webpack":"^4.39.1","webpack-cli":"^3.3.6"}}')}])},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var i=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function o(e){setTimeout((function(){throw e}),0)}var a={closed:!0,next:function(e){},error:function(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete:function(){}},u=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!==e&&"object"==typeof e}var l,h=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),f=((l=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o)n[o].remove(this);if(r(i))try{i.call(this)}catch(p){t=p instanceof h?d(p.errors):[p]}if(u(s))for(var a=-1,l=s.length;++a<l;){var f=s[a];if(c(f))try{f.unsubscribe()}catch(p){t=t||[],p instanceof h?t=t.concat(d(p.errors)):t.push(p)}}if(t)throw new h(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new l),l);function d(e){return e.reduce((function(e,t){return e.concat(t instanceof h?t.errors:t)}),[])}var p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),g=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;switch(_classCallCheck(this,n),(s=t.call(this)).syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=a;break;case 1:if(!e){s.destination=a;break}if("object"==typeof e){e instanceof n?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(_assertThisInitialized(s))):(s.syncErrorThrowable=!0,s.destination=new v(_assertThisInitialized(s),e));break}default:s.syncErrorThrowable=!0,s.destination=new v(_assertThisInitialized(s),e,r,i)}return s}return _createClass(n,[{key:p,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var i=new n(e,t,r);return i.syncErrorThrowable=!1,i}}]),n}(f),v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,s,o){var u,c;_classCallCheck(this,n),(u=t.call(this))._parentSubscriber=e;var l=_assertThisInitialized(u);return r(i)?c=i:i&&(c=i.next,s=i.error,o=i.complete,i!==a&&(r((l=Object.create(i)).unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(_assertThisInitialized(u)))),u._context=l,u._next=c,u._error=s,u._complete=o,u}return _createClass(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(o(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(g),y="function"==typeof Symbol&&Symbol.observable||"@@observable";function m(e){return e}var w,b=((w=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[p])return e[p]()}return e||t||n?new g(e,t,n):new g(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof g?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=S(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:y,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(r=t).length?m:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r}},{key:"toPromise",value:function(e){var t=this;return new(e=S(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new w(e)},w);function S(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var E,_=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),C=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return _createClass(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(f),x=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).destination=e,r}return n}(g),A=((E=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(n,[{key:p,value:function(){return new x(this)}},{key:"lift",value:function(e){var t=new F(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new _;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new _;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new _;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new _;return _get(_getPrototypeOf(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new _;return this.hasError?(e.error(this.thrownError),f.EMPTY):this.isStopped?(e.complete(),f.EMPTY):(this.observers.push(e),new C(this,e))}},{key:"asObservable",value:function(){var e=new b;return e.source=this,e}}]),n}(b)).create=function(e,t){return new F(e,t)},E),F=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).destination=e,i.source=r,i}return _createClass(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):f.EMPTY}}]),n}(A),k=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this)).parent=e,s.outerValue=r,s.outerIndex=i,s.index=0,s}return _createClass(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(g),I=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var T="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",D=function(e){if(e&&"function"==typeof e[y])return s=e,function(e){var t=s[y]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((t=e)&&"number"==typeof t.length&&"function"!=typeof t)return I(e);var t,n,r,i,s;if((n=e)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return i=e,function(e){return i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,o),e};if(e&&"function"==typeof e[T])return r=e,function(e){for(var t=r[T]();;){var n=void 0;try{n=t.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add((function(){t.return&&t.return()})),e};var a=c(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(a," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))},N=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(g),P=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new R(e,this.project,this.thisArg))}}]),e}(),R=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e)).project=r,s.count=0,s.thisArg=i||_assertThisInitialized(s),s}return _createClass(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(g),H=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new O(e,this.project,this.concurrent))}}]),e}(),O=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(i=t.call(this,e)).project=r,i.concurrent=s,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _createClass(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new k(this,t,n),i=this.destination;i.add(r);var s=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new k(e,n,r);if(!i.closed)return t instanceof b?t.subscribe(i):D(t)(i)}(this,e,void 0,void 0,r);s!==r&&i.add(s)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(N);function B(){return function(e){return e.lift(new V(e))}}var j,V=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new L(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),L=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(g),M={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(j=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _createClass(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new f).add(this.source.subscribe(new K(this.getSubject(),this))),e.closed&&(this._connection=null,e=f.EMPTY)),e}},{key:"refCount",value:function(){return B()(this)}}]),n}(b).prototype)._subscribe},_isComplete:{value:j._isComplete,writable:!0},getSubject:{value:j.getSubject},connect:{value:j.connect},refCount:{value:j.refCount}},K=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).connectable=r,i}return _createClass(n,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(x);function U(){return new A}function q(e,t,n){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var s=_construct(i,t);return o.annotation=s,o;function o(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(s),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var z=q("Inject",(function(e){return{token:e}})),G=q("Optional"),W=q("Self"),Y=q("SkipSelf"),Z=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function J(e){for(var t in e)if(e[t]===J)return t;throw Error("Could not find renamed property on target object.")}function X(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function $(e){var t=e[Q];return t&&t.token===e?t:null}var Q=J({ngInjectableDef:J});function ee(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ee).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var te=J({__forward_ref__:J});function ne(e){return e.__forward_ref__=ne,e.toString=function(){return ee(this())},e}function re(e){var t=e;return"function"==typeof t&&t.hasOwnProperty(te)&&t.__forward_ref__===ne?t():e}var ie="undefined"!=typeof globalThis&&globalThis,se="undefined"!=typeof window&&window,oe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ae="undefined"!=typeof global&&global,ue=ie||ae||se||oe,ce=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),e}(),le=new ce("INJECTOR",-1),he=new Object,fe=/\n/gm,de=J({provide:String,useValue:J}),pe=void 0;function ge(e){var t=pe;return pe=e,t}var ve=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;if(t===he){var n=new Error("NullInjectorError: No provider for ".concat(ee(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}();function ye(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=ee(t);if(t instanceof Array)i=t.map(ee).join(" -> ");else if("object"==typeof t){var s=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ee(a)))}i="{".concat(s.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(fe,"\n  "))}var me=function e(){_classCallCheck(this,e)};function we(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function be(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var Se=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Ee=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ue);function _e(e){return e.ngDebugContext}function Ce(e){return e.ngOriginalError}function xe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Ae=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||xe}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?_e(e)?_e(e):this._findContext(Ce(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Ce(e);t&&Ce(t);)t=Ce(t);return t}}]),e}(),Fe=!0,ke=!1;function Ie(){return ke=!0,Fe}var Te=function(){function e(t){if(_classCallCheck(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(e,[{key:"getInertBodyElement_XHR",value:function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),De=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ne=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Pe(e){return(e=String(e)).match(De)||e.match(Ne)?e:(Ie()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function Re(e){var t,n={},r=_createForOfIteratorHelper(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function He(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];for(var a in o)o.hasOwnProperty(a)&&(e[a]=!0)}return e}var Oe,Be=Re("area,br,col,hr,img,wbr"),je=Re("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ve=Re("rp,rt"),Le=He(Ve,je),Me=He(Be,He(je,Re("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),He(Ve,Re("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Le),Ke=Re("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ue=Re("srcset"),qe=He(Ke,Ue,Re("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Re("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ze=Re("script,style,template"),Ge=function(){function e(){_classCallCheck(this,e),this.sanitizedSomething=!1,this.buf=[]}return _createClass(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!Me.hasOwnProperty(t))return this.sanitizedSomething=!0,!ze.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var s=r.item(i),o=s.name,a=o.toLowerCase();if(qe.hasOwnProperty(a)){var u=s.value;Ke[a]&&(u=Pe(u)),Ue[a]&&(n=u,u=(n=String(n)).split(",").map((function(e){return Pe(e.trim())})).join(", ")),this.buf.push(" ",o,'="',Ze(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();Me.hasOwnProperty(t)&&!Be.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Ze(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t}}]),e}(),We=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ye=/([^\#-~ |!])/g;function Ze(e){return e.replace(/&/g,"&amp;").replace(We,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(Ye,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Je(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Xe=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),$e=function e(){_classCallCheck(this,e)},Qe=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),et=/^url\(([^)]+)\)$/,tt=/([A-Z])/g;function nt(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}var rt=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return it()},e}(),it=function(){},st=new ce("The presence of this token marks an injector as being the root injector."),ot=function(e,t,n){return new ft(e,t,n)},at=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?ot(e,t,""):ot(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=he,e.NULL=new ve,e.ngInjectableDef=X({token:e,providedIn:"any",factory:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.Default;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.Default;if(void 0===pe)throw new Error("inject() must be called from an injection context");return null===pe?function(e,t,n){var r=$(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&Z.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(ee(e),"]"))}(e,0,t):pe.get(e,t&Z.Optional?null:void 0,t)}(e,t)}(le)}}),e.__NG_ELEMENT_ID__=-1,e}(),ut=function(e){return e},ct=[],lt=ut,ht=function(){return Array.prototype.slice.call(arguments)},ft=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.NULL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,e),this.parent=n,this.source=r;var i=this._records=new Map;i.set(at,{token:at,fn:ut,deps:ct,value:this,useNew:!1}),i.set(le,{token:le,fn:ut,deps:ct,value:this,useNew:!1}),function e(t,n){if(n)if((n=re(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw pt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw pt("Unexpected provider",n);var i=re(n.provide),s=function(e){var t=function(e){var t=ct,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var i=6,s=re(n[r]);if(s instanceof Array)for(var o=0,a=s;o<a.length;o++){var u=a[o];u instanceof G||u==G?i|=1:u instanceof Y||u==Y?i&=-3:u instanceof W||u==W?i&=-5:s=u instanceof z?u.token:re(u)}t.push({token:s,options:i})}}else if(e.useExisting)t=[{token:re(e.useExisting),options:6}];else if(!(n||de in e))throw pt("'deps' required",e);return t}(e),n=ut,r=ct,i=!1,s=re(e.provide);if(de in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=re(e.useClass);else{if("function"!=typeof s)throw pt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=s}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var o=t.get(i);if(o){if(o.fn!==ht)throw dt(i)}else t.set(i,o={token:n.provide,deps:[],useNew:!1,fn:ht,value:ct});i=n,o.deps.push({token:i,options:6})}var a=t.get(i);if(a&&a.fn==ht)throw dt(i);t.set(i,s)}}(i,t)}return _createClass(e,[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Default,r=this._records.get(e);try{return function e(t,n,r,i,s,o){try{return function(t,n,r,i,s,o){var a;if(!n||o&Z.SkipSelf)o&Z.Self||(a=i.get(t,s,Z.Default));else{if((a=n.value)==lt)throw Error("\u0275Circular dependency");if(a===ct){n.value=lt;var u=n.useNew,c=n.fn,l=n.deps,h=ct;if(l.length){h=[];for(var f=0;f<l.length;f++){var d=l[f],p=d.options,g=2&p?r.get(d.token):void 0;h.push(e(d.token,g,r,g||4&p?i:at.NULL,1&p?null:at.THROW_IF_NOT_FOUND,Z.Default))}}n.value=a=u?_construct(c,_toConsumableArray(h)):c.apply(void 0,h)}}return a}(t,n,r,i,s,o)}catch(a){throw a instanceof Error||(a=new Error(a)),(a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(t),n&&n.value==lt&&(n.value=ct),a}}(e,r,this._records,this.parent,t,n)}catch(i){return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=ye("\n"+e.message,i,"StaticInjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(i,e,0,this.source)}}},{key:"toString",value:function(){var e=[];return this._records.forEach((function(t,n){return e.push(ee(n))})),"StaticInjector[".concat(e.join(", "),"]")}}]),e}();function dt(e){return pt("Cannot mix multi providers and regular providers",e)}function pt(e,t){return new Error(ye(e,t,"StaticInjectorError"))}var gt=null;function vt(){if(!gt){var e=ue.Symbol;if(e&&e.iterator)gt=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(gt=r)}}return gt}function yt(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function mt(e,t){var n=bt(e),r=bt(t);return n&&r?function(e,t,n){for(var r=e[vt()](),i=t[vt()]();;){var s=r.next(),o=i.next();if(s.done&&o.done)return!0;if(s.done||o.done)return!1;if(!n(s.value,o.value))return!1}}(e,t,mt):!(n||!(e&&("object"==typeof e||"function"==typeof e))||r||!(t&&("object"==typeof t||"function"==typeof t)))||yt(e,t)}var wt=function(){function e(t){_classCallCheck(this,e),this.wrapped=t}return _createClass(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function bt(e){return!!St(e)&&(Array.isArray(e)||!(e instanceof Map)&&vt()in e)}function St(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Et(e){return!!e&&"function"==typeof e.then}var _t=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}(),Ct=function e(){_classCallCheck(this,e)};function xt(e){var t=Error("No component factory found for ".concat(ee(e),". Did you add it to @NgModule.entryComponents?"));return t[At]=e,t}var At="ngComponent",Ft=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw xt(e)}}]),e}(),kt=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new Ft,e}(),It=function(){function e(t,n,r){_classCallCheck(this,e),this._parent=n,this._ngModule=r,this._factories=new Map;for(var i=0;i<t.length;i++){var s=t[i];this._factories.set(s.componentType,s)}}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw xt(e);return new Tt(t,this._ngModule)}}]),e}(),Tt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).factory=e,i.ngModule=r,i.selector=e.selector,i.componentType=e.componentType,i.ngContentSelectors=e.ngContentSelectors,i.inputs=e.inputs,i.outputs=e.outputs,i}return _createClass(n,[{key:"create",value:function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}]),n}(Ct);function Dt(){}var Nt=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return Pt(e)},e}(),Pt=Dt,Rt=function e(){_classCallCheck(this,e)},Ht=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),Ot=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Bt()},e}(),Bt=Dt,jt=new function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("8.2.14"),Vt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return bt(e)}},{key:"create",value:function(e){return new Mt(e)}}]),e}(),Lt=function(e,t){return t},Mt=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Lt}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var s=!n||t&&t.currentIndex<zt(n,r,i)?t:n,o=zt(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);var u=o-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[s.previousIndex]=c-u}}o!==a&&e(s,o,a)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!bt(e))throw new Error("Error trying to diff '".concat(ee(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,s=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var a=0;a<this.length;a++)r=e[a],i=this._trackByFn(a,r),null!==s&&yt(s.trackById,i)?(o&&(s=this._verifyReinsertion(s,r,i,a)),yt(s.item,r)||this._addIdentityChange(s,r)):(s=this._mismatch(s,r,i,a),o=!0),s=s._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[vt()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==s&&yt(s.trackById,i)?(o&&(s=t._verifyReinsertion(s,e,i,n)),yt(s.item,e)||t._addIdentityChange(s,e)):(s=t._mismatch(s,e,i,n),o=!0),s=s._next,n++})),this.length=n;return this._truncate(s),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(yt(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(yt(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Kt(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new qt),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qt),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),Kt=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ut=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&yt(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),qt=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Ut,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function zt(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Gt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||St(e)}},{key:"create",value:function(){return new Wt}}]),e}(),Wt=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||St(e)))throw new Error("Error trying to diff '".concat(ee(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var s=new Yt(e);return this._records.set(e,s),s.currentValue=t,this._addToAdditions(s),s}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){yt(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),Yt=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Zt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Y,new G]]}}}]),e}();return e.ngInjectableDef=X({token:e,providedIn:"root",factory:function(){return new e([new Vt])}}),e}(),Jt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Y,new G]]}}}]),e}();return e.ngInjectableDef=X({token:e,providedIn:"root",factory:function(){return new e([new Gt])}}),e}(),Xt=[new Gt],$t=new Zt([new Vt]),Qt=new Jt(Xt),en=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return tn(e,Nt)},e}(),tn=Dt,nn=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return rn(e,Nt)},e}(),rn=Dt;function sn(e,t,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(t,"'. Current value: '").concat(n,"'.");return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return on(n,t),n}(i,e)}function on(e,t){e.ngDebugContext=t,e.ngErrorLogger=t.logError.bind(t)}function an(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}function un(e,t,n){var r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function cn(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function ln(e,t){return e.nodes[t]}function hn(e,t){return e.nodes[t]}function fn(e,t){return e.nodes[t]}function dn(e,t){return e.nodes[t]}function pn(e,t){return e.nodes[t]}var gn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},vn=function(){},yn=new Map;function mn(e){var t=yn.get(e);return t||(t=ee(e)+"_"+yn.size,yn.set(e,t)),t}function wn(e){return{id:"$$undefined",styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var bn=0;function Sn(e,t,n,r){return!(!(2&e.state)&&yt(e.oldValues[t.bindingIndex+n],r))}function En(e,t,n,r){return!!Sn(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function _n(e,t,n,r){var i=e.oldValues[t.bindingIndex+n];if(1&e.state||!mt(i,r)){var s=t.bindings[n].name;throw sn(gn.createDebugContext(e,t.nodeIndex),"".concat(s,": ").concat(i),"".concat(s,": ").concat(r),0!=(1&e.state))}}function Cn(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function xn(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function An(e,t,n,r){try{return Cn(33554432&e.def.nodes[t].flags?hn(e,t).componentView:e),gn.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function Fn(e){return e.parent?hn(e.parent,e.parentNodeDef.nodeIndex):null}function kn(e){return e.parent?e.parentNodeDef.parent:null}function In(e,t){switch(201347067&t.flags){case 1:return hn(e,t.nodeIndex).renderElement;case 2:return ln(e,t.nodeIndex).renderText}}function Tn(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Dn(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Nn(e){var t={},n=0,r={};return e&&e.forEach((function(e){var i=_slicedToArray(e,2),s=i[0],o=i[1];"number"==typeof s?(t[s]=o,n|=function(e){return 1<<e%32}(s)):r[s]=o})),{matchedQueries:t,references:r,matchedQueryIds:n}}function Pn(e,t){return e.map((function(e){var n,r,i;return Array.isArray(e)?(i=(n=_slicedToArray(e,2))[0],r=n[1]):(i=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&t&&Object.defineProperty(r,"__source",{value:t,configurable:!0}),{flags:i,token:r,tokenKey:mn(r)}}))}function Rn(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Se.Native?hn(e,n.renderParent.nodeIndex).renderElement:void 0:t}var Hn=new WeakMap;function On(e){var t=Hn.get(e);return t||((t=e((function(){return vn}))).factory=e,Hn.set(e,t)),t}function Bn(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(In(e,e.def.lastRenderRootNode))),jn(e,t,0,e.def.nodes.length-1,n,r,i)}function jn(e,t,n,r,i,s,o){for(var a=n;a<=r;a++){var u=e.def.nodes[a];11&u.flags&&Ln(e,u,t,i,s,o),a+=u.childCount}}function Vn(e,t,n,r,i,s){for(var o=e;o&&!Tn(o);)o=o.parent;for(var a=o.parent,u=kn(o),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=a.def.nodes[l];h.ngContentIndex===t&&Ln(a,h,n,r,i,s),l+=h.childCount}if(!a.parent){var f=e.root.projectableNodes[t];if(f)for(var d=0;d<f.length;d++)Mn(e,f[d],n,r,i,s)}}function Ln(e,t,n,r,i,s){if(8&t.flags)Vn(e,t.ngContent.index,n,r,i,s);else{var o=In(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Mn(e,o,n,r,i,s),32&t.bindingFlags&&Mn(hn(e,t.nodeIndex).componentView,o,n,r,i,s)):Mn(e,o,n,r,i,s),16777216&t.flags)for(var a=hn(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<a.length;u++)Bn(a[u],n,r,i,s);1&t.flags&&!t.element.name&&jn(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,s)}}function Mn(e,t,n,r,i,s){var o=e.renderer;switch(n){case 1:o.appendChild(r,t);break;case 2:o.insertBefore(r,t,i);break;case 3:o.removeChild(r,t);break;case 0:s.push(t)}}var Kn=/^:([^:]+):(.+)$/;function Un(e){if(":"===e[0]){var t=e.match(Kn);return[t[1],t[2]]}return["",e]}function qn(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}var zn=new Object,Gn=mn(at),Wn=mn(le),Yn=mn(me);function Zn(e,t,n,r){return n=re(n),{index:-1,deps:Pn(r,ee(t)),flags:e,token:t,value:n}}function Jn(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:at.THROW_IF_NOT_FOUND,s=ge(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(i=null),1&t.flags)return e._parent.get(t.token,i);var o=t.tokenKey;switch(o){case Gn:case Wn:case Yn:return e}var a,u=e._def.providersByKey[o];if(u){var c=e._providers[u.index];return void 0===c&&(c=e._providers[u.index]=Xn(e,u)),c===zn?void 0:c}if((a=$(t.token))&&(n=e,null!=(r=a).providedIn&&(function(e,t){return e._def.modules.indexOf(t)>-1}(n,r.providedIn)||"root"===r.providedIn&&n._def.isRoot))){var l=e._providers.length;return e._def.providers[l]=e._def.providersByKey[t.tokenKey]={flags:5120,value:a.factory,deps:[],index:l,token:t.token},e._providers[l]=zn,e._providers[l]=Xn(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?i:e._parent.get(t.token,i)}finally{ge(s)}}function Xn(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(Jn(e,n[0]));case 2:return new t(Jn(e,n[0]),Jn(e,n[1]));case 3:return new t(Jn(e,n[0]),Jn(e,n[1]),Jn(e,n[2]));default:for(var i=new Array(r),s=0;s<r;s++)i[s]=Jn(e,n[s]);return _construct(t,i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(Jn(e,n[0]));case 2:return t(Jn(e,n[0]),Jn(e,n[1]));case 3:return t(Jn(e,n[0]),Jn(e,n[1]),Jn(e,n[2]));default:for(var i=Array(r),s=0;s<r;s++)i[s]=Jn(e,n[s]);return t.apply(void 0,i)}}(e,t.value,t.deps);break;case 2048:n=Jn(e,t.deps[0]);break;case 256:n=t.value}return n===zn||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?zn:n}function $n(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,be(n,t),gn.dirtyParentQueries(r),er(r),r}function Qn(e,t,n){var r=t?In(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),s=n.renderer.nextSibling(r);Bn(n,2,i,s,void 0)}function er(e){Bn(e,3,null,null,void 0)}var tr=new Object;var nr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s,o,a){var u;return _classCallCheck(this,n),(u=t.call(this)).selector=e,u.componentType=r,u._inputs=s,u._outputs=o,u.ngContentSelectors=a,u.viewDefFactory=i,u}return _createClass(n,[{key:"create",value:function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var i=On(this.viewDefFactory),s=i.nodes[0].element.componentProvider.nodeIndex,o=gn.createRootView(e,t||[],n,i,r,tr),a=fn(o,s).instance;return n&&o.renderer.setAttribute(hn(o,0).renderElement,"ng-version",jt.full),new rr(o,new ar(o),a)}},{key:"inputs",get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e}},{key:"outputs",get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}}]),n}(Ct),rr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this))._view=e,s._viewRef=r,s._component=i,s._elDef=s._view.def.nodes[0],s.hostView=r,s.changeDetectorRef=r,s.instance=i,s}return _createClass(n,[{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(e){this._viewRef.onDestroy(e)}},{key:"location",get:function(){return new Nt(hn(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new hr(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}}]),n}(function(){return function e(){_classCallCheck(this,e)}}());function ir(e,t,n){return new sr(e,t,n)}var sr=function(){function e(t,n,r){_classCallCheck(this,e),this._view=t,this._elDef=n,this._data=r,this._embeddedViews=[]}return _createClass(e,[{key:"clear",value:function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=$n(this._data,e);gn.destroyView(t)}}},{key:"get",value:function(e){var t=this._embeddedViews[e];if(t){var n=new ar(t);return n.attachToViewContainerRef(this),n}return null}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var s=n||this.parentInjector;i||e instanceof Tt||(i=s.get(me));var o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}},{key:"insert",value:function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,s,o,a=e;return n=this._view,r=this._data,i=t,s=a._view,o=r.viewContainer._embeddedViews,null==i&&(i=o.length),s.viewContainerParent=n,we(o,i,s),function(e,t){var n=Fn(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,t){if(!(4&t.flags)){e.nodeFlags|=4,t.flags|=4;for(var n=t.parent;n;)n.childFlags|=4,n=n.parent}}(t.parent.def,t.parentNodeDef)}}(r,s),gn.dirtyParentQueries(s),Qn(r,i>0?o[i-1]:null,s),a.attachToViewContainerRef(this),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,s,o,a=this._embeddedViews.indexOf(e._view);return n=this._data,r=a,i=t,s=n.viewContainer._embeddedViews,o=s[r],be(s,r),null==i&&(i=s.length),we(s,i,o),gn.dirtyParentQueries(o),er(o),Qn(n,i>0?s[i-1]:null,o),e}},{key:"indexOf",value:function(e){return this._embeddedViews.indexOf(e._view)}},{key:"remove",value:function(e){var t=$n(this._data,e);t&&gn.destroyView(t)}},{key:"detach",value:function(e){var t=$n(this._data,e);return t?new ar(t):null}},{key:"element",get:function(){return new Nt(this._data.renderElement)}},{key:"injector",get:function(){return new hr(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=kn(e),e=e.parent;return e?new hr(e,t):new hr(this._view,null)}},{key:"length",get:function(){return this._embeddedViews.length}}]),e}();function or(e){return new ar(e)}var ar=function(){function e(t){_classCallCheck(this,e),this._view=t,this._viewContainerRef=null,this._appRef=null}return _createClass(e,[{key:"markForCheck",value:function(){Cn(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{gn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}},{key:"checkNoChanges",value:function(){gn.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),gn.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,er(this._view),gn.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"rootNodes",get:function(){return Bn(this._view,0,void 0,void 0,e=[]),e;var e}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}}]),e}();function ur(e,t){return new cr(e,t)}var cr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this))._parentView=e,i._def=r,i}return _createClass(n,[{key:"createEmbeddedView",value:function(e){return new ar(gn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}},{key:"elementRef",get:function(){return new Nt(hn(this._parentView,this._def.nodeIndex).renderElement)}}]),n}(en);function lr(e,t){return new hr(e,t)}var hr=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.elDef=n}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.THROW_IF_NOT_FOUND;return gn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:mn(e)},t)}}]),e}();function fr(e){return new dr(e.renderer)}var dr=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"selectRootElement",value:function(e){return this.delegate.selectRootElement(e)}},{key:"createElement",value:function(e,t){var n=_slicedToArray(Un(t),2),r=n[0],i=n[1],s=this.delegate.createElement(i,r);return e&&this.delegate.appendChild(e,s),s}},{key:"createViewRoot",value:function(e){return e}},{key:"createTemplateAnchor",value:function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}},{key:"createText",value:function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}},{key:"projectNodes",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}},{key:"attachViewAfter",value:function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}},{key:"detachView",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}},{key:"destroyView",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"listenGlobal",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"setElementProperty",value:function(e,t,n){this.delegate.setProperty(e,t,n)}},{key:"setElementAttribute",value:function(e,t,n){var r=_slicedToArray(Un(t),2),i=r[0],s=r[1];null!=n?this.delegate.setAttribute(e,s,n,i):this.delegate.removeAttribute(e,s,i)}},{key:"setBindingDebugInfo",value:function(e,t,n){}},{key:"setElementClass",value:function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}},{key:"setElementStyle",value:function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}},{key:"invokeElementMethod",value:function(e,t,n){e[t].apply(e,n)}},{key:"setText",value:function(e,t){this.delegate.setValue(e,t)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),e}();function pr(e,t,n,r){return new gr(e,t,n,r)}var gr=function(){function e(t,n,r,i){_classCallCheck(this,e),this._moduleType=t,this._parent=n,this._bootstrapComponents=r,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Xn(e,i))}}(this)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Default,r=0;return n&Z.SkipSelf?r|=1:n&Z.Self&&(r|=4),Jn(this,{token:e,tokenKey:mn(e),flags:r},t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(ee(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var s=e._providers[i];if(s&&s!==zn){var o=s.ngOnDestroy;"function"!=typeof o||r.has(s)||(o.apply(s),r.add(s))}}}(this),this._destroyListeners.forEach((function(e){return e()}))}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(kt)}}]),e}(),vr=mn((function e(){_classCallCheck(this,e)})),yr=mn(Ot),mr=mn(Nt),wr=mn(nn),br=mn(en),Sr=mn(rt),Er=mn(at),_r=mn(le);function Cr(e,t,n,r,i,s,o,a){var u=[];if(o)for(var c in o){var l=_slicedToArray(o[c],2),h=l[0],f=l[1];u[h]={flags:8,name:c,nonMinifiedName:f,ns:null,securityContext:null,suffix:null}}var d=[];if(a)for(var p in a)d.push({type:1,propName:p,target:null,eventName:a[p]});return Ar(e,t|=16384,n,r,i,i,s,u,d)}function xr(e,t,n,r,i){return Ar(-1,e,t,0,n,r,i)}function Ar(e,t,n,r,i,s,o,a,u){var c=Nn(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),a||(a=[]),s=re(s);var d=Pn(o,ee(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:qn(a),outputs:u,element:null,provider:{token:i,value:s,deps:d},text:null,query:null,ngContent:null}}function Fr(e,t){return Dr(e,t)}function kr(e,t){for(var n=e;n.parent&&!Tn(n);)n=n.parent;return Nr(n.parent,kn(n),!0,t.provider.value,t.provider.deps)}function Ir(e,t){var n,r=Nr(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var i=0;i<t.outputs.length;i++){var s=t.outputs[i],o=r[s.propName];if(!(n=o)||"function"!=typeof n.subscribe)throw new Error("@Output ".concat(s.propName," not initialized in '").concat(r.constructor.name,"'."));var a=o.subscribe(Tr(e,t.parent.nodeIndex,s.eventName));e.disposables[t.outputIndex+i]=a.unsubscribe.bind(a)}return r}function Tr(e,t,n){return function(r){return An(e,t,n,r)}}function Dr(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return Nr(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){var s=i.length;switch(s){case 0:return r();case 1:return r(Rr(e,t,n,i[0]));case 2:return r(Rr(e,t,n,i[0]),Rr(e,t,n,i[1]));case 3:return r(Rr(e,t,n,i[0]),Rr(e,t,n,i[1]),Rr(e,t,n,i[2]));default:for(var o=Array(s),a=0;a<s;a++)o[a]=Rr(e,t,n,i[a]);return r.apply(void 0,o)}}(e,t.parent,n,r.value,r.deps);case 2048:return Rr(e,t.parent,n,r.deps[0]);case 256:return r.value}}function Nr(e,t,n,r,i){var s=i.length;switch(s){case 0:return new r;case 1:return new r(Rr(e,t,n,i[0]));case 2:return new r(Rr(e,t,n,i[0]),Rr(e,t,n,i[1]));case 3:return new r(Rr(e,t,n,i[0]),Rr(e,t,n,i[1]),Rr(e,t,n,i[2]));default:for(var o=new Array(s),a=0;a<s;a++)o[a]=Rr(e,t,n,i[a]);return _construct(r,o)}}var Pr={};function Rr(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:at.THROW_IF_NOT_FOUND;if(8&r.flags)return r.token;var s=e;2&r.flags&&(i=null);var o=r.tokenKey;o===Sr&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var a=e;a;){if(t)switch(o){case vr:return fr(Hr(a,t,n));case yr:return Hr(a,t,n).renderer;case mr:return new Nt(hn(a,t.nodeIndex).renderElement);case wr:return hn(a,t.nodeIndex).viewContainer;case br:if(t.element.template)return hn(a,t.nodeIndex).template;break;case Sr:return or(Hr(a,t,n));case Er:case _r:return lr(a,t);default:var u=(n?t.element.allProviders:t.element.publicProviders)[o];if(u){var c=fn(a,u.nodeIndex);return c||(c={instance:Dr(a,u)},a.nodes[u.nodeIndex]=c),c.instance}}n=Tn(a),t=kn(a),a=a.parent,4&r.flags&&(a=null)}var l=s.root.injector.get(r.token,Pr);return l!==Pr||i===Pr?l:s.root.ngModule.injector.get(r.token,i)}function Hr(e,t,n){var r;if(n)r=hn(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!Tn(r);)r=r.parent;return r}function Or(e,t,n,r,i,s){if(32768&n.flags){var o=hn(e,n.parent.nodeIndex).componentView;2&o.def.flags&&(o.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){s=s||{};var a=wt.unwrap(e.oldValues[n.bindingIndex+r]);s[n.bindings[r].nonMinifiedName]=new _t(a,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,s}function Br(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,i=0;i<n.length;i++){var s=n[i],o=s.parent;for(!o&&s.flags&t&&Vr(e,i,s.flags&t,r++),0==(s.childFlags&t)&&(i+=s.childCount);o&&1&o.flags&&i===o.nodeIndex+o.childCount;)o.directChildFlags&t&&(r=jr(e,o,t,r)),o=o.parent}}function jr(e,t,n,r){for(var i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){var s=e.def.nodes[i];s.flags&n&&Vr(e,i,s.flags&n,r++),i+=s.childCount}return r}function Vr(e,t,n,r){var i=fn(e,t);if(i){var s=i.instance;s&&(gn.setCurrentNode(e,t),1048576&n&&cn(e,512,r)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&cn(e,768,r)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}}var Lr=new ce("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Ee}}),Mr={},Kr=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),Ur=void 0,qr=["en",[["a","p"],["AM","PM"],Ur],[["AM","PM"],Ur,Ur],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ur,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ur,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ur,"{1} 'at' {0}",Ur],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],zr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,n),(e=t.call(this)).__isAsync=r,e}return _createClass(n,[{key:"emit",value:function(e){_get(_getPrototypeOf(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,s=function(e){return null},o=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(s=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(o=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(s=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),r&&(o=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var a=_get(_getPrototypeOf(n.prototype),"subscribe",this).call(this,i,s,o);return e instanceof f&&e.add(a),a}}]),n}(A);function Gr(){return this._results[vt()]()}var Wr=function(){function e(){_classCallCheck(this,e),this.dirty=!0,this._results=[],this.changes=new zr,this.length=0;var t=vt(),n=e.prototype;n[t]||(n[t]=Gr)}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),Yr=new ce("Application Initializer"),Zr=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Et(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}(),Jr=new ce("AppId");function Xr(){return"".concat($r()).concat($r()).concat($r())}function $r(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Qr=new ce("Platform Initializer"),ei=new ce("Platform ID"),ti=new ce("appBootstrapListener"),ni=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}(),ri=new ce("LocaleId");function ii(){throw new Error("Runtime compiler is not loaded")}var si,oi,ai=ii,ui=ii,ci=ii,li=ii,hi=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=ai,this.compileModuleAsync=ui,this.compileModuleAndAllComponentsSync=ci,this.compileModuleAndAllComponentsAsync=li}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}(),fi=function e(){_classCallCheck(this,e)};var di,pi=!(!(di=ue.wtf)||(si=di.trace,!si)||(oi=si.events,0));function gi(e,t){return null}var vi=pi?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return oi.createScope(e,t)}:function(e,t){return gi},yi=pi?function(e,t){return si.leaveScope(e,t),t}:function(e,t){return t},mi=Promise.resolve(0);function wi(e){"undefined"==typeof Zone?mi.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var bi=function(){function e(t){var n,r=t.enableLongStackTrace,i=void 0!==r&&r;if(_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zr(!1),this.onMicrotaskEmpty=new zr(!1),this.onStable=new zr(!1),this.onError=new zr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,r,i,s,o){try{return Ci(n),e.invokeTask(r,i,s,o)}finally{xi(n)}},onInvoke:function(e,t,r,i,s,o,a){try{return Ci(n),e.invoke(r,i,s,o,a)}finally{xi(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,_i(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Ei,Si,Si);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function Si(){}var Ei={};function _i(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function Ci(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function xi(e){e._nesting--,_i(e)}var Ai,Fi=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zr,this.onMicrotaskEmpty=new zr,this.onStable=new zr,this.onError=new zr}return _createClass(e,[{key:"run",value:function(e){return e()}},{key:"runGuarded",value:function(e){return e()}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e){return e()}}]),e}(),ki=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){bi.assertNotInAngularZone(),wi((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())wi((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}(),Ii=function(){function e(){_classCallCheck(this,e),this._applications=new Map,Ti.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ti.findTestabilityInTree(this,e,t)}}]),e}(),Ti=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Di=new ce("AllowMultipleToken"),Ni=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function Pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+t,i=new ce(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=Ri();if(!s||s.injector.get(Di,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(Ai&&!Ai.destroyed&&!Ai.injector.get(Di,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ai=e.get(Hi);var t=e.get(Qr,null);t&&t.forEach((function(e){return e()}))}(at.create({providers:o,name:r}))}return function(e){var t=Ri();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Ri(){return Ai&&!Ai.destroyed?Ai:null}var Hi=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r=this,i="noop"===(n=t?t.ngZone:void 0)?new Fi:("zone.js"===n?void 0:n)||new bi({enableLongStackTrace:Ie()}),s=[{provide:bi,useValue:i}];return i.run((function(){var t=at.create({providers:s,parent:r.injector,name:e.moduleType.name}),n=e.create(t),o=n.injector.get(Ae,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return Vi(r._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(e){o.handleError(e)}})})),function(e,t,i){try{var s=((o=n.injector.get(Zr)).runInitializers(),o.donePromise.then((function(){return r._moduleDoBootstrap(n),n})));return Et(s)?s.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):s}catch(a){throw t.runOutsideAngular((function(){return e.handleError(a)})),a}var o}(o,i)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Oi({},n);return function(e,t,n){return e.get(fi).createCompiler([t]).compileModuleAsync(n)}(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(ji);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(ee(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function Oi(e,t){return Array.isArray(t)?t.reduce(Oi,e):Object.assign({},e,t)}var Bi,ji=((Bi=function(){function e(t,n,r,i,s,o){var a=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ie(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run((function(){a.tick()}))}});var u=new b((function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular((function(){e.next(a._stable),e.complete()}))})),c=new b((function(e){var t;a._zone.runOutsideAngular((function(){t=a._zone.onStable.subscribe((function(){bi.assertNotInAngularZone(),wi((function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,e.next(!0))}))}))}));var n=a._zone.onUnstable.subscribe((function(){bi.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=Number.POSITIVE_INFINITY,s=null,o=t[t.length-1];return(r=o)&&"function"==typeof r.schedule?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof o&&(i=t.pop()),null===s&&1===t.length&&t[0]instanceof b?t[0]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof n?function(i){return i.pipe(e((function(e,r){return(i=t(e,r),i instanceof b?i:new b(D(i))).pipe(function(e,t){return function(t){return t.lift(new P(e,void 0))}}((function(t,i){return n(e,t,r,i)})));var i}),r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new H(t,r))})}(m,e)}(i)(function(e,t){return t?function(e,t){return new b((function(n){var r=new f,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}(e,t):new b(I(e))}(t,s))}(u,c.pipe((function(e){return B()((t=U,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,M);return r.source=e,r.subjectFactory=n,r})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Ct?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n instanceof Tt?null:this._injector.get(me),s=n.create(at.NULL,[],t||n.selector,i);s.onDestroy((function(){r._unloadComponent(s)}));var o=s.injector.get(ki,null);return o&&s.injector.get(Ii).registerApplication(s.location.nativeElement,o),this._loadComponent(s),Ie()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0;var r,i=_createForOfIteratorHelper(this._views);try{for(i.s();!(r=i.n()).done;)r.value.detectChanges()}catch(a){i.e(a)}finally{i.f()}if(this._enforceNoNewChanges){var s,o=_createForOfIteratorHelper(this._views);try{for(o.s();!(s=o.n()).done;)s.value.checkNoChanges()}catch(a){o.e(a)}finally{o.f()}}}catch(u){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(u)}))}finally{this._runningTick=!1,yi(n)}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Vi(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ti,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),Vi(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}())._tickScope=vi("ApplicationRef#tick()"),Bi);function Vi(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Li=function e(t,n){_classCallCheck(this,e),this.name=t,this.callback=n},Mi=function(){function e(t,n,r){_classCallCheck(this,e),this.listeners=[],this.parent=null,this._debugContext=r,this.nativeNode=t,n&&n instanceof Ki&&n.addChild(this)}return _createClass(e,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),e}(),Ki=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e,r,i)).properties={},s.attributes={},s.classes={},s.styles={},s.childNodes=[],s.nativeElement=e,s}return _createClass(n,[{key:"addChild",value:function(e){e&&(this.childNodes.push(e),e.parent=this)}},{key:"removeChild",value:function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}},{key:"insertChildrenAfter",value:function(e,t){var n,r=this,i=this.childNodes.indexOf(e);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(_toConsumableArray(t))),t.forEach((function(t){t.parent&&t.parent.removeChild(t),e.parent=r})))}},{key:"insertBefore",value:function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}},{key:"query",value:function(e){return this.queryAll(e)[0]||null}},{key:"queryAll",value:function(e){var t=[];return function e(t,r,i){t.childNodes.forEach((function(t){t instanceof n&&(r(t)&&i.push(t),e(t,r,i))}))}(this,e,t),t}},{key:"queryAllNodes",value:function(e){var t=[];return function e(t,r,i){t instanceof n&&t.childNodes.forEach((function(t){r(t)&&i.push(t),t instanceof n&&e(t,r,i)}))}(this,e,t),t}},{key:"triggerEventHandler",value:function(e,t){this.listeners.forEach((function(n){n.name==e&&n.callback(t)}))}},{key:"children",get:function(){return this.childNodes.filter((function(e){return e instanceof n}))}}]),n}(Mi),Ui=new Map,qi=function(e){return Ui.get(e)||null};function zi(e){Ui.set(e.nativeNode,e)}var Gi=Pi(null,"core",[{provide:ei,useValue:"unknown"},{provide:Hi,deps:[at]},{provide:Ii,deps:[]},{provide:ni,deps:[]}]);function Wi(){return $t}function Yi(){return Qt}function Zi(e){return e||"en-US"}function Ji(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}var Xi=function e(t){_classCallCheck(this,e)};function $i(e,t,n,r,i,s){var o,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;l||(l=vn);var d=Nn(n),p=d.matchedQueries,g=d.references,v=d.matchedQueryIds,y=null,m=null;s&&(y=(o=_slicedToArray(Un(s),2))[0],m=o[1]),u=u||[];for(var w=new Array(u.length),b=0;b<u.length;b++){var S=_slicedToArray(u[b],3),E=S[0],_=S[1],C=S[2],x=Un(_),A=_slicedToArray(x,2),F=A[0],k=A[1],I=void 0,T=void 0;switch(15&E){case 4:T=C;break;case 1:case 8:I=C}w[b]={flags:E,ns:F,name:k,nonMinifiedName:k,securityContext:I,suffix:T}}c=c||[];for(var D=new Array(c.length),N=0;N<c.length;N++){var P=_slicedToArray(c[N],2),R=P[0],H=P[1];D[N]={type:0,target:R,eventName:H,propName:null}}var O=(a=a||[]).map((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1],i=_slicedToArray(Un(n),2);return[i[0],i[1],r]}));return f=function(e){if(e&&"$$undefined"===e.id){var t=null!=e.encapsulation&&e.encapsulation!==Se.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+bn++:"$$empty"}return e&&"$$empty"===e.id&&(e=null),e||null}(f),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:v,references:g,ngContentIndex:r,childCount:i,bindings:w,bindingFlags:qn(w),outputs:D,element:{ns:y,name:m,attrs:O,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:l||vn},provider:null,text:null,query:null,ngContent:null}}function Qi(e,t,n){var r,i=n.element,s=e.root.selectorOrNode,o=e.renderer;if(e.parent||!s){r=i.name?o.createElement(i.name,i.ns):o.createComment("");var a=Rn(e,t,n);a&&o.appendChild(a,r)}else r=o.selectRootElement(s,!!i.componentRendererType&&i.componentRendererType.encapsulation===Se.ShadowDom);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=_slicedToArray(i.attrs[u],3),l=c[0],h=c[1],f=c[2];o.setAttribute(r,h,f,l)}return r}function es(e,t,n,r){for(var i=0;i<n.outputs.length;i++){var s=n.outputs[i],o=ts(e,n.nodeIndex,(h=s.eventName,(l=s.target)?"".concat(l,":").concat(h):h)),a=s.target,u=e;"component"===s.target&&(a=null,u=t);var c=u.renderer.listen(a||r,s.eventName,o);e.disposables[n.outputIndex+i]=c}var l,h}function ts(e,t,n){return function(r){return An(e,t,n,r)}}function ns(e,t,n,r){if(!En(e,t,n,r))return!1;var i=t.bindings[n],s=hn(e,t.nodeIndex),o=s.renderElement,a=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,s){var o=t.securityContext,a=o?e.root.sanitizer.sanitize(o,s):s;a=null!=a?a.toString():null;var u=e.renderer;null!=s?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(e,i,o,i.ns,a,r);break;case 2:!function(e,t,n,r){var i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,o,a,r);break;case 4:!function(e,t,n,r,i){var s=e.root.sanitizer.sanitize(Xe.STYLE,i);if(null!=s){s=s.toString();var o=t.suffix;null!=o&&(s+=o)}else s=null;var a=e.renderer;null!=s?a.setStyle(n,r,s):a.removeStyle(n,r)}(e,i,o,a,r);break;case 8:!function(e,t,n,r,i){var s=t.securityContext,o=s?e.root.sanitizer.sanitize(s,i):i;e.renderer.setProperty(n,r,o)}(33554432&t.flags&&32&i.flags?s.componentView:e,i,o,a,r)}return!0}function rs(e){for(var t=e.def.nodeMatchedQueries;e.parent&&Dn(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++){var s=e.def.nodes[i];67108864&s.flags&&536870912&s.flags&&(s.query.filterId&t)===s.query.filterId&&pn(e,i).setDirty(),!(1&s.flags&&i+s.childCount<n.nodeIndex)&&67108864&s.childFlags&&536870912&s.childFlags||(i+=s.childCount)}}if(134217728&e.def.nodeFlags)for(var o=0;o<e.def.nodes.length;o++){var a=e.def.nodes[o];134217728&a.flags&&536870912&a.flags&&pn(e,o).setDirty(),o+=a.childCount}}function is(e,t){var n=pn(e,t.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&t.flags){var s=t.parent.parent;i=ss(e,s.nodeIndex,s.nodeIndex+s.childCount,t.query,[]),r=fn(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=ss(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);for(var o=t.query.bindings,a=!1,u=0;u<o.length;u++){var c=o[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,a=!0}r[c.propName]=l}a&&n.notifyOnChanges()}}function ss(e,t,n,r,i){for(var s=t;s<=n;s++){var o=e.def.nodes[s],a=o.matchedQueries[r.id];if(null!=a&&i.push(os(e,o,a)),1&o.flags&&o.element.template&&(o.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=hn(e,s);if((o.childMatchedQueries&r.filterId)===r.filterId&&(ss(e,s+1,s+o.childCount,r,i),s+=o.childCount),16777216&o.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=Fn(h);f&&f===u&&ss(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(var p=0;p<d.length;p++){var g=d[p];ss(g,0,g.def.nodes.length-1,r,i)}}(o.childMatchedQueries&r.filterId)!==r.filterId&&(s+=o.childCount)}return i}function os(e,t,n){if(null!=n)switch(n){case 1:return hn(e,t.nodeIndex).renderElement;case 0:return new Nt(hn(e,t.nodeIndex).renderElement);case 2:return hn(e,t.nodeIndex).template;case 3:return hn(e,t.nodeIndex).viewContainer;case 4:return fn(e,t.nodeIndex).instance}}function as(e,t,n){var r=Rn(e,t,n);r&&Vn(e,n.ngContent.index,1,r,null,void 0)}function us(e,t,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function cs(e,t,n){var r,i=e.renderer;r=i.createText(n.text.prefix);var s=Rn(e,t,n);return s&&i.appendChild(s,r),{renderText:r}}function ls(e,t){return(null!=e?e.toString():"")+t.suffix}function hs(e,t,n,r){for(var i=0,s=0,o=0,a=0,u=0,c=null,l=null,h=!1,f=!1,d=null,p=0;p<t.length;p++){var g=t[p];if(g.nodeIndex=p,g.parent=c,g.bindingIndex=i,g.outputIndex=s,g.renderParent=l,o|=g.flags,u|=g.matchedQueryIds,g.element){var v=g.element;v.publicProviders=c?c.element.publicProviders:Object.create(null),v.allProviders=v.publicProviders,h=!1,f=!1,g.element.template&&(u|=g.element.template.nodeMatchedQueries)}if(ds(c,g,t.length),i+=g.bindings.length,s+=g.outputs.length,!l&&3&g.flags&&(d=g),20224&g.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var y=0!=(32768&g.flags);0==(8192&g.flags)||y?c.element.publicProviders[mn(g.provider.token)]=g:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[mn(g.provider.token)]=g),y&&(c.element.componentProvider=g)}if(c?(c.childFlags|=g.flags,c.directChildFlags|=g.flags,c.childMatchedQueries|=g.matchedQueryIds,g.element&&g.element.template&&(c.childMatchedQueries|=g.element.template.nodeMatchedQueries)):a|=g.flags,g.childCount>0)c=g,fs(g)||(l=g);else for(;c&&p===c.nodeIndex+c.childCount;){var m=c.parent;m&&(m.childFlags|=c.childFlags,m.childMatchedQueries|=c.childMatchedQueries),l=(c=m)&&fs(c)?c.renderParent:c}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||vn,updateRenderer:r||vn,handleEvent:function(e,n,r,i){return t[n].element.handleEvent(e,r,i)},bindingCount:i,outputCount:s,lastRenderRootNode:d}}function fs(e){return 0!=(1&e.flags)&&null===e.element.name}function ds(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(t.nodeIndex,"!"))}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(t.nodeIndex,"!"));if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(t.nodeIndex,"!"));if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(t.nodeIndex,"!"))}if(t.childCount){var i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(t.nodeIndex,"!"))}}function ps(e,t,n,r){var i=ys(e.root,e.renderer,e,t,n);return ms(i,e.component,r),ws(i),i}function gs(e,t,n){var r=ys(e,e.renderer,null,null,t);return ms(r,n,n),ws(r),r}function vs(e,t,n,r){var i,s=t.element.componentRendererType;return i=s?e.root.rendererFactory.createRenderer(r,s):e.root.renderer,ys(e.root,i,e,t.element.componentProvider,n)}function ys(e,t,n,r,i){var s=new Array(i.nodes.length),o=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:s,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:o,initIndex:-1}}function ms(e,t,n){e.component=t,e.context=n}function ws(e){var t;Tn(e)&&(t=hn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,i=0;i<n.nodes.length;i++){var s=n.nodes[i],o=void 0;switch(gn.setCurrentNode(e,i),201347067&s.flags){case 1:var a=Qi(e,t,s),u=void 0;if(33554432&s.flags){var c=On(s.element.componentView);u=gn.createComponentView(e,s,c,a)}es(e,u,s,a),o={renderElement:a,componentView:u,viewContainer:null,template:s.element.template?ur(e,s):void 0},16777216&s.flags&&(o.viewContainer=ir(e,s,o));break;case 2:o=cs(e,t,s);break;case 512:case 1024:case 2048:case 256:(o=r[i])||4096&s.flags||(o={instance:Fr(e,s)});break;case 16:o={instance:kr(e,s)};break;case 16384:(o=r[i])||(o={instance:Ir(e,s)}),32768&s.flags&&ms(hn(e,s.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Wr;break;case 8:as(e,t,s),o=void 0}r[i]=o}ks(e,Fs.CreateViewNodes),Ns(e,201326592,268435456,0)}function bs(e){_s(e),gn.updateDirectives(e,1),Is(e,Fs.CheckNoChanges),gn.updateRenderer(e,1),ks(e,Fs.CheckNoChanges),e.state&=-97}function Ss(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,un(e,0,256),_s(e),gn.updateDirectives(e,0),Is(e,Fs.CheckAndUpdate),Ns(e,67108864,536870912,0);var t=un(e,256,512);Br(e,2097152|(t?1048576:0)),gn.updateRenderer(e,0),ks(e,Fs.CheckAndUpdate),Ns(e,134217728,536870912,0),Br(e,8388608|((t=un(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,un(e,768,1024)}function Es(e,t,n,r,i,s,o,a,u,c,l,h,f){return 0===n?function(e,t,n,r,i,s,o,a,u,c,l,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,s,o,a,u,c,l,h){var f=t.bindings.length,d=!1;return f>0&&ns(e,t,0,n)&&(d=!0),f>1&&ns(e,t,1,r)&&(d=!0),f>2&&ns(e,t,2,i)&&(d=!0),f>3&&ns(e,t,3,s)&&(d=!0),f>4&&ns(e,t,4,o)&&(d=!0),f>5&&ns(e,t,5,a)&&(d=!0),f>6&&ns(e,t,6,u)&&(d=!0),f>7&&ns(e,t,7,c)&&(d=!0),f>8&&ns(e,t,8,l)&&(d=!0),f>9&&ns(e,t,9,h)&&(d=!0),d}(e,t,n,r,i,s,o,a,u,c,l,h);case 2:return function(e,t,n,r,i,s,o,a,u,c,l,h){var f=!1,d=t.bindings,p=d.length;if(p>0&&En(e,t,0,n)&&(f=!0),p>1&&En(e,t,1,r)&&(f=!0),p>2&&En(e,t,2,i)&&(f=!0),p>3&&En(e,t,3,s)&&(f=!0),p>4&&En(e,t,4,o)&&(f=!0),p>5&&En(e,t,5,a)&&(f=!0),p>6&&En(e,t,6,u)&&(f=!0),p>7&&En(e,t,7,c)&&(f=!0),p>8&&En(e,t,8,l)&&(f=!0),p>9&&En(e,t,9,h)&&(f=!0),f){var g=t.text.prefix;p>0&&(g+=ls(n,d[0])),p>1&&(g+=ls(r,d[1])),p>2&&(g+=ls(i,d[2])),p>3&&(g+=ls(s,d[3])),p>4&&(g+=ls(o,d[4])),p>5&&(g+=ls(a,d[5])),p>6&&(g+=ls(u,d[6])),p>7&&(g+=ls(c,d[7])),p>8&&(g+=ls(l,d[8])),p>9&&(g+=ls(h,d[9]));var v=ln(e,t.nodeIndex).renderText;e.renderer.setValue(v,g)}return f}(e,t,n,r,i,s,o,a,u,c,l,h);case 16384:return function(e,t,n,r,i,s,o,a,u,c,l,h){var f=fn(e,t.nodeIndex),d=f.instance,p=!1,g=void 0,v=t.bindings.length;return v>0&&Sn(e,t,0,n)&&(p=!0,g=Or(e,f,t,0,n,g)),v>1&&Sn(e,t,1,r)&&(p=!0,g=Or(e,f,t,1,r,g)),v>2&&Sn(e,t,2,i)&&(p=!0,g=Or(e,f,t,2,i,g)),v>3&&Sn(e,t,3,s)&&(p=!0,g=Or(e,f,t,3,s,g)),v>4&&Sn(e,t,4,o)&&(p=!0,g=Or(e,f,t,4,o,g)),v>5&&Sn(e,t,5,a)&&(p=!0,g=Or(e,f,t,5,a,g)),v>6&&Sn(e,t,6,u)&&(p=!0,g=Or(e,f,t,6,u,g)),v>7&&Sn(e,t,7,c)&&(p=!0,g=Or(e,f,t,7,c,g)),v>8&&Sn(e,t,8,l)&&(p=!0,g=Or(e,f,t,8,l,g)),v>9&&Sn(e,t,9,h)&&(p=!0,g=Or(e,f,t,9,h,g)),g&&d.ngOnChanges(g),65536&t.flags&&cn(e,256,t.nodeIndex)&&d.ngOnInit(),262144&t.flags&&d.ngDoCheck(),p}(e,t,n,r,i,s,o,a,u,c,l,h);case 32:case 64:case 128:return function(e,t,n,r,i,s,o,a,u,c,l,h){var f=t.bindings,d=!1,p=f.length;if(p>0&&En(e,t,0,n)&&(d=!0),p>1&&En(e,t,1,r)&&(d=!0),p>2&&En(e,t,2,i)&&(d=!0),p>3&&En(e,t,3,s)&&(d=!0),p>4&&En(e,t,4,o)&&(d=!0),p>5&&En(e,t,5,a)&&(d=!0),p>6&&En(e,t,6,u)&&(d=!0),p>7&&En(e,t,7,c)&&(d=!0),p>8&&En(e,t,8,l)&&(d=!0),p>9&&En(e,t,9,h)&&(d=!0),d){var g,v=dn(e,t.nodeIndex);switch(201347067&t.flags){case 32:g=new Array(f.length),p>0&&(g[0]=n),p>1&&(g[1]=r),p>2&&(g[2]=i),p>3&&(g[3]=s),p>4&&(g[4]=o),p>5&&(g[5]=a),p>6&&(g[6]=u),p>7&&(g[7]=c),p>8&&(g[8]=l),p>9&&(g[9]=h);break;case 64:g={},p>0&&(g[f[0].name]=n),p>1&&(g[f[1].name]=r),p>2&&(g[f[2].name]=i),p>3&&(g[f[3].name]=s),p>4&&(g[f[4].name]=o),p>5&&(g[f[5].name]=a),p>6&&(g[f[6].name]=u),p>7&&(g[f[7].name]=c),p>8&&(g[f[8].name]=l),p>9&&(g[f[9].name]=h);break;case 128:var y=n;switch(p){case 1:g=y.transform(n);break;case 2:g=y.transform(r);break;case 3:g=y.transform(r,i);break;case 4:g=y.transform(r,i,s);break;case 5:g=y.transform(r,i,s,o);break;case 6:g=y.transform(r,i,s,o,a);break;case 7:g=y.transform(r,i,s,o,a,u);break;case 8:g=y.transform(r,i,s,o,a,u,c);break;case 9:g=y.transform(r,i,s,o,a,u,c,l);break;case 10:g=y.transform(r,i,s,o,a,u,c,l,h)}}v.value=g}return d}(e,t,n,r,i,s,o,a,u,c,l,h);default:throw"unreachable"}}(e,t,r,i,s,o,a,u,c,l,h,f):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,i=0;i<n.length;i++)ns(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,i=!1,s=0;s<n.length;s++)En(e,t,s,n[s])&&(i=!0);if(i){for(var o="",a=0;a<n.length;a++)o+=ls(n[a],r[a]);o=t.text.prefix+o;var u=ln(e,t.nodeIndex).renderText;e.renderer.setValue(u,o)}return i}(e,t,n);case 16384:return function(e,t,n){for(var r=fn(e,t.nodeIndex),i=r.instance,s=!1,o=void 0,a=0;a<n.length;a++)Sn(e,t,a,n[a])&&(s=!0,o=Or(e,r,t,a,n[a],o));return o&&i.ngOnChanges(o),65536&t.flags&&cn(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),s}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,i=!1,s=0;s<n.length;s++)En(e,t,s,n[s])&&(i=!0);if(i){var o,a=dn(e,t.nodeIndex);switch(201347067&t.flags){case 32:o=n;break;case 64:o={};for(var u=0;u<n.length;u++)o[r[u].name]=n[u];break;case 128:var c=n[0],l=n.slice(1);o=c.transform.apply(c,_toConsumableArray(l))}a.value=o}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function _s(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var i=hn(e,n).template._projectedViews;if(i)for(var s=0;s<i.length;s++){var o=i[s];o.state|=32,xn(o,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Cs(e,t,n,r,i,s,o,a,u,c,l,h,f){return 0===n?function(e,t,n,r,i,s,o,a,u,c,l,h){var f=t.bindings.length;f>0&&_n(e,t,0,n),f>1&&_n(e,t,1,r),f>2&&_n(e,t,2,i),f>3&&_n(e,t,3,s),f>4&&_n(e,t,4,o),f>5&&_n(e,t,5,a),f>6&&_n(e,t,6,u),f>7&&_n(e,t,7,c),f>8&&_n(e,t,8,l),f>9&&_n(e,t,9,h)}(e,t,r,i,s,o,a,u,c,l,h,f):function(e,t,n){for(var r=0;r<n.length;r++)_n(e,t,r,n[r])}(e,t,r),!1}function xs(e,t){if(pn(e,t.nodeIndex).dirty)throw sn(gn.createDebugContext(e,t.nodeIndex),"Query ".concat(t.query.id," not dirty"),"Query ".concat(t.query.id," dirty"),0!=(1&e.state))}function As(e){if(!(128&e.state)){if(Is(e,Fs.Destroy),ks(e,Fs.Destroy),Br(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=Fn(e);if(t){var n=t.template._projectedViews;n&&(be(n,n.indexOf(e)),gn.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(hn(e,n).renderElement):2&r.flags?e.renderer.destroyNode(ln(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&pn(e,n).destroy()}}(e),Tn(e)&&e.renderer.destroy(),e.state|=128}}var Fs=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function ks(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?Ts(hn(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Is(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var s=hn(e,r).viewContainer._embeddedViews,o=0;o<s.length;o++)Ts(s[o],t);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Ts(e,t){var n=e.state;switch(t){case Fs.CheckNoChanges:0==(128&n)&&(12==(12&n)?bs(e):64&n&&Ds(e,Fs.CheckNoChangesProjectedViews));break;case Fs.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?bs(e):64&n&&Ds(e,t));break;case Fs.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Ss(e):64&n&&Ds(e,Fs.CheckAndUpdateProjectedViews));break;case Fs.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Ss(e):64&n&&Ds(e,t));break;case Fs.Destroy:As(e);break;case Fs.CreateViewNodes:ws(e)}}function Ds(e,t){Is(e,t),ks(e,t)}function Ns(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var i=e.def.nodes.length,s=0;s<i;s++){var o=e.def.nodes[s];if(o.flags&t&&o.flags&n)switch(gn.setCurrentNode(e,o.nodeIndex),r){case 0:is(e,o);break;case 1:xs(e,o)}o.childFlags&t&&o.childFlags&n||(s+=o.childCount)}}var Ps=!1;function Rs(e,t,n,r,i,s){var o=i.injector.get(Rt);return gs(Os(e,i,o,t,n),r,s)}function Hs(e,t,n,r,i,s){var o=i.injector.get(Rt),a=Os(e,i,new go(o),t,n),u=Gs(r);return fo(to.create,gs,null,[a,u,s])}function Os(e,t,n,r,i){var s=t.injector.get($e),o=t.injector.get(Ae),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:s,rendererFactory:n,renderer:a,errorHandler:o}}function Bs(e,t,n,r){var i=Gs(n);return fo(to.create,ps,null,[e,t,i,r])}function js(e,t,n,r){return n=Ks.get(t.element.componentProvider.provider.token)||Gs(n),fo(to.create,vs,null,[e,t,n,r])}function Vs(e,t,n,r){return pr(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===Ls.size||(e.providers.forEach((function(e){var r=Ls.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)})),e.modules.forEach((function(e){Ms.forEach((function(r,i){$(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)}))}))),{hasOverrides:t,hasDeprecatedOverrides:n}}(e),n=t.hasOverrides,r=t.hasDeprecatedOverrides;return n?(function(e){for(var t=0;t<e.providers.length;t++){var n=e.providers[t];r&&(n.flags|=4096);var i=Ls.get(n.token);i&&(n.flags=-3841&n.flags|i.flags,n.deps=Pn(i.deps),n.value=i.value)}if(Ms.size>0){var s=new Set(e.modules);Ms.forEach((function(t,n){if(s.has($(n).providedIn)){var i={token:n,flags:t.flags|(r?4096:0),deps:Pn(t.deps),value:t.value,index:e.providers.length};e.providers.push(i),e.providersByKey[mn(n)]=i}}))}}(e=e.factory((function(){return vn}))),e):e}(r))}var Ls=new Map,Ms=new Map,Ks=new Map;function Us(e){var t;Ls.set(e.token,e),"function"==typeof e.token&&(t=$(e.token))&&"function"==typeof t.providedIn&&Ms.set(e.token,e)}function qs(e,t){var n=On(t.viewDefFactory),r=On(n.nodes[0].element.componentView);Ks.set(e,r)}function zs(){Ls.clear(),Ms.clear(),Ks.clear()}function Gs(e){if(0===Ls.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ls.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory((function(){return vn}));for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,s=Ls.get(i.token);s&&(r.flags=-3841&r.flags|s.flags,i.deps=Pn(s.deps),i.value=s.value)}}}}function Ws(e,t,n,r,i,s,o,a,u,c,l,h,f){var d=e.def.nodes[t];return Es(e,d,n,r,i,s,o,a,u,c,l,h,f),224&d.flags?dn(e,t).value:void 0}function Ys(e,t,n,r,i,s,o,a,u,c,l,h,f){var d=e.def.nodes[t];return Cs(e,d,n,r,i,s,o,a,u,c,l,h,f),224&d.flags?dn(e,t).value:void 0}function Zs(e){return fo(to.detectChanges,Ss,null,[e])}function Js(e){return fo(to.checkNoChanges,bs,null,[e])}function Xs(e){return fo(to.destroy,As,null,[e])}var $s,Qs,eo,to=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();function no(e,t){Qs=e,eo=t}function ro(e,t,n,r){return no(e,t),fo(to.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function io(e,t){if(128&e.state)throw an(to[$s]);return no(e,uo(e,0)),e.def.updateDirectives((function(e,n,r){for(var i=e.def.nodes[n],s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return 0===t?oo(e,i,r,o):ao(e,i,r,o),16384&i.flags&&no(e,uo(e,n)),224&i.flags?dn(e,i.nodeIndex).value:void 0}),e)}function so(e,t){if(128&e.state)throw an(to[$s]);return no(e,co(e,0)),e.def.updateRenderer((function(e,n,r){for(var i=e.def.nodes[n],s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return 0===t?oo(e,i,r,o):ao(e,i,r,o),3&i.flags&&no(e,co(e,n)),224&i.flags?dn(e,i.nodeIndex).value:void 0}),e)}function oo(e,t,n,r){if(Es.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))){var i=1===n?r[0]:r;if(16384&t.flags){for(var s={},o=0;o<t.bindings.length;o++){var a=t.bindings[o],u=i[o];8&a.flags&&(s[(d=a.nonMinifiedName,"ng-reflect-"+d.replace(/[$@]/g,"_").replace(tt,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"-"+t[1].toLowerCase()})))]=nt(u))}var c=t.parent,l=hn(e,c.nodeIndex).renderElement;if(c.element.name)for(var h in s){var f=s[h];null!=f?e.renderer.setAttribute(l,h,f):e.renderer.removeAttribute(l,h)}else e.renderer.setValue(l,"bindings="+JSON.stringify(s,null,2))}}var d}function ao(e,t,n,r){Cs.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))}function uo(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function co(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var lo=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=t.def.nodes[n];for(var r=this.nodeDef,i=t;r&&0==(1&r.flags);)r=r.parent;if(!r)for(;!r&&i;)r=kn(i),i=i.parent;this.elDef=r,this.elView=i}return _createClass(e,[{key:"logError",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s;2&this.nodeDef.flags?(i=this.view.def,s=this.nodeDef.nodeIndex):(i=this.elView.def,s=this.elDef.nodeIndex);var o=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(i,s),a=-1;i.factory((function(){var t;return++a===o?(t=e.error).bind.apply(t,[e].concat(n)):vn})),a<o&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,n))}},{key:"elOrCompView",get:function(){return hn(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return lr(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}},{key:"references",get:function(){var e={};if(this.elDef){ho(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&ho(this.elView,n,e),t+=n.childCount}}return e}},{key:"componentRenderElement",get:function(){var e=function(e){for(;e&&!Tn(e);)e=e.parent;return e.parent?hn(e.parent,kn(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?In(this.view,this.nodeDef):In(this.elView,this.elDef)}}]),e}();function ho(e,t,n){for(var r in t.references)n[r]=os(e,t,t.references[r])}function fo(e,t,n,r){var i,s,o=$s,a=Qs,u=eo;try{$s=e;var c=t.apply(n,r);return Qs=a,eo=u,$s=o,c}catch(l){if(_e(l)||!Qs)throw l;throw i=l,s=po(),i instanceof Error||(i=new Error(i.toString())),on(i,s),i}}function po(){return Qs?new lo(Qs,eo):null}var go=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"createRenderer",value:function(e,t){return new vo(this.delegate.createRenderer(e,t))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),e}(),vo=function(){function e(t){_classCallCheck(this,e),this.delegate=t,this.debugContextFactory=po,this.data=this.delegate.data}return _createClass(e,[{key:"createDebugContext",value:function(e){return this.debugContextFactory(e)}},{key:"destroyNode",value:function(e){var t=qi(e);!function(e){Ui.delete(e.nativeNode)}(t),t instanceof Mi&&(t.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(e)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(e,t){var n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){var i=new Ki(n,null,r);i.name=e,zi(i)}return n}},{key:"createComment",value:function(e){var t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&zi(new Mi(t,null,n)),t}},{key:"createText",value:function(e){var t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&zi(new Mi(t,null,n)),t}},{key:"appendChild",value:function(e,t){var n=qi(e),r=qi(t);n&&r&&n instanceof Ki&&n.addChild(r),this.delegate.appendChild(e,t)}},{key:"insertBefore",value:function(e,t,n){var r=qi(e),i=qi(t),s=qi(n);r&&i&&r instanceof Ki&&r.insertBefore(s,i),this.delegate.insertBefore(e,t,n)}},{key:"removeChild",value:function(e,t){var n=qi(e),r=qi(t);n&&r&&n instanceof Ki&&n.removeChild(r),this.delegate.removeChild(e,t)}},{key:"selectRootElement",value:function(e,t){var n=this.delegate.selectRootElement(e,t),r=po();return r&&zi(new Ki(n,null,r)),n}},{key:"setAttribute",value:function(e,t,n,r){var i=qi(e);i&&i instanceof Ki&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){var r=qi(e);r&&r instanceof Ki&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){var n=qi(e);n&&n instanceof Ki&&(n.classes[t]=!0),this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){var n=qi(e);n&&n instanceof Ki&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){var i=qi(e);i&&i instanceof Ki&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){var r=qi(e);r&&r instanceof Ki&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){var r=qi(e);r&&r instanceof Ki&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){if("string"!=typeof e){var r=qi(e);r&&r.listeners.push(new Li(t,n))}return this.delegate.listen(e,t,n)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setValue",value:function(e,t){return this.delegate.setValue(e,t)}}]),e}();var yo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this)).moduleType=e,s._bootstrapComponents=r,s._ngModuleDefFactory=i,s}return _createClass(n,[{key:"create",value:function(e){!function(){if(!Ps){Ps=!0;var e=Ie()?{setCurrentNode:no,createRootView:Hs,createEmbeddedView:Bs,createComponentView:js,createNgModuleRef:Vs,overrideProvider:Us,overrideComponentView:qs,clearOverrides:zs,checkAndUpdateView:Zs,checkNoChangesView:Js,destroyView:Xs,createDebugContext:function(e,t){return new lo(e,t)},handleEvent:ro,updateDirectives:io,updateRenderer:so}:{setCurrentNode:function(){},createRootView:Rs,createEmbeddedView:ps,createComponentView:vs,createNgModuleRef:pr,overrideProvider:vn,overrideComponentView:vn,clearOverrides:vn,checkAndUpdateView:Ss,checkNoChangesView:bs,destroyView:As,createDebugContext:function(e,t){return new lo(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?Ws:Ys,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?Ws:Ys,e)}};gn.setCurrentNode=e.setCurrentNode,gn.createRootView=e.createRootView,gn.createEmbeddedView=e.createEmbeddedView,gn.createComponentView=e.createComponentView,gn.createNgModuleRef=e.createNgModuleRef,gn.overrideProvider=e.overrideProvider,gn.overrideComponentView=e.overrideComponentView,gn.clearOverrides=e.clearOverrides,gn.checkAndUpdateView=e.checkAndUpdateView,gn.checkNoChangesView=e.checkNoChangesView,gn.destroyView=e.destroyView,gn.resolveDep=Rr,gn.createDebugContext=e.createDebugContext,gn.handleEvent=e.handleEvent,gn.updateDirectives=e.updateDirectives,gn.updateRenderer=e.updateRenderer,gn.dirtyParentQueries=rs}}();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(On(this._ngModuleDefFactory));return gn.createNgModuleRef(this.moduleType,e||at.NULL,this._bootstrapComponents,t)}}]),n}(function(){return function e(){_classCallCheck(this,e)}}()),mo=function e(){_classCallCheck(this,e)},wo=function(){function e(){_classCallCheck(this,e),this.displayStateStatus="hide",this.userNameStatus=""}return _createClass(e,[{key:"onChangeState",value:function(e){this.displayStateStatus="show",this.userNameStatus=e.userName}}]),e}(),bo=function e(){_classCallCheck(this,e)},So=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Eo=new ce("UseV4Plurals"),_o=function e(){_classCallCheck(this,e)},Co=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).locale=e,i.deprecatedPluralFn=r,i}return _createClass(n,[{key:"getPluralCategory",value:function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){var t=e.toLowerCase().replace(/_/g,"-"),n=Mr[t];if(n)return n;var r=t.split("-")[0];if(n=Mr[r])return n;if("en"===r)return qr;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[Kr.PluralCase]}(t||this.locale)(e)){case So.Zero:return"zero";case So.One:return"one";case So.Two:return"two";case So.Few:return"few";case So.Many:return"many";default:return"other"}}}]),n}(_o),xo=function e(){_classCallCheck(this,e)},Ao=function(){function e(t,n,r,i){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._initialClasses=[]}return _createClass(e,[{key:"getValue",value:function(){return null}},{key:"setClass",value:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"setNgClass",value:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(bt(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"applyChanges",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+ee(e.item));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}}]),e}(),Fo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"ngDoCheck",value:function(){this._delegate.applyChanges()}},{key:"klass",set:function(e){this._delegate.setClass(e)}},{key:"ngClass",set:function(e){this._delegate.setNgClass(e)}}]),n}(function(){var e=function(){function e(t){_classCallCheck(this,e),this._delegate=t}return _createClass(e,[{key:"getValue",value:function(){return this._delegate.getValue()}}]),e}();return e.ngDirectiveDef=void 0,e}()),ko=function e(){_classCallCheck(this,e)},Io=new ce("DocumentToken");function To(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))}var Do=n("Nj2v"),No=n.n(Do),Po=function(){function e(){_classCallCheck(this,e),this.style="show",this.buttonDisplay="show",this.errorStyle="hide",this.errorMessage="",this.appid=new No.a,this.changeState=new zr}return _createClass(e,[{key:"ngOnInit",value:function(){return To(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.appid.init({clientId:"ZGM3OWIxY2QtZDRmNS00",discoveryEndpoint:"https://ibm.github.io/wntrac/"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.errorMessage=e.t0.message,this.errorStyle="show";case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))}},{key:"onLoginClick",value:function(){return To(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.buttonDisplay="hide",e.next=4,this.appid.signin();case 4:e.t0=e.sent.idTokenPayload.name,e.t1="Hi "+e.t0,t=e.t1+", Congratulations!",this.style="hide",this.changeState.emit({userName:t}),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(0),this.errorMessage=e.t2.message,this.errorStyle="show",this.buttonDisplay="show";case 13:case"end":return e.stop()}}),e,this,[[0,10]])})))}}]),e}(),Ro=wn({encapsulation:0,styles:[[""]],data:{}});function Ho(e){return hs(0,[(e()(),$i(0,0,null,null,19,"div",[["id","welcome"]],null,null,null,null,null)),xr(512,null,xo,Ao,[Zt,Jt,Nt,Ot]),Cr(2,278528,null,0,Fo,[xo],{ngClass:[0,"ngClass"]},null),(e()(),$i(3,0,null,null,16,"div",[["class","welcome-display"]],null,null,null,null,null)),(e()(),$i(4,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),$i(5,0,null,null,0,"img",[["alt","App ID Logo"],["class","logo-icon"],["src","../../assets/app_id_icon.svg"]],null,null,null,null,null)),(e()(),$i(6,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),us(-1,null,[" Welcome to the"])),(e()(),$i(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" IBM Cloud App ID SPA SDK"])),(e()(),$i(10,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),us(-1,null,[" Sample App "])),(e()(),$i(12,0,null,null,3,"button",[["id","login"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.onLoginClick()&&r),r}),null,null)),xr(512,null,xo,Ao,[Zt,Jt,Nt,Ot]),Cr(14,278528,null,0,Fo,[xo],{ngClass:[0,"ngClass"]},null),(e()(),us(-1,null,["Login"])),(e()(),$i(16,0,null,null,3,"div",[["id","error"]],null,null,null,null,null)),xr(512,null,xo,Ao,[Zt,Jt,Nt,Ot]),Cr(18,278528,null,0,Fo,[xo],{ngClass:[0,"ngClass"]},null),(e()(),us(19,null,["",""]))],(function(e,t){var n=t.component;e(t,2,0,n.style),e(t,14,0,n.buttonDisplay),e(t,18,0,n.errorStyle)}),(function(e,t){e(t,19,0,t.component.errorMessage)}))}var Oo=function e(){_classCallCheck(this,e)},Bo=wn({encapsulation:0,styles:[[""]],data:{}});function jo(e){return hs(0,[(e()(),$i(0,0,null,null,8,"div",[],null,null,null,null,null)),xr(512,null,xo,Ao,[Zt,Jt,Nt,Ot]),Cr(2,278528,null,0,Fo,[xo],{ngClass:[0,"ngClass"]},null),(e()(),$i(3,0,null,null,5,"div",[["class","welcome-display"]],null,null,null,null,null)),(e()(),$i(4,0,null,null,0,"img",[["alt","App ID Logo"],["class","logo-icon"],["src","../../assets/app_id_icon.svg"]],null,null,null,null,null)),(e()(),$i(5,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),us(6,null,["",""])),(e()(),$i(7,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),us(-1,null,["You've made your first authentication."]))],(function(e,t){e(t,2,0,t.component.displayState)}),(function(e,t){e(t,6,0,t.component.userName)}))}var Vo=wn({encapsulation:0,styles:[[""]],data:{}});function Lo(e){return hs(0,[(e()(),$i(0,0,null,null,1,"app-welcome",[],null,[[null,"changeState"]],(function(e,t,n){var r=!0;return"changeState"===t&&(r=!1!==e.component.onChangeState(n)&&r),r}),Ho,Ro)),Cr(1,114688,null,0,Po,[],null,{changeState:"changeState"}),(e()(),$i(2,0,null,null,1,"app-home",[],null,null,null,jo,Bo)),Cr(3,49152,null,0,Oo,[],{displayState:[0,"displayState"],userName:[1,"userName"]},null)],(function(e,t){var n=t.component;e(t,1,0),e(t,3,0,n.displayStateStatus,n.userNameStatus)}),null)}var Mo=new nr("app-root",wo,(function(e){return hs(0,[(e()(),$i(0,0,null,null,1,"app-root",[],null,null,null,Lo,Vo)),Cr(1,49152,null,0,wo,[],null,null)],null,null)}),{},{},[]),Ko=null;function Uo(){return Ko}var qo,zo={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Go={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yo=function(){if(ue.Node)return ue.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}}(),Zo=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"parse",value:function(e){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(e,t){return t in e}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"getProperty",value:function(e,t){return e[t]}},{key:"invoke",value:function(e,t,n){e[t].apply(e,_toConsumableArray(n))}},{key:"logError",value:function(e){window.console&&(console.error?console.error(e):console.log(e))}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"contains",value:function(e,t){return Yo.call(e,t)}},{key:"querySelector",value:function(e,t){return e.querySelector(t)}},{key:"querySelectorAll",value:function(e,t){return e.querySelectorAll(t)}},{key:"on",value:function(e,t,n){e.addEventListener(t,n,!1)}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"createMouseEvent",value:function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}},{key:"createEvent",value:function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}},{key:"preventDefault",value:function(e){e.preventDefault(),e.returnValue=!1}},{key:"isPrevented",value:function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}},{key:"getInnerHTML",value:function(e){return e.innerHTML}},{key:"getTemplateContent",value:function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}},{key:"getOuterHTML",value:function(e){return e.outerHTML}},{key:"nodeName",value:function(e){return e.nodeName}},{key:"nodeValue",value:function(e){return e.nodeValue}},{key:"type",value:function(e){return e.type}},{key:"content",value:function(e){return this.hasProperty(e,"content")?e.content:e}},{key:"firstChild",value:function(e){return e.firstChild}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"parentElement",value:function(e){return e.parentNode}},{key:"childNodes",value:function(e){return e.childNodes}},{key:"childNodesAsList",value:function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n}},{key:"clearNodes",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"removeChild",value:function(e,t){e.removeChild(t)}},{key:"replaceChild",value:function(e,t,n){e.replaceChild(t,n)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"insertBefore",value:function(e,t,n){e.insertBefore(n,t)}},{key:"insertAllBefore",value:function(e,t,n){n.forEach((function(n){return e.insertBefore(n,t)}))}},{key:"insertAfter",value:function(e,t,n){e.insertBefore(n,t.nextSibling)}},{key:"setInnerHTML",value:function(e,t){e.innerHTML=t}},{key:"getText",value:function(e){return e.textContent}},{key:"setText",value:function(e,t){e.textContent=t}},{key:"getValue",value:function(e){return e.value}},{key:"setValue",value:function(e,t){e.value=t}},{key:"getChecked",value:function(e){return e.checked}},{key:"setChecked",value:function(e,t){e.checked=t}},{key:"createComment",value:function(e){return this.getDefaultDocument().createComment(e)}},{key:"createTemplate",value:function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createElementNS",value:function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}},{key:"createTextNode",value:function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}},{key:"createScriptTag",value:function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}},{key:"createStyleElement",value:function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}},{key:"createShadowRoot",value:function(e){return e.createShadowRoot()}},{key:"getShadowRoot",value:function(e){return e.shadowRoot}},{key:"getHost",value:function(e){return e.host}},{key:"clone",value:function(e){return e.cloneNode(!0)}},{key:"getElementsByClassName",value:function(e,t){return e.getElementsByClassName(t)}},{key:"getElementsByTagName",value:function(e,t){return e.getElementsByTagName(t)}},{key:"classList",value:function(e){return Array.prototype.slice.call(e.classList,0)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"hasClass",value:function(e,t){return e.classList.contains(t)}},{key:"setStyle",value:function(e,t,n){e.style[t]=n}},{key:"removeStyle",value:function(e,t){e.style[t]=""}},{key:"getStyle",value:function(e,t){return e.style[t]}},{key:"hasStyle",value:function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0}},{key:"tagName",value:function(e){return e.tagName}},{key:"attributeMap",value:function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t}},{key:"hasAttribute",value:function(e,t){return e.hasAttribute(t)}},{key:"hasAttributeNS",value:function(e,t,n){return e.hasAttributeNS(t,n)}},{key:"getAttribute",value:function(e,t){return e.getAttribute(t)}},{key:"getAttributeNS",value:function(e,t,n){return e.getAttributeNS(t,n)}},{key:"setAttribute",value:function(e,t,n){e.setAttribute(t,n)}},{key:"setAttributeNS",value:function(e,t,n,r){e.setAttributeNS(t,n,r)}},{key:"removeAttribute",value:function(e,t){e.removeAttribute(t)}},{key:"removeAttributeNS",value:function(e,t,n){e.removeAttributeNS(t,n)}},{key:"templateAwareRoot",value:function(e){return this.isTemplateElement(e)?this.content(e):e}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(e){return e.title}},{key:"setTitle",value:function(e,t){e.title=t||""}},{key:"elementMatches",value:function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}},{key:"isTemplateElement",value:function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}},{key:"isTextNode",value:function(e){return e.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(e){return e.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(e){return null!=e.shadowRoot&&e instanceof HTMLElement}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"importIntoDoc",value:function(e){return document.importNode(this.templateAwareRoot(e),!0)}},{key:"adoptNode",value:function(e){return document.adoptNode(e)}},{key:"getHref",value:function(e){return e.getAttribute("href")}},{key:"getEventKey",value:function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Wo.hasOwnProperty(t)&&(t=Wo[t]))}return Go[t]||t}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=Jo||(Jo=document.querySelector("base"))?Jo.getAttribute("href"):null;return null==n?null:(t=n,qo||(qo=document.createElement("a")),qo.setAttribute("href",t),"/"===qo.pathname.charAt(0)?qo.pathname:"/"+qo.pathname)}},{key:"resetBaseElement",value:function(){Jo=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(e,t,n){this.setAttribute(e,"data-"+t,n)}},{key:"getData",value:function(e,t){return this.getAttribute(e,"data-"+t)}},{key:"getComputedStyle",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return getComputedStyle(e)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var n,r=_createForOfIteratorHelper(e.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,s=i.indexOf("="),o=_slicedToArray(-1==s?[i,""]:[i.slice(0,s),i.slice(s+1)],2),a=o[0],u=o[1];if(a.trim()===t)return decodeURIComponent(u)}}catch(c){r.e(c)}finally{r.f()}return null}(document.cookie,e)}},{key:"setCookie",value:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}},{key:"attrToPropMap",get:function(){return zo}}],[{key:"makeCurrent",value:function(){var e;e=new n,Ko||(Ko=e)}}]),n}(function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this))._animationPrefix=null,e._transitionEnd=null;try{var r=e.createElement("div",document);if(null!=e.getStyle(r,"animationName"))e._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],s=0;s<i.length;s++)if(null!=e.getStyle(r,i[s]+"AnimationName")){e._animationPrefix="-"+i[s].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach((function(t){null!=e.getStyle(r,t)&&(e._transitionEnd=o[t])}))}catch(a){e._animationPrefix=null,e._transitionEnd=null}return e}return _createClass(n,[{key:"getDistributedNodes",value:function(e){return e.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(e,t,n){e.href=null==n?t:t+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),n}(function(){function e(){_classCallCheck(this,e),this.resourceLoaderType=null}return _createClass(e,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e}}]),e}())),Jo=null;function Xo(){return!!window.history.pushState}var $o=new ce("TRANSITION_ID"),Qo=[{provide:Yr,useFactory:function(e,t,n){return function(){n.get(Zr).donePromise.then((function(){var n=Uo();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter((function(t){return n.getAttribute(t,"ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[$o,Io,at],multi:!0}],ea=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){ue.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},ue.getAllAngularTestabilities=function(){return e.getAllTestabilities()},ue.getAllAngularRootElements=function(){return e.getAllRootElements()},ue.frameworkStabilizers||(ue.frameworkStabilizers=[]),ue.frameworkStabilizers.push((function(e){var t=ue.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Uo().isShadowRoot(t)?this.findTestabilityInTree(e,Uo().getHost(t),!0):this.findTestabilityInTree(e,Uo().parentElement(t),!0):null}}],[{key:"init",value:function(){var t;t=new e,Ti=t}}]),e}();function ta(e,t){"undefined"!=typeof COMPILED&&COMPILED||((ue.ng=ue.ng||{})[e]=t)}var na={ApplicationRef:ji,NgZone:bi};function ra(e){return qi(e)}var ia=new ce("EventManagerPlugins"),sa=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)}}]),e}(),oa=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=Uo().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),aa=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}(),ua=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _createClass(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Uo().remove(e)}))}}]),n}(aa),ca={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},la=/%COMP%/g;function ha(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?ha(e,i,n):(i=i.replace(la,e),n.push(i))}return n}function fa(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var da=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new pa(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Se.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new ya(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case Se.Native:case Se.ShadowDom:return new ma(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=ha(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}(),pa=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(ca[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=ca[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=ca[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&Ht.DashCase?e.style.setProperty(t,n,r&Ht.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&Ht.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){va(t,"property"),e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return va(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fa(n)):this.eventManager.addEventListener(e,t,fa(n))}}]),e}(),ga="@".charCodeAt(0);function va(e,t){if(e.charCodeAt(0)===ga)throw new Error("Found the synthetic ".concat(t," ").concat(e,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var ya=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;_classCallCheck(this,n),(o=t.call(this,e)).component=i;var a,u=ha(s+"-"+i.id,i.styles,[]);return r.addStyles(u),o.contentAttr="_ngcontent-%COMP%".replace(la,s+"-"+i.id),o.hostAttr=(a=s+"-"+i.id,"_nghost-%COMP%".replace(la,a)),o}return _createClass(n,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=_get(_getPrototypeOf(n.prototype),"createElement",this).call(this,e,t);return _get(_getPrototypeOf(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(pa),ma=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;_classCallCheck(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=i,o.component=s,o.shadowRoot=s.encapsulation===Se.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=ha(s.id,s.styles,[]),u=0;u<a.length;u++){var c=document.createElement("style");c.textContent=a[u],o.shadowRoot.appendChild(c)}return o}return _createClass(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return _get(_getPrototypeOf(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(pa),wa="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},ba=wa("addEventListener"),Sa=wa("removeEventListener"),Ea={},_a="__zone_symbol__propagationStopped",Ca=function(){var e="undefined"!=typeof Zone&&Zone[wa("BLACK_LISTED_EVENTS")];if(e){var t={};return e.forEach((function(e){t[e]=e})),t}}(),xa=function(e){return!!Ca&&Ca.hasOwnProperty(e)},Aa=function(e){var t=Ea[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length){var i=n[0];return i.zone!==Zone.current?i.zone.run(i.handler,this,r):i.handler.apply(this,r)}for(var s=n.slice(),o=0;o<s.length&&!0!==e[_a];o++){var a=s[o];a.zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},Fa=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var s;return _classCallCheck(this,n),(s=t.call(this,e)).ngZone=r,i&&function(e){return"server"===e}(i)||s.patchEvent(),s}return _createClass(n,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[_a]=!0),e&&e.apply(this,arguments)}}}},{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this,i=n;if(!e[ba]||bi.isInAngularZone()&&!xa(t))e.addEventListener(t,i,!1);else{var s=Ea[t];s||(s=Ea[t]=wa("ANGULAR"+t+"FALSE"));var o=e[s],a=o&&o.length>0;o||(o=e[s]=[]);var u=xa(t)?Zone.root:Zone.current;if(0===o.length)o.push({zone:u,handler:i});else{for(var c=!1,l=0;l<o.length;l++)if(o[l].handler===i){c=!0;break}c||o.push({zone:u,handler:i})}a||e[ba](t,Aa,!1)}return function(){return r.removeEventListener(e,t,i)}}},{key:"removeEventListener",value:function(e,t,n){var r=e[Sa];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var i=Ea[t],s=i&&e[i];if(!s)return e.removeEventListener.apply(e,[t,n,!1]);for(var o=!1,a=0;a<s.length;a++)if(s[a].handler===n){o=!0,s.splice(a,1);break}o?0===s.length&&r.apply(e,[t,Aa,!1]):e.removeEventListener.apply(e,[t,n,!1])}}]),n}(oa),ka={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Ia=new ce("HammerGestureConfig"),Ta=new ce("HammerLoader"),Da=function(){function e(){_classCallCheck(this,e),this.events=[],this.overrides={}}return _createClass(e,[{key:"buildHammer",value:function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t}}]),e}(),Na=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,s){var o;return _classCallCheck(this,n),(o=t.call(this,e))._config=r,o.console=i,o.loader=s,o}return _createClass(n,[{key:"supports",value:function(e){return!(!ka.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(e,'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.')),1))}},{key:"addEventListener",value:function(e,t,n){var r=this,i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var s=!1,o=function(){s=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(o=function(){});s||(o=r.addEventListener(e,t,n))})).catch((function(){r.console.warn('The "'.concat(t,'" event cannot be bound because the custom Hammer.JS loader failed.')),o=function(){}})),function(){o()}}return i.runOutsideAngular((function(){var s=r._config.buildHammer(e),o=function(e){i.runGuarded((function(){n(e)}))};return s.on(t,o),function(){s.off(t,o),"function"==typeof s.destroy&&s.destroy()}}))}},{key:"isCustomEvent",value:function(e){return this._config.events.indexOf(e)>-1}}]),n}(oa),Pa=["alt","control","meta","shift"],Ra={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Ha=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),s=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Uo().onAndCancel(e,i.domEventName,s)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),s="";if(Pa.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),s+=e+".")})),s+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=s,o}},{key:"getEventFullKey",value:function(e){var t="",n=Uo().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Pa.forEach((function(r){r!=n&&(0,Ra[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded((function(){return t(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(oa),Oa=function e(){_classCallCheck(this,e)},Ba=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r}return _createClass(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case Xe.NONE:return t;case Xe.HTML:return t instanceof Va?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=null;try{Oe=Oe||new Te(e);var r=t?String(t):"";n=Oe.getInertBodyElement(r);var i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Oe.getInertBodyElement(r)}while(r!==s);var o=new Ge,a=o.sanitizeChildren(Je(n)||n);return Ie()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n)for(var u=Je(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(t)));case Xe.STYLE:return t instanceof La?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(et);return t&&Pe(t[1])===t[1]||e.match(Qe)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(Ie()&&console.warn("WARNING: sanitizing unsafe style value ".concat(e," (see http://g.co/ng/security#xss).")),"unsafe")}(t));case Xe.SCRIPT:if(t instanceof Ma)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case Xe.URL:return t instanceof Ua||t instanceof Ka?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),Pe(String(t)));case Xe.RESOURCE_URL:if(t instanceof Ua)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(e,t){if(e instanceof ja)throw new Error("Required a safe ".concat(t,", got a ").concat(e.getTypeName()," (see http://g.co/ng/security#xss)"))}},{key:"bypassSecurityTrustHtml",value:function(e){return new Va(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return new La(e)}},{key:"bypassSecurityTrustScript",value:function(e){return new Ma(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return new Ka(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return new Ua(e)}}]),n}(Oa),ja=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),e}(),Va=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(ja),La=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(ja),Ma=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(ja),Ka=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(ja),Ua=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(ja),qa=Pi(Gi,"browser",[{provide:ei,useValue:"browser"},{provide:Qr,useValue:function(){Zo.makeCurrent(),ea.init()},multi:!0},{provide:bo,useClass:function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this))._doc=e,r._init(),r}return _createClass(n,[{key:"_init",value:function(){this.location=Uo().getLocation(),this._history=Uo().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return Uo().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){Uo().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){Uo().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,n){Xo()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Xo()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(bo),deps:[Io]},{provide:Io,useFactory:function(){return document},deps:[]}]);function za(){return new Ae}var Ga=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Jr,useValue:t.appId},{provide:$o,useExisting:Jr},Qo]}}}]),e}();"undefined"!=typeof window&&window;var Wa=new yo(mo,[wo],(function(e){return function(e){for(var t={},n=[],r=!1,i=0;i<e.length;i++){var s=e[i];s.token===st&&!0===s.value&&(r=!0),1073741824&s.flags&&n.push(s.token),s.index=i,t[mn(s.token)]=s}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([Zn(512,kt,It,[[8,[Mo]],[3,kt],me]),Zn(5120,ri,Zi,[[3,ri]]),Zn(4608,_o,Co,[ri,[2,Eo]]),Zn(5120,Lr,Ji,[bi]),Zn(4608,hi,hi,[]),Zn(5120,Jr,Xr,[]),Zn(5120,Zt,Wi,[]),Zn(5120,Jt,Yi,[]),Zn(4608,Oa,Ba,[Io]),Zn(6144,$e,null,[Oa]),Zn(4608,Ia,Da,[]),Zn(5120,ia,(function(e,t,n,r,i,s,o,a){return[new Fa(e,t,n),new Ha(r),new Na(i,s,o,a)]}),[Io,bi,ei,Io,Io,Ia,ni,[2,Ta]]),Zn(4608,sa,sa,[ia,bi]),Zn(135680,ua,ua,[Io]),Zn(4608,da,da,[sa,ua,Jr]),Zn(6144,Rt,null,[da]),Zn(6144,aa,null,[ua]),Zn(4608,ki,ki,[bi]),Zn(1073742336,ko,ko,[]),Zn(1024,Ae,za,[]),Zn(1024,Yr,(function(e){return[(t=e,ta("probe",ra),ta("coreTokens",Object.assign({},na,(t||[]).reduce((function(e,t){return e[t.name]=t.token,e}),{}))),function(){return ra})];var t}),[[2,Ni]]),Zn(512,Zr,Zr,[[2,Yr]]),Zn(131584,ji,ji,[bi,ni,at,Ae,kt,Zr]),Zn(1073742336,Xi,Xi,[ji]),Zn(1073742336,Ga,Ga,[[3,Ga]]),Zn(1073742336,mo,mo,[]),Zn(256,st,!0,[])])}));(function(){if(ke)throw new Error("Cannot enable prod mode after platform setup.");Fe=!1})(),qa().bootstrapModuleFactory(Wa).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);